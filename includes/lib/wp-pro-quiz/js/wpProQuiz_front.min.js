(function(t){t.wpProQuizFront=function(e,i){function o(e,i,o,d){if("single"==e.type||"multiple"==e.type)d.children().each(function(){var e=t(this),s=e.attr("data-pos");if(null!=i[s]){var d=i[s];!0==d&&(t(".wpProQuiz_questionInput",e).prop("checked","checked"),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}}))}});else if("free_answer"==e.type)d.children().each(function(){t(this);t(".wpProQuiz_questionInput",this).val(i)}),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("sort_answer"==e.type)jQuery.each(i,function(e,i){var o=t("li.wpProQuiz_questionListItem[data-pos=\""+i+"\"]",d),s=t("div.wpProQuiz_sortable",o),n=t(s).text();jQuery(d).append(o)}),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("matrix_sort_answer"==e.type)jQuery.each(i,function(e,i){var s=t(".wpProQuiz_matrixSortString .wpProQuiz_sortStringList li[data-pos=\""+e+"\"]",o),n=t("li.wpProQuiz_questionListItem[data-pos=\""+i+"\"] ul.wpProQuiz_maxtrixSortCriterion",d);jQuery(s).appendTo(n)}),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("cloze_answer"==e.type)jQuery("span.wpProQuiz_cloze input[type=\"text\"]",d).each(function(e){"undefined"!=typeof i[e]&&t(this).val(i[e])}),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("assessment_answer"==e.type)t("input.wpProQuiz_questionInput[value=\""+i+"\"]",d).attr("checked","checked"),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if(!("essay"==e.type));else if(d.find("#uploadEssayFile_"+e.id).length){var r=d.find("#uploadEssayFile_"+e.id);t(r).val(i),t("<p>"+s(i)+"</p>").insertAfter(r),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}else d.find(".wpProQuiz_questionEssay").length&&(d.find(".wpProQuiz_questionEssay").html(i),n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}}))}function s(e){return null==e?"":e.split("/").reverse()[0]}var n=t(e),d=i,r={},a=this,u={},p={},l=0,h=null,m=[],w="",_=!1,z=1,f=0,Q=null,P="",g="",q={randomAnswer:0,randomQuestion:0,disabledAnswerMark:0,checkBeforeStart:0,preview:0,cors:0,isAddAutomatic:0,quizSummeryHide:0,skipButton:0,reviewQustion:0,autoStart:0,forcingQuestionSolve:0,hideQuestionPositionOverview:0,formActivated:0,maxShowQuestion:0,sortCategories:0},v={isQuizStart:0,isLocked:0,loadLock:0,isPrerequisite:0,isUserStartLocked:0},x={check:"input[name=\"check\"]",next:"input[name=\"next\"]",questionList:".wpProQuiz_questionList",skip:"input[name=\"skip\"]",singlePageLeft:"input[name=\"wpProQuiz_pageLeft\"]",singlePageRight:"input[name=\"wpProQuiz_pageRight\"]"},k={back:n.find("input[name=\"back\"]"),next:n.find(x.next),quiz:n.find(".wpProQuiz_quiz"),questionList:n.find(".wpProQuiz_list"),results:n.find(".wpProQuiz_results"),sending:n.find(".wpProQuiz_sending"),quizStartPage:n.find(".wpProQuiz_text"),timelimit:n.find(".wpProQuiz_time_limit"),toplistShowInButton:n.find(".wpProQuiz_toplistShowInButton"),listItems:t()},S={token:"",isUser:0},y={START:0,END:1},I=function(){var e=d.timelimit,i=0,o={},s="ldadv-time-limit-"+d.user_id+"-"+d.quizId;return o.stop=function(){e&&(t.removeCookie(s),window.clearInterval(i),k.timelimit.hide())},o.start=function(){if(e){t.cookie.raw=!0;var n=t.cookie(s),d=n?n:e,r=k.timelimit.find("span").text(a.methode.parseTime(d)),u=k.timelimit.find(".wpProQuiz_progress");k.timelimit.show();var p=+new Date;i=window.setInterval(function(){var i=+new Date-p,l=1e3*d-i;500<=i&&(n=l/1e3,r.text(a.methode.parseTime(Math.ceil(n))),t.cookie(s,n)),u.css("width",100*(l/(1e3*e))+"%"),0>=l&&(o.stop(),a.methode.finishQuiz(!0))},16)}},o}(),b=new function(){function i(){}function o(e){var i="",t=Q[e];t.correct?i="wpProQuiz_reviewQuestionSolvedCorrect":t.incorrect?i="wpProQuiz_reviewQuestionSolvedIncorrect":!0===t.solved||!1===t.solved?i="wpProQuiz_reviewQuestionSolved":t.review?i="wpProQuiz_reviewQuestionReview":t.skip&&(i="wpProQuiz_reviewQuestionSkip"),l.eq(e).removeClass("wpProQuiz_reviewQuestionSolved"),l.eq(e).removeClass("wpProQuiz_reviewQuestionReview"),l.eq(e).removeClass("wpProQuiz_reviewQuestionSkip"),""!=i&&l.eq(e).addClass(i)}function s(i){i.preventDefault();var e=i.pageY-w;0>e&&(e=0),e>m&&(e=m);var t=_*e;p.attr("style","margin-top: "+-t+"px !important"),u.css({top:e})}function d(i){i.preventDefault(),t(document).unbind(".scrollEvent")}var r=[],u=[],p=[],l=[],m=0,w=0,_=0,z=0,f=0,Q=[];this.init=function(){r=n.find(".wpProQuiz_reviewQuestion"),u=r.find("div"),p=r.find("ol"),l=p.children(),u.mousedown(function(i){i.preventDefault(),i.stopPropagation(),w=i.pageY-u.offset().top+z,t(document).bind("mouseup.scrollEvent",d),t(document).bind("mousemove.scrollEvent",s)}),l.click(function(){a.methode.showQuestion(t(this).index())}),n.bind("questionSolved",function(i){Q[i.values.index].solved=i.values.solved,o(i.values.index)}),n.bind("questionSolvedCorrect",function(i){Q[i.values.index].correct=!0,o(i.values.index)}),n.bind("questionSolvedIncorrect",function(i){Q[i.values.index].incorrect=!0,o(i.values.index)}),n.bind("changeQuestion",function(t){if("undefined"!=t.values.item[0]){t.values.item[0];a.methode.setupMatrixSortHeights()}l.removeClass("wpProQuiz_reviewQuestionTarget"),l.eq(t.values.index).addClass("wpProQuiz_reviewQuestionTarget"),i(t.values.index)}),n.bind("skipQuestion",function(i){Q[i.values.index].skip=!Q[i.values.index].skip,o(i.values.index)}),n.bind("reviewQuestion",function(i){Q[i.values.index].review=!Q[i.values.index].review,o(i.values.index)})},this.show=function(e){if(q.reviewQustion&&r.parent().show(),n.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(),!e){p.attr("style","margin-top: 0px !important"),u.css({top:0});var i=p.outerHeight(),t=r.height();m=t-u.height(),w=0,f=i-t,_=f/m,this.reset(),100<i&&u.show(),z=u.offset().top}},this.hide=function(){r.parent().hide()},this.toggle=function(){if(q.reviewQustion){r.parent().toggle(),l.removeClass("wpProQuiz_reviewQuestionTarget"),n.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(),p.attr("style","margin-top: 0px !important"),u.css({top:0});var e=p.outerHeight(),i=r.height();m=i-u.height(),w=0,f=e-i,_=f/m,100<e&&u.show(),z=u.offset().top}},this.reset=function(){for(var e=0,t=l.length;e<t;e++)Q[e]={};l.removeClass("wpProQuiz_reviewQuestionTarget"),l.removeClass("wpProQuiz_reviewQuestionSolved"),l.removeClass("wpProQuiz_reviewQuestionReview")}};var C=new function(){var e=0,i=-1,t=0,o=!1;this.questionStart=function(t){-1!=i&&this.questionStop(),i=t,e=+new Date},this.questionStop=function(){-1==i||(u[i].time+=Math.round((new Date-e)/1e3),i=-1)},this.startQuiz=function(){o&&this.stopQuiz(),t=+new Date,o=!0},this.stopQuiz=function(){o&&(quizEndTimer=+new Date,u.comp.quizTime+=Math.round((quizEndTimer-t)/1e3),u.comp.quizEndTimestamp=quizEndTimer,u.comp.quizStartTimestamp=t,o=!1)},this.init=function(){}},L=function(e,i,o,s,n){null==n&&(n=!0);var d={};return{singleMulti:function(){var e=s.find(".wpProQuiz_questionInput");!0==n&&s.find(".wpProQuiz_questionInput").attr("disabled","disabled"),jQuery(".wpProQuiz_questionListItem",s).each(function(o){var i=t(this),s=i.attr("data-pos");"undefined"!=typeof s&&(d[s]=e.eq(o).is(":checked"))})},sort_answer:function(){var e=s.children("li.wpProQuiz_questionListItem"),i=0;e.each(function(e,t){var o=jQuery(t).data("pos");"undefined"!=typeof o&&(d[i]=o,i++)}),!0==n&&s.sortable("destroy")},matrix_sort_answer:function(){var e=s.children();statistcAnswerData={0:-1},e.each(function(){var e=t(this),i=e.attr("data-pos"),o=e.find(".wpProQuiz_maxtrixSortCriterion"),s=o.children();s.length&&(statistcAnswerData[s.attr("data-pos")]=i),d=statistcAnswerData}),!0==n&&o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy")},free_answer:function(){var e=s.children(),i=e.find(".wpProQuiz_questionInput").val();!0==n&&e.find(".wpProQuiz_questionInput").attr("disabled","disabled"),d=i},cloze_answer:function(){d={},s.find(".wpProQuiz_cloze").each(function(e){var i=t(this),o=i.children(),s=o.eq(0),r=o.eq(1),u=a.methode.cleanupCurlyQuotes(s.val());d[e]=u,!0==n&&s.attr("disabled","disabled")})},assessment_answer:function(){correct=!0;var e=s.find(".wpProQuiz_questionInput");!0==n&&s.find(".wpProQuiz_questionInput").attr("disabled","disabled");var i=0;e.filter(":checked").each(function(){i+=parseInt(t(this).val())}),d=i},essay:function(){var e=o.find("ul.wpProQuiz_questionList").data("question_id");!0==n&&s.find(".wpProQuiz_questionEssay").attr("disabled","disabled");var i=s.find(".wpProQuiz_questionEssay").val(),t=s.find("#uploadEssayFile_"+e).val();"undefined"!=typeof i&&(d=i),"undefined"!=typeof t&&(d=t)}}[e](),{response:d}},T=new function(){var e={isEmpty:function(e){return e=t.trim(e),!e||0===e.length}},i={TEXT:0,TEXTAREA:1,NUMBER:2,CHECKBOX:3,EMAIL:4,YES_NO:5,DATE:6,SELECT:7,RADIO:8};this.checkForm=function(){var o=!0;return n.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var s=t(this),n=1==s.data("required"),d=s.data("type"),r=!0,a=t.trim(s.val());switch(d){case i.TEXT:case i.TEXTAREA:case i.SELECT:n&&(r=!e.isEmpty(a));break;case i.NUMBER:(n||!e.isEmpty(a))&&(r=!e.isEmpty(a)&&!isNaN(a));break;case i.EMAIL:(n||!e.isEmpty(a))&&(r=!e.isEmpty(a)&&new RegExp(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/).test(a));break;case i.CHECKBOX:n&&(r=s.is(":checked"));break;case i.YES_NO:case i.RADIO:n&&(r=void 0!==s.find("input[type=\"radio\"]:checked").val());break;case i.DATE:var u=0,p=0;s.find("select").each(function(){u++,p+=e.isEmpty(t(this).val())?0:1}),(n||0<p)&&(r=u==p);}r?s.siblings(".wpProQuiz_invalidate").hide():(o=!1,s.siblings(".wpProQuiz_invalidate").show())}),o},this.getFormData=function(){var e={};return n.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var o=t(this),s=o.data("form_id"),n=o.data("type");n===i.TEXT||n===i.TEXTAREA||n===i.SELECT||n===i.NUMBER||n===i.EMAIL?e[s]=o.val():n===i.CHECKBOX?e[s]=o.is(":checked")?1:0:n===i.YES_NO||n===i.RADIO?e[s]=o.find("input[type=\"radio\"]:checked").val():n===i.DATE?e[s]={day:o.find("select[name=\"wpProQuiz_field_"+s+"_day\"]").val(),month:o.find("select[name=\"wpProQuiz_field_"+s+"_month\"]").val(),year:o.find("select[name=\"wpProQuiz_field_"+s+"_year\"]").val()}:void 0}),e}},E=function(e){n.find(".wpProQuiz_questionList").each(function(){var o=t(this),s=o.data("question_id"),n=o.data("type"),d={};if("single"==n||"multiple"==n)o.find(".wpProQuiz_questionListItem").each(function(){d[t(this).attr("data-pos")]=+t(this).find(".wpProQuiz_questionInput").is(":checked")});else if("free_answer"==n)d[0]=o.find(".wpProQuiz_questionInput").val();else{if("sort_answer"==n)return!0;if("matrix_sort_answer"==n)return!0;if("cloze_answer"==n){var r=0;o.find(".wpProQuiz_cloze input").each(function(){d[r++]=t(this).val()})}else if("assessment_answer"==n)d[0]="",o.find(".wpProQuiz_questionInput:checked").each(function(){d[t(this).data("index")]=t(this).val()});else if("essay"==n)return}e[s].data=d})};a.methode={parseBitOptions:function(){if(d.bo){q.randomAnswer=d.bo&1,q.randomQuestion=d.bo&2,q.disabledAnswerMark=d.bo&4,q.checkBeforeStart=d.bo&8,q.preview=d.bo&16,q.isAddAutomatic=d.bo&64,q.reviewQustion=d.bo&128,q.quizSummeryHide=d.bo&256,q.skipButton=d.bo&512,q.autoStart=d.bo&1024,q.forcingQuestionSolve=d.bo&2048,q.hideQuestionPositionOverview=d.bo&4096,q.formActivated=d.bo&8192,q.maxShowQuestion=d.bo&16384,q.sortCategories=d.bo&32768;var e=d.bo&32;e&&jQuery.support!=null&&jQuery.support.cors!=null&&!1==jQuery.support.cors&&(q.cors=e)}},setClozeStyle:function(){n.find(".wpProQuiz_cloze input").each(function(){for(var e=t(this),o="",s=e.data("wordlen"),n=0;n<s;n++)o+="w";var d=t(document.createElement("span")).css("visibility","hidden").text(o).appendTo(t("body")),r=d.width();d.remove(),e.width(r+5)})},parseTime:function(e){var i=parseInt(e%60),t=parseInt(e/60%60),o=parseInt(e/3600%24);return i=(9<i?"":"0")+i,t=(9<t?"":"0")+t,o=(9<o?"":"0")+o,o+":"+t+":"+i},cleanupCurlyQuotes:function(e){return e=e.replace(/\u2018/,"'"),e=e.replace(/\u2019/,"'"),e=e.replace(/\u201C/,"\""),e=e.replace(/\u201D/,"\""),t.trim(e)},resetMatrix:function(e){e.each(function(){var e=t(this),i=e.find(".wpProQuiz_sortStringList");e.find(".wpProQuiz_sortStringItem").each(function(){i.append(t(this))})})},marker:function(i,e){q.disabledAnswerMark||(!0===e?i.addClass("wpProQuiz_answerCorrect"):!1===e?i.addClass("wpProQuiz_answerIncorrect"):i.addClass(e))},startQuiz:function(e){if(v.loadLock)return void(v.isQuizStart=1);if(v.isQuizStart=0,v.isLocked)return k.quizStartPage.hide(),void n.find(".wpProQuiz_lock").show();if(v.isPrerequisite)return k.quizStartPage.hide(),void n.find(".wpProQuiz_prerequisite").show();if(v.isUserStartLocked)return k.quizStartPage.hide(),void n.find(".wpProQuiz_startOnlyRegisteredUser").show();if(q.maxShowQuestion&&!e)return d.formPos!=y.START||T.checkForm()?(k.quizStartPage.hide(),n.find(".wpProQuiz_loadQuiz").show(),void a.methode.loadQuizDataAjax(!0)):void 0;if(!q.formActivated||d.formPos!=y.START||T.checkForm()){switch(a.methode.loadQuizData(),q.randomQuestion&&a.methode.random(k.questionList),q.randomAnswer&&a.methode.random(n.find(x.questionList)),q.sortCategories&&a.methode.sortCategories(),a.methode.random(n.find(".wpProQuiz_sortStringList")),n.find(".wpProQuiz_listItem").each(function(e){var i=t(this);i.find(".wpProQuiz_question_page span:eq(0)").text(e+1),i.find("> h5 span").text(e+1),i.find(".wpProQuiz_questionListItem").each(function(e){t(this).find("> span:not(.wpProQuiz_cloze)").text(e+1+". ")})}),k.next=n.find(x.next),d.mode){case 3:n.find("input[name=\"checkSingle\"]").show();break;case 2:n.find(x.check).show(),!q.skipButton&&q.reviewQustion&&n.find(x.skip).show();break;case 1:n.find("input[name=\"back\"]").slice(1).show();case 0:k.next.show();}(q.hideQuestionPositionOverview||3==d.mode)&&n.find(".wpProQuiz_question_page").hide();var o=k.next.last();w=o.val(),o.val(d.lbn);var s=k.questionList.children();if(k.listItems=n.find(".wpProQuiz_list > li"),3==d.mode)a.methode.showSinglePage(0);else{h=s.eq(0).show();var r=h.find(x.questionList).data("question_id");C.questionStart(r)}C.startQuiz(),n.find(".wpProQuiz_sortable").parents("ul").sortable({update:function(){var e=t(this).parents(".wpProQuiz_listItem");n.trigger({type:"questionSolved",values:{item:e,index:e.index(),solved:!0}})}}).disableSelection(),n.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({connectWith:".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList",placeholder:"wpProQuiz_placehold",update:function(){var e=t(this).parents(".wpProQuiz_listItem");n.trigger({type:"questionSolved",values:{item:e,index:e.index(),solved:!0}})}}).disableSelection(),m=[],I.start(),l=+new Date,u={comp:{points:0,correctQuestions:0,quizTime:0}},n.find(".wpProQuiz_questionList").each(function(){var e=t(this).data("question_id");u[e]={time:0}}),p={},t.each(i.catPoints,function(e){p[e]=0}),k.quizStartPage.hide(),n.find(".wpProQuiz_loadQuiz").hide(),k.quiz.show(),b.show(),a.methode.CookieInit(),a.methode.setupMatrixSortHeights(),3!=d.mode&&n.trigger({type:"changeQuestion",values:{item:h,index:h.index()}})}},showSingleQuestion:function(e){var i=e?Math.ceil(e/d.qpp):1;this.showSinglePage(i)},showSinglePage:function(e){if($listItem=k.questionList.children().hide(),!d.qpp)return void $listItem.show();e=e?+e:1;var i=Math.ceil(n.find(".wpProQuiz_list > li").length/d.qpp);if(!(e>i)){var t=n.find(x.singlePageLeft).hide(),o=n.find(x.singlePageRight).hide(),s=n.find("input[name=\"checkSingle\"]").hide();1<e&&t.val(t.data("text").replace(/%d/,e-1)).show(),e==i?s.show():o.val(o.data("text").replace(/%d/,e+1)).show(),z=e;var r=d.qpp*(e-1);$listItem.slice(r,r+d.qpp).show(),a.methode.scrollTo(k.quiz)}},nextQuestion:function(){a.methode.CookieProcessQuestionResponse(h),jQuery(".mejs-pause").trigger("click"),this.showQuestionObject(h.next())},prevQuestion:function(){this.showQuestionObject(h.prev())},showQuestion:function(e){var i=k.listItems.eq(e);return 3==d.mode||_?(d.qpp&&a.methode.showSingleQuestion(e+1),a.methode.scrollTo(i,1),void C.startQuiz()):void this.showQuestionObject(i)},showQuestionObject:function(e){if(!e.length&&q.forcingQuestionSolve&&q.quizSummeryHide&&q.reviewQustion){list=k.questionList.children(),null!=list&&list.each(function(){var e=t(this),i=e.find(x.questionList),o=i.data("question_id"),s=d.json[i.data("question_id")]});for(var o=0,s=n.find(".wpProQuiz_listItem").length;o<s;o++)if(!m[o])return alert(WpProQuizGlobal.questionsNotSolved),!1}if(h.hide(),h=e.show(),a.methode.scrollTo(k.quiz),n.trigger({type:"changeQuestion",values:{item:h,index:h.index()}}),!h.length)a.methode.showQuizSummary();else{var r=h.find(x.questionList).data("question_id");C.questionStart(r)}},skipQuestion:function(){n.trigger({type:"skipQuestion",values:{item:h,index:h.index()}}),a.methode.nextQuestion()},reviewQuestion:function(){n.trigger({type:"reviewQuestion",values:{item:h,index:h.index()}})},uploadFile:function(e){var i=e.currentTarget.id.replace("uploadEssaySubmit_",""),o=t("#uploadEssay_"+i)[0].files[0];if("undefined"!=typeof o){var s=t("#_uploadEssay_nonce_"+i).val(),r=t("#uploadEssaySubmit_"+i),a=t("#uploadEssayMessage_"+i);a.removeClass("uploadEssayMessage_fail"),a.removeClass("uploadEssayMessage_success"),a.html(d.essayUploading);var u=new FormData;u.append("action","learndash_upload_essay"),u.append("nonce",s),u.append("question_id",i),u.append("course_id",d.course_id),u.append("essayUpload",o),t.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:u,cache:!1,contentType:!1,processData:!1,success:function(e){if("undefined"!=typeof e.data.message&&a.html(e.data.message),!0==e.success&&"undefined"!=typeof e.data.filelink){a.addClass("uploadEssayMessage_success"),t("#uploadEssayFile_"+i).val(e.data.filelink),r.attr("disabled","disabled");var o=t("#uploadEssayFile_"+i).parents(".wpProQuiz_listItem");n.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}else a.addClass("uploadEssayMessage_fail"),r.removeAttr("disabled")}})}e.preventDefault()},showQuizSummary:function(){if(C.questionStop(),C.stopQuiz(),q.quizSummeryHide||!q.reviewQustion)return void(q.formActivated&&d.formPos==y.END?(b.hide(),k.quiz.hide(),a.methode.scrollTo(n.find(".wpProQuiz_infopage").show())):a.methode.finishQuiz());var e=n.find(".wpProQuiz_checkPage");n.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary").append(n.find(".wpProQuiz_reviewDiv .wpProQuiz_reviewQuestion").clone()),n.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary").append(n.find(".wpProQuiz_reviewDiv .wpProQuiz_reviewLegend").clone()),n.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary .wpProQuiz_reviewQuestion li").removeClass("wpProQuiz_reviewQuestionTarget"),n.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary .wpProQuiz_reviewQuestion li").click(function(){n.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary").html(""),e.hide(),k.quiz.show(),b.show(!0);var i=t(this).index();a.methode.showQuestion(i)});for(var o=0,s=0,r=m.length;s<r;s++)m[s]&&o++;e.find("span:eq(0)").text(o),b.hide(),k.quiz.hide(),e.show(),a.methode.scrollTo(e)},finishQuiz:function(e){k.next.last().attr("disabled","disabled"),n.find("input[name=\"checkSingle\"]").attr("disabled","disabled");C.questionStop(),C.stopQuiz(),I.stop();var i=(+new Date-l)/1e3;i=d.timelimit&&i>d.timelimit?d.timelimit:i,f=i,n.find(".wpProQuiz_quiz_time span").text(a.methode.parseTime(i)),e&&k.results.find(".wpProQuiz_time_limit_expired").show(),a.methode.checkQuestion(k.questionList.children(),!0)},finishQuizEnd:function(){n.find(".wpProQuiz_correct_answer").text(u.comp.correctQuestions),u.comp.result=Math.round(100*(100*(u.comp.points/d.globalPoints)))/100;var e=!1;if(t.each(u,function(){"undefined"!=typeof this.graded_status&&"not_graded"==this.graded_status&&(e=!0)}),"undefined"!=typeof certificate_details&&null!=certificate_details.certificateLink&&""!=certificate_details.certificateLink){var o=n.find(".wpProQuiz_certificate");u.comp.result>=100*certificate_details.certificate_threshold?o.show():!0==e&&"undefined"!=typeof certificate_pending&&(o.html(certificate_pending),o.show())}var s=n.find(".quiz_continue_link"),r=!1;jQuery(s).hasClass("show_quiz_continue_buttom_on_fail")&&(r=!0),"undefined"!=typeof i.passingpercentage&&0<=parseFloat(i.passingpercentage)?u.comp.result>=i.passingpercentage||r?(n.addClass("ld-quiz-result-passed"),n.removeClass("ld-quiz-result-failed"),n.trigger({type:"learndash-quiz-finished",values:{status:"passed",item:n,results:u}}),n.trigger({type:"learndash-quiz-finished-passed",values:{status:"passed",item:n,results:u}}),"undefined"!=typeof continue_details&&(n.find(".quiz_continue_link").html(continue_details),n.find(".quiz_continue_link").show())):(n.removeClass("ld-quiz-result-passed"),n.addClass("ld-quiz-result-failed"),n.trigger({type:"learndash-quiz-finished",values:{status:"failed",item:n,results:u}}),n.trigger({type:"learndash-quiz-finished-failed",values:{status:"failed",item:n,results:u}}),n.find(".quiz_continue_link").hide()):"undefined"!=typeof continue_details&&(n.find(".quiz_continue_link").html(continue_details),n.find(".quiz_continue_link").show()),$pointFields=n.find(".wpProQuiz_points span"),$gradedPointsFields=n.find(".wpProQuiz_graded_points span"),$pointFields.eq(0).text(u.comp.points),$pointFields.eq(1).text(d.globalPoints),$pointFields.eq(2).text(u.comp.result+"%"),$gradedQuestionCount=0,$gradedQuestionPoints=0,t.each(u,function(e,i){if(t.isNumeric(e)&&i.graded_id){var o=i.possiblePoints-i.points;0<o&&($gradedQuestionPoints+=o,$gradedQuestionCount++)}}),0<$gradedQuestionCount&&(t(".wpProQuiz_points").hide(),t(".wpProQuiz_graded_points").show(),$gradedPointsFields.eq(0).text(u.comp.points),$gradedPointsFields.eq(1).text(d.globalPoints),$gradedPointsFields.eq(2).text(u.comp.result+"%"),$gradedPointsFields.eq(3).text($gradedQuestionCount),$gradedPointsFields.eq(4).text($gradedQuestionPoints)),n.find(".wpProQuiz_resultsList > li").eq(a.methode.findResultIndex(u.comp.result)).show(),a.methode.setAverageResult(u.comp.result,!1),this.setCategoryOverview(),a.methode.sendCompletedQuiz(),q.isAddAutomatic&&S.isUser&&a.methode.addToplist(),b.hide(),n.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(),k.quiz.hide()},sending:function(e,t,o){k.sending.show();var s,n=k.sending.find(".sending_progress_bar");if(s=null==typeof e||null==e?parseInt(100*n.width()/n.offsetParent().width())+156:e,null==t)var t=80;null==o&&(o=1),null!=Q&&null!=typeof Q&&clearInterval(Q),Q=setInterval(function(){var e=parseInt(100*n.width()/n.offsetParent().width());e>=t&&(clearInterval(Q),100<=e&&setTimeout(a.methode.showResults(),2e3)),n.css("width",s+"%"),s+=o},300)},showResults:function(){k.sending.hide(),k.results.show(),a.methode.scrollTo(k.results)},setCategoryOverview:function(){u.comp.cats={},n.find(".wpProQuiz_catOverview li").each(function(){var e=t(this),i=e.data("category_id");if(void 0===d.catPoints[i])return e.hide(),!0;var o=Math.round(100*(100*(p[i]/d.catPoints[i])))/100;u.comp.cats[i]=o,e.find(".wpProQuiz_catPercent").text(o+"%"),e.show()})},questionSolved:function(i){m[i.values.index]=i.values.solved},sendCompletedQuiz:function(){if(!q.preview){E(u);var e=T.getFormData();jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:{action:"wp_pro_quiz_completed_quiz",course_id:d.course_id,lesson_id:d.lesson_id,topic_id:d.topic_id,quiz:d.quiz,quizId:d.quizId,results:JSON.stringify(u),timespent:f,forms:e,quiz_nonce:d.quiz_nonce},success:function(e){if(null!=e&&"undefined"!=typeof d.quizId){var i=parseInt(d.quizId);"undefined"!=typeof e[i]&&"undefined"!=typeof e[i].quiz_result_settings&&(r=e[i].quiz_result_settings,a.methode.afterSendUpdateIU(r))}a.methode.sending(null,100,15),a.methode.CookieDelete()}})}},afterSendUpdateIU:function(e){"undefined"==typeof e.showAverageResult||e.showAverageResult||n.find(".wpProQuiz_resultTable").remove(),"undefined"==typeof e.showCategoryScore||e.showCategoryScore||n.find(".wpProQuiz_catOverview").remove(),"undefined"==typeof e.showRestartQuizButton||e.showRestartQuizButton||n.find("input[name=\"restartQuiz\"]").remove(),"undefined"==typeof e.showResultPoints||e.showResultPoints||n.find(".wpProQuiz_points").remove(),"undefined"==typeof e.showResultQuizTime||e.showResultQuizTime||n.find(".wpProQuiz_quiz_time").remove(),"undefined"==typeof e.showViewQuestionButton||e.showViewQuestionButton||n.find("input[name=\"reShowQuestion\"]").remove(),"undefined"==typeof e.showContinueButton||e.showContinueButton||n.find(".quiz_continue_link").remove()},findResultIndex:function(e){for(var t,o=d.resultsGrade,s=-1,n=999999,r=0;r<o.length;r++)t=o[r],e>=t&&e-t<n&&(n=e-t,s=r);return s},showQustionList:function(){_=!_,k.toplistShowInButton.hide(),k.quiz.toggle(),n.find(".wpProQuiz_QuestionButton").hide(),k.questionList.children().show(),b.toggle(),n.find(".wpProQuiz_question_page").hide()},random:function(e){e.each(function(){var i=t(this).data("type");if(""!==i&&"sort_answer"!==i)var o=t(this).children().get().sort(function(){return Math.round(Math.random())-.5});else var o=t(this).children().get();t(o).appendTo(o[0].parentNode)})},sortCategories:function(){var i=t(".wpProQuiz_list").children().get().sort(function(e,i){var o=t(e).find(".wpProQuiz_questionList").data("question_id"),s=t(i).find(".wpProQuiz_questionList").data("question_id");return d.json[o].catId-d.json[s].catId});t(i).appendTo(i[0].parentNode)},restartQuiz:function(){k.results.hide(),k.questionList.children().hide(),k.toplistShowInButton.hide(),b.hide(),n.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color",""),n.find(".wpProQuiz_questionListItem input[type=\"text\"]").val(""),n.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"),n.find(".wpProQuiz_listItem").data("check",!1),n.find("textarea.wpProQuiz_questionEssay").val(""),n.find("input.uploadEssayFile").val(""),n.find("input.wpProQuiz_upload_essay").val(""),n.find(".wpProQuiz_response").hide().children().hide(),a.methode.resetMatrix(n.find(".wpProQuiz_listItem")),n.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"),n.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(),n.find(".wpProQuiz_question_page, input[name=\"tip\"]").show(),n.find(".wpProQuiz_certificate").attr("style","display: none !important"),k.results.find(".wpProQuiz_time_limit_expired").hide(),k.next.last().val(w),_=!1,window.location.reload(!0)},showSpinner:function(){n.find(".wpProQuiz_spinner").show()},hideSpinner:function(){n.find(".wpProQuiz_spinner").hide()},checkQuestion:function(e,i){var o=e!=null,s={};e=e==null?h:e,e.each(function(){var e=t(this),i=e.index(),o=e.find(x.questionList),n=o.data("question_id"),r=d.json[o.data("question_id")],u=r.type;return C.questionStop(),!!e.data("check")||void(("single"==r.type||"multiple"==r.type)&&(u="singleMulti"),s[n]=L(u,r,e,o,!0),s[n].question_pro_id=r.id,s[n].question_post_id=r.question_post_id,a.methode.CookieSaveResponse(n,i,r.type,s[n]))}),d.checkAnswers={list:e,responses:s,endCheck:i,finishQuiz:o},o?a.methode.sending(1,80,3):a.methode.showSpinner(),a.methode.ajax({action:"ld_adv_quiz_pro_ajax",func:"checkAnswers",data:{quizId:d.quizId,quiz:d.quiz,course_id:d.course_id,quiz_nonce:d.quiz_nonce,responses:JSON.stringify(s)}},function(e){a.methode.hideSpinner();var i=d.checkAnswers.list,o=d.checkAnswers.responses,s=d.checkAnswers.r,r=d.checkAnswers.endCheck,l=d.checkAnswers.finishQuiz;i.each(function(){var i=t(this),o=i.find(x.questionList),s=o.data("question_id");if(i.data("check"))return!0;if("undefined"!=typeof e[s]){var r=e[s];data=d.json[o.data("question_id")],i.find(".wpProQuiz_response").show(),i.find(x.check).hide(),i.find(x.skip).hide(),i.find(x.next).show(),u[data.id].points=r.p,u[data.id].p_nonce="undefined"==typeof r.p_nonce?"":r.p_nonce,u[data.id].correct=+r.c,u[data.id].data=r.s,u[data.id].a_nonce="undefined"==typeof r.a_nonce?"":r.a_nonce,u[data.id].possiblePoints=r.e.possiblePoints,jQuery.isEmptyObject(u[data.id].data)&&null!=r.e.type&&("sort_answer"==r.e.type||"matrix_sort_answer"==r.e.type)&&(u[data.id].data=r.e.r),"undefined"!=typeof r.e.graded_id&&0<r.e.graded_id&&(u[data.id].graded_id=r.e.graded_id),"undefined"!=typeof r.e.graded_status&&(u[data.id].graded_status=r.e.graded_status),u.comp.points+=r.p,i.find(".wpProQuiz_response").show(),i.find(x.check).hide(),i.find(x.skip).hide(),i.find(x.next).show(),jQuery.isEmptyObject(u[data.id].data)&&"undefined"!=typeof r.e.type&&(("sort_answer"==r.e.type||"matrix_sort_answer"==r.e.type)&&"undefined"!=typeof r.e.r&&(u[data.id].data=r.e.r),"essay"==r.e.type&&"undefined"!=typeof r.e.graded_id&&(u[data.id].data={graded_id:r.e.graded_id})),p[data.catId]+=r.p,a.methode.markCorrectIncorrect(r,i,o),r.c?("undefined"!=typeof r.e.AnswerMessage&&(i.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage),i.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")),n.trigger({type:"questionSolvedCorrect",values:{item:i,index:i.index(),solved:!0,result:r}}),i.find(".wpProQuiz_correct").show(),u.comp.correctQuestions+=1):("undefined"!=typeof r.e.AnswerMessage&&(i.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage),i.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")),n.trigger({type:"questionSolvedIncorrect",values:{item:i,index:i.index(),solved:!0,result:r}}),i.find(".wpProQuiz_incorrect").show()),i.find(".wpProQuiz_responsePoints").text(r.p),i.data("check",!0)}}),l&&a.methode.finishQuizEnd()})},markCorrectIncorrect:function(e,i,o){if("undefined"!=typeof e.e.c)switch(e.e.type){case"single":case"multiple":o.children().each(function(){var i=t(this),o=i.attr("data-pos");if(e.e.c[o]){var s=t("input.wpProQuiz_questionInput",i).is(":checked");s?a.methode.marker(i,!0):a.methode.marker(i,"wpProQuiz_answerCorrectIncomplete")}else!e.c&&e.e.r[o]&&a.methode.marker(i,!1)});break;case"free_answer":var s=o.children();e.c?a.methode.marker(s,!0):a.methode.marker(s,!1);break;case"cloze_answer":o.find(".wpProQuiz_cloze").each(function(o){var i=t(this),s=i.children(),n=s.eq(0),d=s.eq(1),r=a.methode.cleanupCurlyQuotes(n.val());e.s[o]?n.addClass("wpProQuiz_answerCorrect"):(n.addClass("wpProQuiz_answerIncorrect"),"undefined"!=typeof e.e.c[o]&&(d.html("("+e.e.c[o].join()+")"),d.show())),n.attr("disabled","disabled")});break;case"sort_answer":var n=o.children("li.wpProQuiz_questionListItem");n.each(function(o){var i=t(this);e.e.c[o]==i.attr("data-pos")?a.methode.marker(i,!0):a.methode.marker(i,!1)}),n.children().css({"box-shadow":"0 0",cursor:"auto"});var d=[];jQuery.each(e.e.c,function(e,i){d[i]=e}),n.sort(function(e,i){return d[t(e).attr("data-pos")]>d[t(i).attr("data-pos")]?1:-1}),o.append(n);break;case"matrix_sort_answer":var n=o.children(),r=[];statistcAnswerData={0:-1},n.each(function(){var o=t(this),s=o.attr("data-pos"),n=o.find(".wpProQuiz_maxtrixSortCriterion"),d=n.children(),u=d.attr("data-pos");d.length&&e.e.c[u]==o.attr("data-pos")?a.methode.marker(o,!0):a.methode.marker(o,!1),r[u]=n}),a.methode.resetMatrix(i),i.find(".wpProQuiz_sortStringItem").each(function(){var e=r[t(this).attr("data-pos")];null!=e&&e.append(this)}).css({"box-shadow":"0 0",cursor:"auto"});}},showTip:function(){var e=t(this),i=e.siblings(".wpProQuiz_question").find(x.questionList).data("question_id");e.siblings(".wpProQuiz_tipp").toggle("fast"),u[i].tip=1,t(document).bind("mouseup.tipEvent",function(i){var e=n.find(".wpProQuiz_tipp"),o=n.find("input[name=\"tip\"]");e.is(i.target)||0!=e.has(i.target).length||o.is(i.target)||(e.hide("fast"),t(document).unbind(".tipEvent"))})},ajax:function(e,i,o){o=o||"json",q.cors&&(jQuery.support.cors=!0),e.quiz===void 0&&(e.quiz=d.quiz),e.course_id===void 0&&(e.course_id=d.course_id),e.quiz_nonce===void 0&&(e.quiz_nonce=d.quiz_nonce),t.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:e,success:i,dataType:o}),q.cors&&(jQuery.support.cors=!1)},checkQuizLock:function(){v.loadLock=1,a.methode.ajax({action:"wp_pro_quiz_check_lock",quizId:d.quizId},function(e){e.lock!=null&&(v.isLocked=e.lock.is),e.prerequisite!=null&&(v.isPrerequisite=1,n.find(".wpProQuiz_prerequisite span").text(e.prerequisite)),e.startUserLock!=null&&(v.isUserStartLocked=e.startUserLock),v.loadLock=0,v.isQuizStart&&a.methode.startQuiz()})},loadQuizData:function(){a.methode.ajax({action:"wp_pro_quiz_load_quiz_data",quizId:d.quizId,quiz_nonce:d.quiz_nonce},function(e){e.toplist&&a.methode.handleToplistData(e.toplist),e.averageResult!=null&&a.methode.setAverageResult(e.averageResult,!0)})},setAverageResult:function(e,i){var t=n.find(".wpProQuiz_resultValue:eq("+(i?0:1)+") > * ");t.eq(1).text(e+"%"),t.eq(0).css("width",240*e/100+"px")},handleToplistData:function(e){var i=n.find(".wpProQuiz_addToplist"),t=i.find(".wpProQuiz_addBox").show().children("div");if(!e.canAdd)i.hide();else if(i.show(),i.find(".wpProQuiz_addToplistMessage").hide(),i.find(".wpProQuiz_toplistButton").show(),S.token=e.token,S.isUser=0,e.userId)t.hide(),S.isUser=1,q.isAddAutomatic&&i.hide();else{t.show();var o=t.children().eq(1);e.captcha?(o.find("input[name=\"wpProQuiz_captchaPrefix\"]").val(e.captcha.code),o.find(".wpProQuiz_captchaImg").attr("src",e.captcha.img),o.find("input[name=\"wpProQuiz_captcha\"]").val(""),o.show()):o.hide()}},scrollTo:function(i,e){var o=i.offset().top-100;(e||(window.pageYOffset||document.body.scrollTop)>o)&&t("html,body").animate({scrollTop:o},300)},addToplist:function(){if(!q.preview){var e=n.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(),i=n.find(".wpProQuiz_addBox").hide();a.methode.ajax({action:"wp_pro_quiz_add_toplist",quizId:d.quizId,quiz:d.quiz,quiz_nonce:d.quiz_nonce,token:S.token,name:i.find("input[name=\"wpProQuiz_toplistName\"]").val(),email:i.find("input[name=\"wpProQuiz_toplistEmail\"]").val(),captcha:i.find("input[name=\"wpProQuiz_captcha\"]").val(),prefix:i.find("input[name=\"wpProQuiz_captchaPrefix\"]").val(),results:u,timespent:f},function(t){e.text(t.text),t.clear?(i.hide(),a.methode.updateToplist()):i.show(),t.captcha&&(i.find(".wpProQuiz_captchaImg").attr("src",t.captcha.img),i.find("input[name=\"wpProQuiz_captchaPrefix\"]").val(t.captcha.code),i.find("input[name=\"wpProQuiz_captcha\"]").val(""))})}},updateToplist:function(){"function"==typeof wpProQuiz_fetchToplist&&wpProQuiz_fetchToplist()},registerSolved:function(){n.find(".wpProQuiz_questionInput[type=\"text\"]").change(function(){var e=t(this),i=e.parents(".wpProQuiz_listItem"),o=!1;""!=e.val()&&(o=!0),n.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:o}})}),n.find(".wpProQuiz_questionList[data-type=\"single\"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type=\"assessment_answer\"] .wpProQuiz_questionInput").change(function(){var e=t(this),i=e.parents(".wpProQuiz_listItem"),o=this.checked;n.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:o}})}),n.find(".wpProQuiz_cloze input").change(function(){var e=t(this),i=e.parents(".wpProQuiz_listItem"),o=!0;i.find(".wpProQuiz_cloze input").each(function(){if(""==t(this).val())return o=!1,!1}),n.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:o}})}),n.find(".wpProQuiz_questionList[data-type=\"multiple\"] .wpProQuiz_questionInput").change(function(){var e=t(this),i=e.parents(".wpProQuiz_listItem"),o=0;i.find(".wpProQuiz_questionList[data-type=\"multiple\"] .wpProQuiz_questionInput").each(function(){this.checked&&o++}),n.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!!o}})}),n.find(".wpProQuiz_questionList[data-type=\"essay\"] textarea.wpProQuiz_questionEssay").change(function(){var e=t(this),i=e.parents(".wpProQuiz_listItem"),o=!1;""!=e.val()&&(o=!0),n.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:o}})})},loadQuizDataAjax:function(e){a.methode.ajax({action:"wp_pro_quiz_admin_ajax_load_data",func:"quizLoadData",data:{quizId:d.quizId,quiz:d.quiz,quiz_nonce:d.quiz_nonce}},function(i){d.globalPoints=i.globalPoints,d.catPoints=i.catPoints,d.json=i.json,k.quiz.remove(),n.find(".wpProQuiz_quizAnker").after(i.content),t("table.wpProQuiz_toplistTable caption span.wpProQuiz_max_points").html(d.globalPoints),k={back:n.find("input[name=\"back\"]"),next:n.find(x.next),quiz:n.find(".wpProQuiz_quiz"),questionList:n.find(".wpProQuiz_list"),results:n.find(".wpProQuiz_results"),sending:n.find(".wpProQuiz_sending"),quizStartPage:n.find(".wpProQuiz_text"),timelimit:n.find(".wpProQuiz_time_limit"),toplistShowInButton:n.find(".wpProQuiz_toplistShowInButton"),listItems:t()},a.methode.initQuiz(),e&&a.methode.startQuiz(!0);var o=i.content,s=o.search("wp-audio-shortcode"),r=o.search("wp-video-shortcode");("-1"!=s||"-1"!=r)&&(t.getScript(i.site_url+"/wp-includes/js/mediaelement/mediaelement-and-player.min.js"),t.getScript(i.site_url+"/wp-includes/js/mediaelement/wp-mediaelement.js"),t("<link/>",{rel:"stylesheet",type:"text/css",href:i.site_url+"/wp-includes/js/mediaelement/mediaelementplayer.min.css"}).appendTo("head"))})},nextQuestionClicked:function(){var e=h.find(x.questionList),i=d.json[e.data("question_id")];return q.forcingQuestionSolve&&!m[h.index()]&&(q.quizSummeryHide||!q.reviewQustion)?(alert(WpProQuizGlobal.questionNotSolved),!1):void a.methode.nextQuestion()},initQuiz:function(){a.methode.setClozeStyle(),a.methode.registerSolved(),k.next.click(a.methode.nextQuestionClicked),k.back.click(function(){a.methode.prevQuestion()}),n.find(x.check).click(function(){return q.forcingQuestionSolve&&!m[h.index()]&&(q.quizSummeryHide||!q.reviewQustion)?(alert(WpProQuizGlobal.questionNotSolved),!1):void a.methode.checkQuestion()}),n.find("input[name=\"checkSingle\"]").click(function(){if(list=k.questionList.children(),null!=list&&list.each(function(){var e=t(this),i=e.find(x.questionList),o=i.data("question_id"),s=d.json[i.data("question_id")]}),q.forcingQuestionSolve&&(q.quizSummeryHide||!q.reviewQustion))for(var e=0,o=n.find(".wpProQuiz_listItem").length;e<o;e++)if(!m[e])return alert(WpProQuizGlobal.questionsNotSolved),!1;a.methode.showQuizSummary()}),n.find("input[name=\"tip\"]").click(a.methode.showTip),n.find("input[name=\"skip\"]").click(a.methode.skipQuestion),n.find("input[name=\"wpProQuiz_pageLeft\"]").click(function(){a.methode.showSinglePage(z-1),a.methode.setupMatrixSortHeights()}),n.find("input[name=\"wpProQuiz_pageRight\"]").click(function(){a.methode.showSinglePage(z+1),a.methode.setupMatrixSortHeights()}),n.find("input[id^=\"uploadEssaySubmit\"]").click(a.methode.uploadFile),n.trigger("learndash-quiz-init")},CookieInit:function(){0==d.timelimitcookie||(P="ld_"+d.quizId+"_quiz_responses",g=jQuery.cookie(P),g=""==g||null==g?{}:JSON.parse(g),a.methode.CookieSetResponses(),a.methode.CookieResponseTimer())},CookieDelete:function(){0==d.timelimitcookie||(P="ld_"+d.quizId+"_quiz_responses",jQuery.cookie(P,""))},CookieProcessQuestionResponse:function(e){null!=e&&e.each(function(){var e=t(this),i=e.index(),o=e.find(x.questionList),s=o.data("question_id"),n=d.json[o.data("question_id")],r=n.type;("single"==n.type||"multiple"==n.type)&&(r="singleMulti");var u=L(r,n,e,o,!1);a.methode.CookieSaveResponse(s,i,n.type,u)})},CookieSaveResponse:function(e,i,t,o){if(0!=d.timelimitcookie){g[e]={index:i,value:o.response,type:t};var s=new Date;s.setTime(s.getTime()+1e3*d.timelimitcookie),jQuery.cookie(P,JSON.stringify(g),{expires:s})}},CookieResponseTimer:function(){0==d.timelimitcookie||n.bind("questionSolved",function(i){a.methode.CookieProcessQuestionResponse(i.values.item)})},CookieSetResponses:function(){if(0!=d.timelimitcookie&&null!=g&&Object.keys(g).length){var e=k.questionList.children();e.each(function(){var e=t(this),i=e.find(x.questionList),s=i.data("question_id");if(null!=g[s]){var n=g[s],r=d.json[i.data("question_id")];r.type===n.type&&o(r,n.value,e,i)}})}},setupMatrixSortHeights:function(){t("li.wpProQuiz_listItem",k.questionList).each(function(e,i){var o=t(i).data("type");if("matrix_sort_answer"===o){var s=0;t("ul.wpProQuiz_sortStringList li",i).each(function(e,i){var o=t(i).outerHeight();o>s&&(s=o)}),0<s&&t("ul.wpProQuiz_sortStringList",i).css("min-height",s),t("ul.wpProQuiz_maxtrixSortCriterion",i).each(function(e,i){var o=t(i).parent("td");if("undefined"!=typeof o){var s=t(o).height();t(i).css("height",s),t(i).css("min-height",s)}})}})}},a.preInit=function(){a.methode.parseBitOptions(),b.init(),n.find("input[name=\"startQuiz\"]").click(function(){return a.methode.startQuiz(),!1}),q.checkBeforeStart&&!q.preview&&a.methode.checkQuizLock(),n.find("input[name=\"reShowQuestion\"]").click(function(){a.methode.showQustionList()}),n.find("input[name=\"restartQuiz\"]").click(function(){a.methode.restartQuiz()}),n.find("input[name=\"review\"]").click(a.methode.reviewQuestion),n.find("input[name=\"wpProQuiz_toplistAdd\"]").click(a.methode.addToplist),n.find("input[name=\"quizSummary\"]").click(a.methode.showQuizSummary),n.find("input[name=\"endQuizSummary\"]").click(function(){if(q.forcingQuestionSolve){list=k.questionList.children(),null!=list&&list.each(function(){var e=t(this),i=e.find(x.questionList),o=i.data("question_id"),s=d.json[i.data("question_id")]});for(var e=0,o=n.find(".wpProQuiz_listItem").length;e<o;e++)if(!m[e])return alert(WpProQuizGlobal.questionsNotSolved),!1}q.formActivated&&d.formPos==y.END&&!T.checkForm()||a.methode.finishQuiz()}),n.find("input[name=\"endInfopage\"]").click(function(){T.checkForm()&&a.methode.finishQuiz()}),n.find("input[name=\"showToplist\"]").click(function(){k.quiz.hide(),k.toplistShowInButton.toggle()}),n.bind("questionSolved",a.methode.questionSolved),q.maxShowQuestion||a.methode.initQuiz(),q.autoStart&&a.methode.startQuiz()},a.preInit()},t.fn.wpProQuizFront=function(e){return this.each(function(){null==t(this).data("wpProQuizFront")&&t(this).data("wpProQuizFront",new t.wpProQuizFront(this,e))})}})(jQuery);