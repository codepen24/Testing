<?php
/**
 * Copyright (c) 2015-2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (! defined('ABSPATH') ) { die(); } final class wpalm4is_l_shpjmn1 {        static function wpalm4is_r8041ifnv536() { global $i2sdk, $wpdb; $vwpalm4is_o12caohm = $_GET; wpalm4is_ecij596::wpalm4is_c5dwtgi(); $vwpalm4is_bk1j9_g6b2 = isset($vwpalm4is_o12caohm['debug']) ? true : false; $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field'); $vwpalm4is_h9kht2xub8p = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'username_field'); $vwpalm4is__u5r7dznkgp = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'default_reglink_tag'); $vwpalm4is_csowi52 = isset($vwpalm4is_o12caohm['action']) ? strtolower(trim($vwpalm4is_o12caohm['action']) ) : ''; $vwpalm4is_m7n3hs = explode(',', wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'autologin_authkeys') ); $vwpalm4is_tncqipt_ = isset($vwpalm4is_o12caohm['authkey']) ? trim($vwpalm4is_o12caohm['authkey']) : ''; $vwpalm4is_s13i75n4ph = isset($vwpalm4is_o12caohm['cid']) ? (int) trim($vwpalm4is_o12caohm['cid']) : 0; $vwpalm4is_dzqjf460 = isset($vwpalm4is_o12caohm['email']) ? strtolower(trim($vwpalm4is_o12caohm['email']) ) : ''; $vwpalm4is_pxc9q0_ah = isset($vwpalm4is_o12caohm['pid']) ? strtolower(trim($vwpalm4is_o12caohm['pid']) ) : ''; $vwpalm4is_d8zcdwxjh1 = true; $vwpalm4is_zcknyhaxs1 = false; $vwpalm4is_ylzogxqvs7d = array(); $vwpalm4is_p7m_xw = isset($vwpalm4is_o12caohm['redir']) ? $vwpalm4is_o12caohm['redir'] : site_url('/'); $vwpalm4is_p7m_xw = isset($vwpalm4is_o12caohm['redirect']) ? $vwpalm4is_o12caohm['redirect'] : $vwpalm4is_p7m_xw; $vwpalm4is_x6pmx91 = isset($vwpalm4is_o12caohm['fail_url']) ? $vwpalm4is_o12caohm['fail_url'] : site_url('/'); if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, " - Debug Mode Enabled<br>";  if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, " - Checking Authentication Keys<br>"; if (! in_array($vwpalm4is_tncqipt_, $vwpalm4is_m7n3hs) ) { if ($vwpalm4is_bk1j9_g6b2) { echo __LINE__, ' :: Invalid Authentication Key<br>'; die(); } wp_redirect(site_url('/') ); die(); }  $vwpalm4is_ylzogxqvs7d['tag'] = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'default_reglink_tag' , ''); $vwpalm4is_ylzogxqvs7d['goal'] = ''; $vwpalm4is_ylzogxqvs7d['login_post_id'] = ''; if (! empty($vwpalm4is_pxc9q0_ah) ) { $vwpalm4is_h5hmp47voj = get_option('memberium_registration_profiles'); $vwpalm4is_h5hmp47voj[$vwpalm4is_pxc9q0_ah] = array( 'login_post_id' => 0, 'tag' => '', 'goal' => '', ); if (isset($vwpalm4is_h5hmp47voj[$vwpalm4is_pxc9q0_ah]) && is_array($vwpalm4is_h5hmp47voj[$vwpalm4is_pxc9q0_ah]) ) { $vwpalm4is_ylzogxqvs7d = $vwpalm4is_h5hmp47voj[$vwpalm4is_pxc9q0_ah]; } else { if ($vwpalm4is_bk1j9_g6b2) { echo __LINE__, ' :: Invalid Profile Id<br>'; die(); } $vwpalm4is_d8zcdwxjh1 = false; } } else { } if ($vwpalm4is_d8zcdwxjh1) { if (is_user_logged_in() ) { $url = isset($_SESSION['memb_user']['login_page']) ? get_permalink($_SESSION['memb_user']['login_page']) : site_url(); if ($vwpalm4is_bk1j9_g6b2) { echo __LINE__, ' :: User Logged In<br>'; echo __LINE__, ' :: Redirecting to ', $url, '<br>'; die(); } wp_redirect($vwpalm4is_p7m_xw); exit; }  $vwpalm4is_cevdqnb5lzm = "SELECT count(*) FROM `{$wpdb->users}` WHERE `user_login` = %s OR `user_email` = %s "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dzqjf460, $vwpalm4is_dzqjf460); $vwpalm4is_lmhd98gkvxbi = (boolean) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); $vwpalm4is_d8zcdwxjh1 = ! $vwpalm4is_lmhd98gkvxbi; if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' :: User Exists ', (int) $vwpalm4is_lmhd98gkvxbi, '<br>'; if (! $vwpalm4is_d8zcdwxjh1) { wp_redirect($vwpalm4is_p7m_xw); if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' :: Redirect to ', $vwpalm4is_p7m_xw, '<br>'; die(); } }  if ($vwpalm4is_d8zcdwxjh1 && (! $vwpalm4is_lmhd98gkvxbi) ) { memberium_app()->wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph, false); $vwpalm4is_jbucldi1t7q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph, false); $vwpalm4is_d8zcdwxjh1 = is_array($vwpalm4is_jbucldi1t7q) && ! empty ($vwpalm4is_jbucldi1t7q); if ($vwpalm4is_s13i75n4ph <> $vwpalm4is_jbucldi1t7q['Id']) { if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' :: Invalid Confirmation Link<br>'; if ($vwpalm4is_bk1j9_g6b2) die(); return; } if ($vwpalm4is_d8zcdwxjh1) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] = trim($vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]); $vwpalm4is_zcknyhaxs1 = ! empty($vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]); if (! $vwpalm4is_zcknyhaxs1) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] = memberium_app()->wpalm4is_i6mowsz12gln(); $vwpalm4is_guh4pc3x = array( $vwpalm4is_urzq9h => $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h], ); memberium_app()->wpalm4is_xnfg7oiy0kwt($vwpalm4is_jbucldi1t7q); $vwpalm4is_ukra4p = $i2sdk->isdk->updateCon($vwpalm4is_s13i75n4ph, $vwpalm4is_guh4pc3x);  $vwpalm4is_tcon6xrp = memberium_app()->wpalm4is_gl1wt2xm9ea($vwpalm4is_s13i75n4ph); $vwpalm4is_n_bsw6d3x = get_userdata($vwpalm4is_tcon6xrp); $vwpalm4is_y47lrh = $vwpalm4is_n_bsw6d3x->user_login; $vwpalm4is_d8zcdwxjh1 = (boolean) $vwpalm4is_tcon6xrp; } else { if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' Password Already Exists<br>'; $vwpalm4is_d8zcdwxjh1 = false; } } } if ($vwpalm4is_d8zcdwxjh1) {  memberium_app()->wpalm4is_yp5awiqcv($vwpalm4is_ylzogxqvs7d['tag'], $vwpalm4is_s13i75n4ph);  wp_set_auth_cookie($vwpalm4is_tcon6xrp); wp_set_current_user($vwpalm4is_tcon6xrp); memberium_app()->frontend_class->wpalm4is_zo6bvgpk38es($vwpalm4is_y47lrh); do_action('wp_login', $vwpalm4is_y47lrh, $vwpalm4is_n_bsw6d3x); memberium_app()->frontend_class->wpalm4is_ly743zc($vwpalm4is_jbucldi1t7q, $vwpalm4is_tcon6xrp); memberium_app()->frontend_class->wpalm4is_vb09t6c4od8(); session_write_close(); if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' Success Redirect<br>'; if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' :: Redirect to ', $vwpalm4is_p7m_xw, '<br>'; wp_redirect($vwpalm4is_p7m_xw); exit; } else { wp_redirect($vwpalm4is_x6pmx91); if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' Failure Redirect<br>'; if ($vwpalm4is_bk1j9_g6b2) echo __LINE__, ' :: Redirect to ', site_url('/'), '<br>'; exit; } } }
