<?php
 if ( !defined( 'ABSPATH' ) ) { die(); } final class wpalm4is_pyj3gzpcnf { function wpalm4is__qafk03($vwpalm4is_s0jqewt256) { $vwpalm4is_s0jqewt256[] = 'lp_order'; return $vwpalm4is_s0jqewt256; } function wpalm4is_xvdcznt5jk($vwpalm4is_hp41oja = false) { global $wpdb; static $vwpalm4is_x39vzca7bjpw = array(); if (empty($vwpalm4is_hp41oja['memb_db_fields']['groups']) ) { return; } $vwpalm4is_tcon6xrp = isset($vwpalm4is_hp41oja['memb_user']['Id']) ? $vwpalm4is_hp41oja['memb_user']['Id'] : 0; $vwpalm4is_kiwhb_v27 = $wpdb->posts; $vwpalm4is_u49acq = $wpdb->postmeta; $vwpalm4is_cevdqnb5lzm = "SELECT ID, meta_value FROM {$vwpalm4is_kiwhb_v27}, {$vwpalm4is_u49acq} WHERE post_status = 'publish' AND post_type = 'lp_course' AND  post_id = ID AND meta_key = '_is4wp_learndash_autoenroll' AND meta_value > '' "; $vwpalm4is_uviqodtg6b = $wpdb->get_results( $vwpalm4is_cevdqnb5lzm, ARRAY_A ); if (empty($vwpalm4is_uviqodtg6b) ) { return; } $vwpalm4is_rikhlx4a = $this->wpalm4is_vo4qzmv3g9( $vwpalm4is_tcon6xrp ); foreach ( $vwpalm4is_uviqodtg6b as $vwpalm4is_sxkc2voun ) { $vwpalm4is_wikmdre = $vwpalm4is_sxkc2voun['ID']; $vwpalm4is_pwrn2p5 = in_array($vwpalm4is_wikmdre, $vwpalm4is_rikhlx4a) || in_array($vwpalm4is_wikmdre, $vwpalm4is_x39vzca7bjpw); $vwpalm4is_dz5t7g6 = trim($vwpalm4is_sxkc2voun['meta_value'], ','); if ( ! $vwpalm4is_pwrn2p5 ) { if ( wpalm4is_l9n25d::wpalm4is_vodyxmki9r($vwpalm4is_dz5t7g6, $vwpalm4is_hp41oja) ) { $this->wpalm4is_tw382ij6( $vwpalm4is_tcon6xrp, $vwpalm4is_wikmdre ); $vwpalm4is_x39vzca7bjpw[] = $vwpalm4is_wikmdre; } } } } function wpalm4is_tw382ij6($vwpalm4is_tcon6xrp, $vwpalm4is_wn5v_s4u) { if ( empty($vwpalm4is_wn5v_s4u) || empty($vwpalm4is_tcon6xrp) ) { return false; } $vwpalm4is_c92jne5c = new lp_user($vwpalm4is_tcon6xrp); $vwpalm4is_vg4wlrco = learn_press_create_order(null); $vwpalm4is_b3i5ys_4twb = $vwpalm4is_vg4wlrco->get_id(); $vwpalm4is_vg4wlrco->set_user_id($vwpalm4is_tcon6xrp); $vwpalm4is_vg4wlrco->save(); learn_press_add_order_item( $vwpalm4is_b3i5ys_4twb, $vwpalm4is_wn5v_s4u ); learn_press_update_order_status( $vwpalm4is_b3i5ys_4twb, 'lp-completed' ); $vwpalm4is_c92jne5c->enroll($vwpalm4is_wn5v_s4u, $vwpalm4is_b3i5ys_4twb); return $vwpalm4is_b3i5ys_4twb; } function wpalm4is_vo4qzmv3g9( $vwpalm4is_tcon6xrp ) { if (empty($vwpalm4is_tcon6xrp) ) { return array(); } $vwpalm4is_c92jne5c = new lp_user( $vwpalm4is_tcon6xrp ); $vwpalm4is_nr3ni9u = $vwpalm4is_c92jne5c->get_orders(); $vwpalm4is_pn2ze3wx7s5l = array(); foreach($vwpalm4is_nr3ni9u as $vwpalm4is_wn5v_s4u => $vwpalm4is_b3i5ys_4twb) { $vwpalm4is_pn2ze3wx7s5l[] = $vwpalm4is_wn5v_s4u; } return $vwpalm4is_pn2ze3wx7s5l; } function wpalm4is_o2hgbk_a($vwpalm4is_le3bry2w01, $vwpalm4is_tcon6xrp, $vwpalm4is_wn5v_s4u ) { $vwpalm4is_dz5t7g6 = get_post_meta($vwpalm4is_wn5v_s4u, '_is4wp_learndash_autoenroll', true); if (! empty($vwpalm4is_dz5t7g6) ) { $vwpalm4is_hp41oja = (isset($_SESSION['memb_user']['Id']) && $vwpalm4is_tcon6xrp == $_SESSION['memb_user']['Id']) ? $_SESSION : memberium_app()->wpalm4is_pvab9fqcm($vwpalm4is_tcon6xrp); if (isset($_SESSION['memb_db_fields']['id']) ) { $vwpalm4is_le3bry2w01 = wpalm4is_l9n25d::wpalm4is_vodyxmki9r( $vwpalm4is_dz5t7g6, $vwpalm4is_hp41oja ); } } return $vwpalm4is_le3bry2w01; } function wpalm4is_p_u2kf5woxp( $vwpalm4is_ftob15ryu862, $vwpalm4is_ukra4p, $vwpalm4is_tcon6xrp ) { $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph || ! $vwpalm4is_tcon6xrp ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_ftob15ryu862 ); if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_tcon6xrp ); } } function wpalm4is_gpj8l96m53( $vwpalm4is_e5b_2mc0fjta, $vwpalm4is_wn5v_s4u, $vwpalm4is_tcon6xrp ) { $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( $vwpalm4is_s13i75n4ph && $vwpalm4is_e5b_2mc0fjta ) { $vwpalm4is_ytu9niwpg = get_post_meta( $vwpalm4is_e5b_2mc0fjta, '_lp_passing_grade', true ); if ( $vwpalm4is_ytu9niwpg !== false ) {  $vwpalm4is_ytu9niwpg = (int) $vwpalm4is_ytu9niwpg; $vwpalm4is_c92jne5c = new LP_User( $vwpalm4is_tcon6xrp ); $vwpalm4is_ra9x1t_80o = $vwpalm4is_c92jne5c->get_quiz_results( $vwpalm4is_e5b_2mc0fjta, $vwpalm4is_wn5v_s4u ); $vwpalm4is_q613x42j = (int) $vwpalm4is_ra9x1t_80o; $vwpalm4is_jpfjctnya = ( $vwpalm4is_q613x42j >= $vwpalm4is_ytu9niwpg ); $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_e5b_2mc0fjta ); if ( $vwpalm4is_jpfjctnya ) { if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_s13i75n4ph ); } } else { if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_fail_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_fail_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_fail_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_fail_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_fail_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_fail_actions'][0], $vwpalm4is_s13i75n4ph ); } } } }  } function wpalm4is_xytp31( $vwpalm4is_wn5v_s4u, $vwpalm4is_tcon6xrp, $vwpalm4is_uc3sniyxe7 ) { $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph || ! $vwpalm4is_tcon6xrp ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_wn5v_s4u ); if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_tcon6xrp ); } } function __construct() { $this->wpalm4is_qka65vyfn(); } private function wpalm4is_qka65vyfn() { add_action('learn-press/user-course-finished', array( $this, 'wpalm4is_xytp31' ), 10, 3 );  add_action('learn-press/user-completed-lesson', array( $this, 'wpalm4is_p_u2kf5woxp' ), 10, 3 );  add_action('learn-press/user/quiz-finished', array( $this, 'learn_press_user_finish_quiz_actions_action' ), 10, 3 );  add_action('memberium_session_created', array( $this, 'wpalm4is_xvdcznt5jk' ), 10, 1 ); add_filter('learn-press/has-enrolled-course', array( $this, 'wpalm4is_o2hgbk_a' ), 10, 3 ); add_filter('memberium_unenhanced_posts', array( $this, 'wpalm4is__qafk03' ), 10, 1 ); } }
