<?php
if ( !defined( 'ABSPATH' ) ) { die(); } if ( ( ! class_exists( 'BP_Groups_Group' ) ) || ( ! class_exists( 'BP_Group_Extension' ) ) ) { return; } if ( is_admin() ) { final class wpalm4is_k89rhgtdv extends BP_Group_Extension { function __construct() { add_filter('memberium\enhanced_admin_scripts', array($this, 'wpalm4is_j_759g'), 10, 1); $vwpalm4is_g87myl0d = array( 'slug' => 'bp-groups-for-memberium', 'name' => 'BuddyPress Groups for Memberium', ); parent::init( $vwpalm4is_g87myl0d ); } function wpalm4is_j_759g($vwpalm4is_vowifea38) { $vwpalm4is_vowifea38[] = 'toplevel_page_bp-groups';  $vwpalm4is_vowifea38[] = 'buddyboss_page_bp-groups';  return $vwpalm4is_vowifea38; } function display( $vwpalm4is_d7f5y2u = null ) { $vwpalm4is_d7f5y2u = bp_get_group_id(); } function settings_screen( $vwpalm4is_d7f5y2u = null ) { if ( empty($vwpalm4is_d7f5y2u) ) { return; } $vwpalm4is__nt8p5 = groups_get_groupmeta($vwpalm4is_d7f5y2u, '_is4wp_autojoin'); $vwpalm4is__nt8p5 = empty( $vwpalm4is__nt8p5 ) ? array() : $vwpalm4is__nt8p5; $vwpalm4is__nt8p5['autojoin_admin'] = isset( $vwpalm4is__nt8p5['autojoin_admin'] ) ? $vwpalm4is__nt8p5['autojoin_admin'] : ''; $vwpalm4is__nt8p5['autojoin_moderator'] = isset( $vwpalm4is__nt8p5['autojoin_moderator'] ) ? $vwpalm4is__nt8p5['autojoin_moderator'] : ''; $vwpalm4is__nt8p5['autojoin_member'] = isset( $vwpalm4is__nt8p5['autojoin_member'] ) ? $vwpalm4is__nt8p5['autojoin_member'] : ''; $vwpalm4is__nt8p5['autoban'] = isset( $vwpalm4is__nt8p5['autoban'] ) ? $vwpalm4is__nt8p5['autoban'] : ''; echo '<label class="memberium_label">Autojoin as Admin:</label>'; echo '<input type="text" name="is4wp_autojoin_admin" value="' . $vwpalm4is__nt8p5['autojoin_admin'] . '" class="tag-selector" style="width:500px;">'; echo '<br>'; echo '<label class="memberium_label">Autojoin as Moderator:</label>'; echo '<input type="text" name="is4wp_autojoin_moderator" value="' . $vwpalm4is__nt8p5['autojoin_moderator'] . '" class="tag-selector" style="width:500px;">'; echo '<br>'; echo '<label class="memberium_label">Autojoin as Member:</label>'; echo '<input type="text" name="is4wp_autojoin_member" value="' . ( $vwpalm4is__nt8p5['autojoin_member'] > '' ? $vwpalm4is__nt8p5['autojoin_member'] : '' ) . '" class="tag-selector" style="width:500px;">'; echo '<br>'; echo '<label class="memberium_label">Auto-Ban:</label>'; echo '<input type="text" name="is4wp_autoban" value="' . ( $vwpalm4is__nt8p5['autoban'] > '' ? $vwpalm4is__nt8p5['autoban'] : '' ) . '" class="tag-selector" style="width:500px;">'; echo '<br>'; echo '<style>'; echo ' .memberium_label { display:inline-block; width:175px; margin-right: 20px; }'; echo ' .tag-selector { margin-bottom:6px; }'; echo '</style>'; $vwpalm4is_gf2m1t7v8nbz = wpalm4is_l9n25d::wpalm4is_d35w2jzaf( true ); $vwpalm4is_gf2m1t7v8nbz = $vwpalm4is_gf2m1t7v8nbz['mc']; $vwpalm4is_pos1lk = array(); foreach ( (array) $vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_agvwtn ) { $vwpalm4is_pos1lk[] = array( 'id' => $vwpalm4is_vzoj7cv_rsly, 'text' => $vwpalm4is_agvwtn . ' (' . $vwpalm4is_vzoj7cv_rsly . ')' ); } $vwpalm4is_pos1lk = json_encode( $vwpalm4is_pos1lk ); unset( $vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_agvwtn ); echo '<script>'; echo '	var taglist = ', $vwpalm4is_pos1lk, ';'; echo '</script>'; unset( $vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_pos1lk ); echo '<script> '; echo '	jQuery( document ).ready( function() { '; echo '		jQuery(".tag-selector").memb_select2({ '; echo '			placeholder: "Select the tags for this role.", '; echo '			tags: taglist '; echo '		}); '; echo '}); '; echo '</script>'; } function settings_screen_save( $vwpalm4is_d7f5y2u = NULL ) { $vwpalm4is__nt8p5 = array(); $vwpalm4is__nt8p5['autojoin_admin'] = isset( $_POST['is4wp_autojoin_admin'] ) ? $_POST['is4wp_autojoin_admin'] : ''; $vwpalm4is__nt8p5['autojoin_moderator'] = isset( $_POST['is4wp_autojoin_moderator'] ) ? $_POST['is4wp_autojoin_moderator'] : ''; $vwpalm4is__nt8p5['autojoin_member'] = isset( $_POST['is4wp_autojoin_member'] ) ? $_POST['is4wp_autojoin_member'] : ''; $vwpalm4is__nt8p5['autoban'] = isset( $_POST['is4wp_autoban'] ) ? $_POST['is4wp_autoban'] : ''; groups_update_groupmeta( $vwpalm4is_d7f5y2u, '_is4wp_autojoin', $vwpalm4is__nt8p5 ); } } } add_filter('memberium_session_filter', 'wpalm4is_tj25sv0xbip', 20, 1 ); add_shortcode('memb_buddypressgroup_grid', 'wpalm4is_hqy7624uwmt'); if ( function_exists( 'bp_register_group_extension' ) ) { bp_register_group_extension( 'wpalm4is_k89rhgtdv' ); } function wpalm4is_tj25sv0xbip($vwpalm4is_hp41oja) { if ( ! function_exists('groups_get_groups') || ! class_exists( 'BP_Groups_Group' ) ) { return $vwpalm4is_hp41oja; } $vwpalm4is_tcon6xrp = isset( $vwpalm4is_hp41oja['memb_user']['Id'] ) ? $vwpalm4is_hp41oja['memb_user']['Id'] : get_current_user_id(); if ( user_can($vwpalm4is_tcon6xrp, 'manage_options') ) { return $vwpalm4is_hp41oja; } $vwpalm4is_g87myl0d = array( 'show_hidden' => true, ); $vwpalm4is_zdbjm039 = groups_get_groups($vwpalm4is_g87myl0d); $vwpalm4is_zdbjm039 = isset($vwpalm4is_zdbjm039['groups']) ? $vwpalm4is_zdbjm039['groups'] : array(); if ( is_array($vwpalm4is_zdbjm039) ) { foreach ( $vwpalm4is_zdbjm039 as $vwpalm4is_q3w5i_ ) { $vwpalm4is__nt8p5 = groups_get_groupmeta( $vwpalm4is_q3w5i_->id, '_is4wp_autojoin' ); $vwpalm4is__nt8p5['autoban'] = isset( $vwpalm4is__nt8p5['autoban'] ) ? $vwpalm4is__nt8p5['autoban'] : ''; $vwpalm4is__nt8p5['autojoin_admin'] = isset( $vwpalm4is__nt8p5['autojoin_admin'] ) ? $vwpalm4is__nt8p5['autojoin_admin'] : ''; $vwpalm4is__nt8p5['autojoin_moderator'] = isset( $vwpalm4is__nt8p5['autojoin_moderator'] ) ? $vwpalm4is__nt8p5['autojoin_moderator'] : ''; $vwpalm4is__nt8p5['autojoin_member'] = isset( $vwpalm4is__nt8p5['autojoin_member'] ) ? $vwpalm4is__nt8p5['autojoin_member'] : ''; $vwpalm4is_o5jmp7vwa4k = groups_is_user_member( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); $vwpalm4is_zd2h4q = groups_is_user_mod( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); $vwpalm4is_h7_gj2q4w1eb = groups_is_user_admin( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); $vwpalm4is_ojit7z = false; $vwpalm4is_clqj5m = false; $vwpalm4is_j271gl0by = false; $vwpalm4is__y3bcns = ''; if ( ! empty( $vwpalm4is__nt8p5['autoban'] ) ) { if ( wpalm4is_l9n25d::wpalm4is_vodyxmki9r( $vwpalm4is__nt8p5['autoban'], $vwpalm4is_hp41oja ) ) { $vwpalm4is_clqj5m = true; } } if ( $vwpalm4is_clqj5m ) { if ( $vwpalm4is_o5jmp7vwa4k ) { $vwpalm4is_udiqsu0e = new BP_Groups_Member( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); $vwpalm4is_udiqsu0e->demote(); } $vwpalm4is_udiqsu0e = new BP_Groups_Member( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); $vwpalm4is_udiqsu0e->ban(); } else { $vwpalm4is_i02t1lhc = wpalm4is_l9n25d::wpalm4is_vodyxmki9r( $vwpalm4is__nt8p5['autojoin_admin'], $vwpalm4is_hp41oja ); $vwpalm4is_um9xnk = wpalm4is_l9n25d::wpalm4is_vodyxmki9r( $vwpalm4is__nt8p5['autojoin_moderator'], $vwpalm4is_hp41oja ); $vwpalm4is_a4rjwmlp_ = wpalm4is_l9n25d::wpalm4is_vodyxmki9r( $vwpalm4is__nt8p5['autojoin_member'], $vwpalm4is_hp41oja ); if ( ! $vwpalm4is_o5jmp7vwa4k ) { if ( $vwpalm4is_i02t1lhc || $vwpalm4is_um9xnk || $vwpalm4is_a4rjwmlp_ ) { groups_join_group( $vwpalm4is_q3w5i_->id, $vwpalm4is_tcon6xrp ); $vwpalm4is_o5jmp7vwa4k = true; } } $vwpalm4is_udiqsu0e = new BP_Groups_Member( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); if ( ! empty( $vwpalm4is__nt8p5['autojoin_moderator'] ) ) { if ( $vwpalm4is_um9xnk && ( $vwpalm4is_i02t1lhc == false ) ) { $vwpalm4is_udiqsu0e->promote( 'mod' ); $vwpalm4is_zd2h4q = true; $vwpalm4is_o5jmp7vwa4k = true; } else { if ( ! $vwpalm4is_i02t1lhc ) { $vwpalm4is_udiqsu0e->demote(); } } } if ( ! empty( $vwpalm4is__nt8p5['autojoin_admin'] ) ) { if ( $vwpalm4is_i02t1lhc ) { $vwpalm4is_udiqsu0e->promote( 'admin' ); $vwpalm4is_o5jmp7vwa4k = true; } else { if ( $vwpalm4is_h7_gj2q4w1eb && ( $vwpalm4is_um9xnk == false ) ) { $vwpalm4is_udiqsu0e->demote(); } } } if ( ! empty( $vwpalm4is__nt8p5['autojoin_member'] ) ) { if ( ! $vwpalm4is_a4rjwmlp_ ) { if ( ( $vwpalm4is_i02t1lhc == false ) && ( $vwpalm4is_um9xnk == false ) ) { BP_Groups_Member::delete( $vwpalm4is_tcon6xrp, $vwpalm4is_q3w5i_->id ); } } } } } } return $vwpalm4is_hp41oja; } function wpalm4is_hqy7624uwmt( $vwpalm4is_xnx425r3, $vwpalm4is__lstjamupz = null, $vwpalm4is_d5kqsi90y = '' ) { $vwpalm4is_vx_n8e7hdrbo = array( 'img_size' => '120', ); $vwpalm4is_xnx425r3 = shortcode_atts( $vwpalm4is_vx_n8e7hdrbo, $vwpalm4is_xnx425r3, 'memberium' ); $vwpalm4is_g87myl0d = array( 'type' => 'alphabetical', 'per_page' => 999 ); $vwpalm4is_hnw9mfuaqd = $vwpalm4is_zdbjm039 = BP_Groups_Group::get($vwpalm4is_g87myl0d); print_r( $vwpalm4is_hnw9mfuaqd ); echo '<pre>', print_r( $vwpalm4is_hnw9mfuaqd, true ), '</pre>'; }
