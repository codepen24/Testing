<?php
if ( ! defined( 'ABSPATH' ) ) { die(); } final class wpalm4is_z_hnm5d3 { private $core = null; function __construct() { add_action('admin_init', array( $this, 'wpalm4is_bdzk_tw4j' ) ); } function wpalm4is_bdzk_tw4j() { $vwpalm4is_wikmdre = isset( $_GET['post'] ) ? $_GET['post'] : 0; if ( $vwpalm4is_wikmdre == 0 ) { $vwpalm4is_wikmdre = isset( $_POST['post_ID'] ) ? $_POST['post_ID'] : 0; } if ( $vwpalm4is_wikmdre > 0 ) { $vwpalm4is_xvesxnc2dk = get_post_type( $vwpalm4is_wikmdre ); } if ( empty( $vwpalm4is_xvesxnc2dk ) ) { $vwpalm4is_xvesxnc2dk = isset( $_GET['post_type'] ) ? $_GET['post_type'] : 'post'; } $vwpalm4is_vuvbteg4 = array( 'groups', 'sfwd-courses', 'sfwd-lessons', 'sfwd-topic', 'sfwd-quiz', 'sfwd-certificates', ); if ( in_array( $vwpalm4is_xvesxnc2dk, $vwpalm4is_vuvbteg4 ) || substr( $vwpalm4is_xvesxnc2dk, 0, 5 ) == 'sfwd-' ) { add_meta_box( 'is4wp-learndash-actions', 'LearnDash Memberium Integration', array( $this, 'wpalm4is_uw9cvd' ), $vwpalm4is_xvesxnc2dk, 'side' ); } add_action('save_post', array( $this, 'wpalm4is_s3lc49ed' ) ); } function wpalm4is_uw9cvd() { global $post; $vwpalm4is_p536eja = array(); $vwpalm4is_atpg7jwfrm9 = get_post_meta( $post->ID ); $vwpalm4is_n8_9zsw4x5ch = array( '_is4wp_learndash_achievement', '_is4wp_learndash_actions', '_is4wp_learndash_assignment_approved_actions', '_is4wp_learndash_assignment_approved_tags', '_is4wp_learndash_assignment_upload_actions', '_is4wp_learndash_assignment_upload_tags', '_is4wp_learndash_autoenroll', '_is4wp_learndash_autojoin', '_is4wp_learndash_badges', '_is4wp_learndash_fail_actions', '_is4wp_learndash_fail_goals', '_is4wp_learndash_fail_tags', '_is4wp_learndash_goals', '_is4wp_learndash_orientation', '_is4wp_learndash_pdfformat', '_is4wp_learndash_redirect', '_is4wp_learndash_shortcodes', '_is4wp_learndash_tags', ); foreach( $vwpalm4is_n8_9zsw4x5ch as $vwpalm4is_x3e6m_hobj ) { if ( isset( $vwpalm4is_atpg7jwfrm9[$vwpalm4is_x3e6m_hobj][0] ) ) { $vwpalm4is_p536eja[$vwpalm4is_x3e6m_hobj] = $vwpalm4is_atpg7jwfrm9[$vwpalm4is_x3e6m_hobj][0]; } else { $vwpalm4is_p536eja[$vwpalm4is_x3e6m_hobj] = ''; } } unset( $metas, $vwpalm4is_n8_9zsw4x5ch, $vwpalm4is_x3e6m_hobj ); wp_nonce_field( MEMBERIUM_LIB, 'memberium_membershipaccess_nonce' ); if ( $post->post_type == 'sfwd-certificates' ) { echo '<p>Certificate PDF Format</p>'; echo '<label for="_is4wp_learndash_pdfformat">' . _e( "Page Size", 'memberium' ) . ':</label> '; echo '<select name="_is4wp_learndash_pdfformat" id="_is4wp_learndash_pdfformat">'; $vwpalm4is_toxk8f1q = array( '' => 'Default', 'A4_EXTRA' => 'A4 Extra', 'A4_LONG' => 'A4 Long', 'A4_SUPER' => 'A4 Super', 'A4' => 'A4', 'GOVERNMENTLETTER' => 'Government Letter', 'LETTER' => 'US Letter', 'PA4' => 'PA4', 'RA4' => 'RA4', 'SRA4' => 'SRA4', 'SUPER_A4' => 'Super A4', ); foreach( $vwpalm4is_toxk8f1q as $vwpalm4is__0jxnbcq_wvs => $vwpalm4is_gtyqfor0c8ib ) { echo '<option value="', $vwpalm4is__0jxnbcq_wvs, '" ', ( $vwpalm4is_p536eja['learndash_pdfformat'] == $vwpalm4is__0jxnbcq_wvs ? ' selected="selected" ' : '' ) , '>', $vwpalm4is_gtyqfor0c8ib, '</option>'; } unset( $vwpalm4is__0jxnbcq_wvs, $vwpalm4is_gtyqfor0c8ib ); echo '</select><br /><br />'; echo '<label for="_is4wp_learndash_orientation">' . _e( "Page Orientation", 'memberium' ) . ':</label> '; echo '<select name="_is4wp_learndash_orientation" id="_is4wp_learndash_orientation">'; $vwpalm4is_toxk8f1q = array( '' => 'Automatic', 'L' => 'Landscape', 'P' => 'Portrait', ); foreach( $vwpalm4is_toxk8f1q as $vwpalm4is__0jxnbcq_wvs => $vwpalm4is_gtyqfor0c8ib ) { echo '<option value="', $vwpalm4is__0jxnbcq_wvs, '" ', ( $vwpalm4is_p536eja['learndash_orientation'] == $vwpalm4is__0jxnbcq_wvs ? ' selected="selected" ' : '' ) , '>', $vwpalm4is_gtyqfor0c8ib, '</option>'; } echo '</select><br /><br />'; } $vwpalm4is_uh2glicj0 = array( 'sfwd-courses', 'sfwd-lessons', 'sfwd-quiz', 'sfwd-topic', ); if ( in_array( $post->post_type, $vwpalm4is_uh2glicj0 ) ) {  if ( in_array( $post->post_type, array( 'sfwd-courses', 'sfwd-courses' ) ) ) { echo '<label for="_is4wp_learndash_autoenroll">', _e( "AutoEnroll Tags", 'memberium' ), ':</label> '; echo '<input name="_is4wp_learndash_autoenroll" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_autoenroll'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_autoenroll'] : '' ), '"><br /><br />'; }  echo '<p>On completion of this section, execute the following actions:</p>'; echo '<label for="_is4wp_learndash_goals">' . _e( "Achieve these Goals", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_goals" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_goals'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_goals'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_tags">' . _e( "Apply these Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_tags" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_tags'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_tags'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_actions">' . _e( "Run this Actionset", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_actions" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; $vwpalm4is_l6ih20yjwm = memberium_app()->wpalm4is_nko9d6hy8c(); foreach ( $vwpalm4is_l6ih20yjwm as $vwpalm4is_nlh58m=>$vwpalm4is_govdmylcgq52 ) { echo '<option value="', $vwpalm4is_nlh58m, '" ', ( $vwpalm4is_p536eja['_is4wp_learndash_actions'] == $vwpalm4is_nlh58m ? ' selected="selected" ' : '' ) , '>', $vwpalm4is_govdmylcgq52, '</option>'; } unset( $vwpalm4is_nlh58m, $vwpalm4is_govdmylcgq52 ); echo '</select>'; echo '<br /><br />'; if ( $post->post_type == 'sfwd-quiz' ) { echo '<p>If the student <strong style="color:red;">fails</strong> this test, execute the following actions:</p>'; echo '<label for="_is4wp_learndash_fail_goals">' . _e( "Achieve these Goals", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_fail_goals" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_fail_goals'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_fail_goals'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_fail_tags">' . _e( "Apply these Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_fail_tags" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_fail_tags'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_fail_tags'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_fail_actions">' . _e( "Run this Actionset", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_fail_actions" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; foreach ( $vwpalm4is_l6ih20yjwm as $vwpalm4is_nlh58m=>$vwpalm4is_govdmylcgq52 ) { echo '<option value="', $vwpalm4is_nlh58m, '" ', ( $vwpalm4is_p536eja['_is4wp_learndash_fail_actions'] == $vwpalm4is_nlh58m ? ' selected="selected" ' : '' ) , '>', $vwpalm4is_govdmylcgq52, '</option>'; } echo '</select>'; } unset( $vwpalm4is_l6ih20yjwm, $vwpalm4is_nlh58m, $vwpalm4is_govdmylcgq52 );  $vwpalm4is_itbqfac = memberium_app()->wpalm4is_g8x7vls(); if ( ! empty( $vwpalm4is_itbqfac ) ) { echo '<label for="_is4wp_learndash_achievement">' . _e( "Award this Achievement", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_achievement" style="width:100%; max-width:100%">'; echo '<option value="0">(No Achievement)</option>'; foreach ( $vwpalm4is_itbqfac as $vwpalm4is_anv6qjlyohc=>$vwpalm4is_aaju8bndvpx7 ) { echo '<option value="', $vwpalm4is_anv6qjlyohc, '" ', ( $vwpalm4is_p536eja['_is4wp_learndash_achievement'] == $vwpalm4is_anv6qjlyohc ? ' selected="selected" ' : '' ) , '>', $vwpalm4is_aaju8bndvpx7, '</option>'; } unset( $vwpalm4is_anv6qjlyohc, $vwpalm4is_aaju8bndvpx7 ); echo '</select>'; echo '<br /><br />'; }  if ( in_array( $post->post_type, array( 'sfwd-courses' ) ) ) { echo '<label for="_is4wp_learndash_redirect">' . _e( "Redirect to", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_redirect" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_redirect'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_redirect'] : '' ), '"><br /><br />'; } } if ( in_array( $post->post_type, array( 'groups' ) ) ) { echo '<label for="_is4wp_learndash_autojoin">' . _e( "Group Auto-Join Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_autojoin" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwpalm4is_p536eja['_is4wp_learndash_autojoin'] > '' ? $vwpalm4is_p536eja['_is4wp_learndash_autojoin'] : '' ), '"><br /><br />'; } } function wpalm4is_s3lc49ed( $vwpalm4is_wikmdre ) {  if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) { return; }  if ( empty( $_POST['memberium_membershipaccess_nonce'] ) || ! wp_verify_nonce( $_POST['memberium_membershipaccess_nonce'], MEMBERIUM_LIB ) ) { return; } if ( ! current_user_can( 'edit_posts', $vwpalm4is_wikmdre ) ) { return; } $vwpalm4is_n8_9zsw4x5ch = array( '_is4wp_learndash_achievement', '_is4wp_learndash_actions', '_is4wp_learndash_assignment_approved_actions', '_is4wp_learndash_assignment_approved_tags', '_is4wp_learndash_assignment_upload_actions', '_is4wp_learndash_assignment_upload_tags', '_is4wp_learndash_autoenroll', '_is4wp_learndash_autojoin', '_is4wp_learndash_badges', '_is4wp_learndash_fail_actions', '_is4wp_learndash_fail_goals', '_is4wp_learndash_fail_tags', '_is4wp_learndash_goals', '_is4wp_learndash_orientation', '_is4wp_learndash_pdfformat', '_is4wp_learndash_redirect', '_is4wp_learndash_shortcodes', '_is4wp_learndash_tags', '_is4wp_lms_complete_percent', '_is4wp_lms_completed', '_is4wp_lms_grade', '_is4wp_lms_start_date', ); foreach( $vwpalm4is_n8_9zsw4x5ch as $vwpalm4is_x3e6m_hobj ) { $_POST[$vwpalm4is_x3e6m_hobj] = isset( $_POST[$vwpalm4is_x3e6m_hobj] ) ? $_POST[$vwpalm4is_x3e6m_hobj] : ''; add_post_meta( $vwpalm4is_wikmdre, $vwpalm4is_x3e6m_hobj, $_POST[$vwpalm4is_x3e6m_hobj], true ) or update_post_meta( $vwpalm4is_wikmdre, $vwpalm4is_x3e6m_hobj, $_POST[$vwpalm4is_x3e6m_hobj] ); } } }
