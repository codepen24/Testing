<?php
 if ( ! defined( 'ABSPATH' ) ) { die(); } new wpalm4is_hdbr7sgje6; final class wpalm4is_hdbr7sgje6 { private $core; private $system; function __construct() { $this->wpalm4is_qka65vyfn(); } private function wpalm4is_qka65vyfn() { add_action('init', array( $this, 'wpalm4is_pjrco3wqef' ), 200 ); add_action('learndash_course_completed', array( $this, 'wpalm4is_w7yg1cer' ), 5, 1 ); add_action('learndash_lesson_completed', array( $this, 'wpalm4is_kgic1ry' ), 5, 1 ); add_action('learndash_quiz_completed', array( $this, 'wpalm4is_hdm5f40' ), 5, 2 ); add_action('learndash_topic_completed', array( $this, 'wpalm4is_wnjltoq0_' ), 5, 1 ); add_action('template_redirect', array( $this, 'wpalm4is_e57gva' ), 901 ); add_action('wpalm4is_feu7co', array( $this, 'wpalm4is_feu7co' ) ); add_action('memberium_remove_shortcodes', array( $this, 'wpalm4is_lqca983ki' ) ); add_action('learndash_assignment_uploaded', array( $this, 'wpalm4is_hjcxb93hz' ), 10, 2 ); add_action('learndash_assignment_approved', array( $this, 'wpalm4is_ismyf06etc' ), 10, 1 ); add_filter('learndash_certificate_pdf_page_formats', array( $this, 'wpalm4is_ka20gr' ), 10 ); add_filter('learndash_content_access', array( $this, 'wpalm4is_vfipjx7lqem' ), 5, 2 ); add_filter('learndash_course_completion_url', array( $this, 'wpalm4is_xgjdmz7e2bqn' ), 5, 2 ); add_filter('sfwd_lms_has_access', array( $this, 'wpalm4is__b6phc' ), PHP_INT_MAX, 3 ); } function wpalm4is_pjrco3wqef() { } function wpalm4is__b6phc($vwpalm4is_kh9vqi_6znd, $vwpalm4is_wikmdre, $vwpalm4is_tcon6xrp) { if ( is_admin() ) { return true; } if ($vwpalm4is_kh9vqi_6znd) { $vwpalm4is_tcon6xrp = empty($vwpalm4is_tcon6xrp) ? get_current_user_id() : $vwpalm4is_tcon6xrp; $vwpalm4is_kh9vqi_6znd = memberium_app()->frontend_class->wpalm4is_soqlemn8fp( $vwpalm4is_wikmdre ); } return $vwpalm4is_kh9vqi_6znd; } function wpalm4is_pgk5q_lyx7( $vwpalm4is_mwfahr8, $vwpalm4is_sxkc2voun, $vwpalm4is_n_bsw6d3x ) { if ( ! is_a( $vwpalm4is_sxkc2voun, 'WP_Post' ) ) { return; } if ( $vwpalm4is_mwfahr8 ) { $vwpalm4is_tcon6xrp = (int) $vwpalm4is_n_bsw6d3x->ID; $vwpalm4is_wikmdre = (int) $vwpalm4is_sxkc2voun->ID; $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( $vwpalm4is_s13i75n4ph ) { $vwpalm4is_i6lx3f0 = get_post( $vwpalm4is_wikmdre, 'ARRAY_A' ); $vwpalm4is_g8frosxewt1v = get_user_meta( $vwpalm4is_tcon6xrp, '_sfwd-quizzes', true ); foreach( $vwpalm4is_g8frosxewt1v as $vwpalm4is_r7ian_ ) { if ( $vwpalm4is_r7ian_['quiz'] == $vwpalm4is_wikmdre ) { $vwpalm4is_npt4uqrc3 = false; } } } }  }    static function wpalm4is_v6cep_1($vwpalm4is_tcon6xrp = 0, $vwpalm4is_hp41oja = array() ) { global $wpdb; if ( ! function_exists( 'learndash_set_groups_users' ) ) { return; } if (user_can($vwpalm4is_tcon6xrp, 'manage_options')) { return; } $vwpalm4is_kiwhb_v27 = $wpdb->posts; $vwpalm4is_u49acq = $wpdb->postmeta; $vwpalm4is_cevdqnb5lzm = "SELECT ID, meta_value FROM {$vwpalm4is_kiwhb_v27}, {$vwpalm4is_u49acq} WHERE post_status = 'publish' AND post_type = 'groups' AND  post_id = ID AND meta_key = '_is4wp_learndash_autojoin' AND meta_value > '' "; $vwpalm4is_uviqodtg6b = $wpdb->get_results( $vwpalm4is_cevdqnb5lzm, ARRAY_A ); if ( is_array( $vwpalm4is_uviqodtg6b ) && ! empty( $vwpalm4is_uviqodtg6b ) ) { foreach ( $vwpalm4is_uviqodtg6b as $vwpalm4is_sxkc2voun ) { $vwpalm4is_c6ygm4v3o7x = false; $vwpalm4is_x3e6m_hobj = 'learndash_group_users_' . $vwpalm4is_sxkc2voun['ID']; $vwpalm4is_lub1p2x = (boolean) get_user_meta( $vwpalm4is_tcon6xrp, $vwpalm4is_x3e6m_hobj, true ); $vwpalm4is_z5o1cbtjl0 = wpalm4is_l9n25d::wpalm4is_vodyxmki9r( $vwpalm4is_sxkc2voun['meta_value'], $vwpalm4is_hp41oja ); if ( $vwpalm4is_z5o1cbtjl0 || $vwpalm4is_lub1p2x ) { $vwpalm4is_xwemosp2 = learndash_get_groups_user_ids( $vwpalm4is_sxkc2voun['ID'], true ); } if ( $vwpalm4is_z5o1cbtjl0 && ! $vwpalm4is_lub1p2x ) { $vwpalm4is_xwemosp2[] = $vwpalm4is_tcon6xrp; $vwpalm4is_c6ygm4v3o7x = true; } elseif ( ! $vwpalm4is_z5o1cbtjl0 && $vwpalm4is_lub1p2x ) { $vwpalm4is_xwemosp2 = array_diff( $vwpalm4is_xwemosp2, array( $vwpalm4is_tcon6xrp) ); $vwpalm4is_c6ygm4v3o7x = true; } if ( $vwpalm4is_c6ygm4v3o7x ) { learndash_set_groups_users( $vwpalm4is_sxkc2voun['ID'], $vwpalm4is_xwemosp2 ); } } } } static function wpalm4is_qv5d7n9kou( $vwpalm4is_tcon6xrp = 0, $vwpalm4is_hp41oja = array() ) { global $wpdb; if (! function_exists('ld_update_course_access') ) { return; } if (user_can($vwpalm4is_tcon6xrp, 'manage_options') ) { return; } $vwpalm4is_kiwhb_v27 = $wpdb->posts; $vwpalm4is_u49acq = $wpdb->postmeta; $vwpalm4is_rikhlx4a = learndash_get_user_course_access_list( $vwpalm4is_tcon6xrp );  $vwpalm4is_cevdqnb5lzm = "SELECT ID, meta_value FROM {$vwpalm4is_kiwhb_v27}, {$vwpalm4is_u49acq} WHERE post_status = 'publish' AND post_type = 'sfwd-courses' AND  post_id = ID AND meta_key = '_is4wp_learndash_autoenroll' AND meta_value > '' "; $vwpalm4is_uviqodtg6b = $wpdb->get_results( $vwpalm4is_cevdqnb5lzm, ARRAY_A ); if ( is_array( $vwpalm4is_uviqodtg6b ) ) { foreach ( $vwpalm4is_uviqodtg6b as $vwpalm4is_sxkc2voun ) { $vwpalm4is_pwrn2p5 = in_array( $vwpalm4is_sxkc2voun['ID'], $vwpalm4is_rikhlx4a ); $vwpalm4is_xtq749a_ = wpalm4is_l9n25d::wpalm4is_vodyxmki9r($vwpalm4is_sxkc2voun['meta_value'], $vwpalm4is_hp41oja); if (false && $_SERVER['REMOTE_ADDR'] == '71.92.64.210') { echo __LINE__, ' @ ', __FILE__, '<br>'; echo '<Pre>elv_user_id = ', print_r($vwpalm4is_tcon6xrp, true), '</Pre>'; echo '<Pre>elv_has_course = ', var_dump($vwpalm4is_pwrn2p5), '</Pre>'; echo '<Pre>elv_has_autoenroll_tags = ', var_dump($vwpalm4is_xtq749a_), '</Pre>'; echo '<Pre>elv_post = ', print_r($vwpalm4is_sxkc2voun, true), '</Pre>';   } if ( $vwpalm4is_xtq749a_ ) { if ( ! $vwpalm4is_pwrn2p5 ) { ld_update_course_access($vwpalm4is_tcon6xrp, $vwpalm4is_sxkc2voun['ID'], false); } } else { if ( $vwpalm4is_pwrn2p5 ) { ld_update_course_access($vwpalm4is_tcon6xrp, $vwpalm4is_sxkc2voun['ID'], true); } } } } if (false && $_SERVER['REMOTE_ADDR'] == '71.92.64.210') { echo __LINE__, ' @ ', __FILE__, '<br>'; die(); } } function wpalm4is_w7yg1cer( $vwpalm4is_n0wrho_2u ) {  $vwpalm4is_tcon6xrp = isset( $vwpalm4is_n0wrho_2u['user']->ID ) ? $vwpalm4is_n0wrho_2u['user']->ID : get_current_user_id(); $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph || ! $vwpalm4is_tcon6xrp ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_n0wrho_2u['course']->ID ); if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_tcon6xrp ); } } function wpalm4is_kgic1ry( $vwpalm4is_n0wrho_2u ) { $vwpalm4is_tcon6xrp = isset( $vwpalm4is_n0wrho_2u['user']->ID ) ? $vwpalm4is_n0wrho_2u['user']->ID : get_current_user_id(); $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph || ! $vwpalm4is_tcon6xrp ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_n0wrho_2u['lesson']->ID ); if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_tcon6xrp ); } } function wpalm4is_wnjltoq0_( $vwpalm4is_n0wrho_2u) {  $vwpalm4is_tcon6xrp = isset( $vwpalm4is_n0wrho_2u['user']->ID ) ? $vwpalm4is_n0wrho_2u['user']->ID : get_current_user_id(); $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph || ! $vwpalm4is_tcon6xrp ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_n0wrho_2u['topic']->ID ); if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_tcon6xrp ); } } function wpalm4is_hdm5f40( $vwpalm4is_n0wrho_2u, $vwpalm4is_n_bsw6d3x ) { $vwpalm4is_tcon6xrp = isset( $vwpalm4is_n_bsw6d3x->ID ) ? $vwpalm4is_n_bsw6d3x->ID : get_current_user_id(); $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( $vwpalm4is_s13i75n4ph ) { $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_n0wrho_2u['quiz']->ID ); if ( $vwpalm4is_n0wrho_2u['pass'] ) { if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_p536eja['_is4wp_learndash_achievement'][0], $vwpalm4is_s13i75n4ph ); } } else { if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_fail_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_p536eja['_is4wp_learndash_fail_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_fail_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_is4wp_learndash_fail_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_p536eja['_is4wp_learndash_fail_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_p536eja['_is4wp_learndash_fail_actions'][0], $vwpalm4is_s13i75n4ph ); } } } } function wpalm4is_feu7co() { add_shortcode( 'memb_learndash_is_completed', array( 'wpalm4is_l_u3fl', 'wpalm4is_msk0blotwj' ) ); add_shortcode( 'memb_learndash_course_enroll', array( $this, 'wpalm4is_sgje0fqp3c' ) ); add_shortcode( 'memb_learndash_course_unenroll', array( $this, 'wpalm4is_sgje0fqp3c' ) ); } function wpalm4is_lqca983ki() { remove_shortcode( 'memb_learndash_course_enroll' ); remove_shortcode( 'memb_learndash_course_unenroll' ); } function wpalm4is_e57gva() { if ( memberium_app()->frontend_class->post_type == 'sfwd-quiz' ) {   } }    function wpalm4is_vfipjx7lqem( $vwpalm4is_g97c23w, $vwpalm4is_sxkc2voun ) { if ( method_exists( memberium_app()->frontend_class, 'wpalm4is_soqlemn8fp') ) { $success = memberium_app()->frontend_class->wpalm4is_soqlemn8fp( $vwpalm4is_sxkc2voun->ID ); if ( ! $success ) { return $vwpalm4is_sxkc2voun->excerpt; } } return null; } function wpalm4is_xgjdmz7e2bqn( $vwpalm4is_x0fxvezds, $vwpalm4is_wikmdre ) { $vwpalm4is_p7m_xw = get_post_meta( $vwpalm4is_wikmdre, '_is4wp_learndash_redirect', TRUE ); if ( $vwpalm4is_p7m_xw ) { return do_shortcode( $vwpalm4is_p7m_xw ); } else { return $vwpalm4is_x0fxvezds; } } function wpalm4is_ka20gr( $vwpalm4is_itc61n3zpfd7 ) { $vwpalm4is_itc61n3zpfd7['A4_EXTRA'] = 'A4 Extra'; $vwpalm4is_itc61n3zpfd7['A4_LONG'] = 'A4 Long'; $vwpalm4is_itc61n3zpfd7['A4_SUPER'] = 'A4 Super'; $vwpalm4is_itc61n3zpfd7['COMPACT'] = 'Compact'; $vwpalm4is_itc61n3zpfd7['FOOLSCAP'] = 'Foolscap'; $vwpalm4is_itc61n3zpfd7['GLETTER'] = 'Government Letter'; $vwpalm4is_itc61n3zpfd7['GOVERNMENTLEGAL'] = 'Government Legal'; $vwpalm4is_itc61n3zpfd7['JLEGAL'] = 'Junior Legal'; $vwpalm4is_itc61n3zpfd7['LEDGER'] = 'Ledger'; $vwpalm4is_itc61n3zpfd7['LEGAL'] = 'Legal'; $vwpalm4is_itc61n3zpfd7['TABLOID'] = 'Tabloid'; return $vwpalm4is_itc61n3zpfd7; }    function wpalm4is_sgje0fqp3c( $vwpalm4is_xnx425r3, $vwpalm4is__lstjamupz = null, $vwpalm4is_d5kqsi90y = '' ) { if ( ! is_user_logged_in() ) { return; } if ( ! function_exists( 'ld_update_course_access' ) ) { return 'LearnDash not installed<br />'; } $vwpalm4is_vx_n8e7hdrbo = array( 'course_id' => 0, 'user_id' => get_current_user_id(), ); $vwpalm4is_xnx425r3 = shortcode_atts( $vwpalm4is_vx_n8e7hdrbo, $vwpalm4is_xnx425r3, 'memberium' ); $vwpalm4is_xnx425r3['course_id'] = (int) $vwpalm4is_xnx425r3['course_id']; if ( $vwpalm4is_xnx425r3['course_id'] > 0 && $vwpalm4is_xnx425r3['user_id'] > 0 ) { if ( ! get_post_status( $vwpalm4is_xnx425r3['course_id'] ) ) { return 'Invalid Course ID<br />'; } $vwpalm4is_nxgbhlfekvm = (bool) ( strtolower( trim( $vwpalm4is_d5kqsi90y ) ) == 'memb_learndash_course_unenroll' ); ld_update_course_access( $vwpalm4is_xnx425r3['user_id'], $vwpalm4is_xnx425r3['course_id'], $vwpalm4is_nxgbhlfekvm ); } } function wpalm4is_hjcxb93hz( $vwpalm4is_yc3n1aivxr = 0, $vwpalm4is_ssb9tjfd = array() ) { if ( ! $vwpalm4is_yc3n1aivxr ) { return; } $vwpalm4is_tcon6xrp = isset( $vwpalm4is_ssb9tjfd['user_id'] ) ? $vwpalm4is_ssb9tjfd['user_id'] : 0; $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph ) { return; } $vwpalm4is_wikmdre = isset( $vwpalm4is_ssb9tjfd['lesson_id'] ) ? $vwpalm4is_ssb9tjfd['lesson_id'] : 0; if ( ! $vwpalm4is_wikmdre ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_wikmdre ); if ( ! empty( $vwpalm4is_p536eja['_memberium_lms_assignment_upload_tag'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_memberium_lms_assignment_upload_tag'][0], $vwpalm4is_s13i75n4ph ); } } function wpalm4is_ismyf06etc( $vwpalm4is_mhn7dco = 0 ) { $vwpalm4is_mhn7dco = (int) $vwpalm4is_mhn7dco; if ( ! $vwpalm4is_mhn7dco ) { return; } $vwpalm4is_ssb9tjfd = get_post_meta( $vwpalm4is_mhn7dco ); $vwpalm4is_wikmdre = isset( $vwpalm4is_ssb9tjfd['lesson_id'][0] ) ? $vwpalm4is_ssb9tjfd['lesson_id'][0] : 0; $vwpalm4is_tcon6xrp = isset( $vwpalm4is_ssb9tjfd['user_id'][0] ) ? $vwpalm4is_ssb9tjfd['user_id'][0] : 0; $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4( $vwpalm4is_tcon6xrp ); if ( ! $vwpalm4is_s13i75n4ph ) { return; } $vwpalm4is_p536eja = get_post_meta( $vwpalm4is_wikmdre ); if ( ! empty( $vwpalm4is_p536eja['_memberium_lms_assignment_approval_tag'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_p536eja['_memberium_lms_assignment_approval_tag'][0], $vwpalm4is_s13i75n4ph ); } } }
