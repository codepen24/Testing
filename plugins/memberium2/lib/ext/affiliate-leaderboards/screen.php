<?php
if ( !defined( 'ABSPATH' ) ) { die(); } if ( !current_user_can( 'manage_options' ) ) { wp_die( __( 'You do not have sufficient permissions to access this page.' ) ); } global $wpdb; $vwpalm4is_h5hmp47voj = $this->leaderboard_core->wpalm4is_k9cd7zw6(); $vwpalm4is_vypo1kcl = include_once __DIR__ . '/cron.php'; $_GET['tab'] = isset( $_GET['tab'] ) ? $_GET['tab'] : 'leaderboards'; if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) { if ( isset( $_POST['create-leaderboard'] ) ) { unset( $_POST['create-leaderboard'] ); $vwpalm4is_sb8o2z_03 = $_POST; $vwpalm4is_sb8o2z_03['last_updated'] = 0; $vwpalm4is_sb8o2z_03['cache'] = array(); $vwpalm4is_h5hmp47voj[] = $vwpalm4is_sb8o2z_03; } elseif ( isset( $_POST['update-leaderboard'] ) ) { foreach( $_POST['profile'] as $vwpalm4is_x3e6m_hobj => $vwpalm4is_l4zq96h8 ) { $vwpalm4is_h5hmp47voj[$vwpalm4is_x3e6m_hobj]['slots'] = $vwpalm4is_l4zq96h8['slots']; $vwpalm4is_h5hmp47voj[$vwpalm4is_x3e6m_hobj]['start_date'] = $vwpalm4is_l4zq96h8['start_date']; $vwpalm4is_h5hmp47voj[$vwpalm4is_x3e6m_hobj]['end_date'] = $vwpalm4is_l4zq96h8['end_date']; $vwpalm4is_h5hmp47voj[$vwpalm4is_x3e6m_hobj]['last_updated'] = 0;  if ( ! empty( $vwpalm4is_l4zq96h8['delete'] ) ) { unset( $vwpalm4is_h5hmp47voj[$vwpalm4is_x3e6m_hobj] ); } } $this->leaderboard_core->wpalm4is_jrb85u36ky( $vwpalm4is_h5hmp47voj ); $vwpalm4is_vypo1kcl = require_once __DIR__ . '/cron.php'; } if ( isset( $_POST['refresh'] ) ) { $vwpalm4is_vzoj7cv_rsly = (int) $_POST['refresh']; $vwpalm4is_h5hmp47voj[$vwpalm4is_vzoj7cv_rsly] = $vwpalm4is_vypo1kcl->wpalm4is_v3n_1kapwi( $vwpalm4is_h5hmp47voj[$vwpalm4is_vzoj7cv_rsly] ); } $this->leaderboard_core->wpalm4is_jrb85u36ky( $vwpalm4is_h5hmp47voj ); } wpalm4is_yf0g75hqk184::wpalm4is_lu3h0vq(); $vwpalm4is_ux_y3jt1 = array( 'leaderboards' => '<i class="fa fa-list-ol"></i> Create Leaderboards',  'about' => '<i class="fa fa-users"></i> About', ); $vwpalm4is_q7qg9evksmf0 = isset( $_GET['tab'] ) ? strtolower( $_GET['tab'] ) : 'general'; echo '<div class="wrap">'; echo '<h2>', _( 'Affiliate Leaderboard Settings' ), '</h2>'; echo '<h2 class="nav-tab-wrapper">'; foreach ( $vwpalm4is_ux_y3jt1 as $vwpalm4is_xd_mu53v0kb => $vwpalm4is_gtyqfor0c8ib ) { $vwpalm4is_d970qtm24wc = ( $vwpalm4is_xd_mu53v0kb == $vwpalm4is_q7qg9evksmf0 ) ? ' nav-tab-active' : ''; if ( $vwpalm4is_xd_mu53v0kb == $vwpalm4is_q7qg9evksmf0 ) { echo "<span class='nav-tab$vwpalm4is_d970qtm24wc'>$vwpalm4is_gtyqfor0c8ib</span>"; } else { echo "<a class='nav-tab{$vwpalm4is_d970qtm24wc}' href='?page=", $_GET['page'], "&tab={$vwpalm4is_xd_mu53v0kb}'>{$vwpalm4is_gtyqfor0c8ib}</a>"; } } echo '</h2>'; echo '<div class="tabcontent" style="margin-top:10px;">'; $vwpalm4is_h5hmp47voj = $this->leaderboard_core->wpalm4is_k9cd7zw6(); $vwpalm4is_ssxdjp0 = memberium_app()->wpalm4is_c0kzjaiw5(); if ( $vwpalm4is_q7qg9evksmf0 == 'leaderboards' ) { if ( ! empty( $vwpalm4is_h5hmp47voj ) ) { echo '<h3>Live Leaderboards</h3>'; echo '<form method="post">'; echo '<table class="widefat">'; echo '<tr>'; echo '<td style="width:50px;">Delete</td>'; echo '<td>Name</td>'; echo '<td style="width:50px;">Type</td>'; echo '<td style="width:50px;">Slots</td>'; echo '<td style="width:75px;">Start</td>'; echo '<td style="width:75px;">End</td>'; echo '<td>Products</td>'; echo '<td style="width:75px;">&nbsp;</td>'; echo '</tr>'; foreach( $vwpalm4is_h5hmp47voj as $vwpalm4is_x3e6m_hobj => $vwpalm4is_ylzogxqvs7d ) { echo '<tr>'; echo '<td><input type="checkbox" name="profile[',$vwpalm4is_x3e6m_hobj,'][delete]" value="1"></td>'; echo '<td>', $vwpalm4is_ylzogxqvs7d['name'] ,'</td>'; echo '<td>', ucwords( $vwpalm4is_ylzogxqvs7d['type'] ) ,'</td>'; echo '<td><input type="number" style="width:50px;" value="', $vwpalm4is_ylzogxqvs7d['slots'], '" step="1" min="1" name="profile[',$vwpalm4is_x3e6m_hobj,'][slots]"></td>'; echo '<td><input type="date" value="', $vwpalm4is_ylzogxqvs7d['start_date'], '" name="profile[',$vwpalm4is_x3e6m_hobj,'][start_date]"></td>'; echo '<td><input type="date" value="', $vwpalm4is_ylzogxqvs7d['end_date'], '" name="profile[',$vwpalm4is_x3e6m_hobj,'][end_date]"></td>'; echo '<td>'; $vwpalm4is_yf3ymetwsvx = array_filter( explode( ',', $vwpalm4is_ylzogxqvs7d['products'] ) ); $vwpalm4is_biblegoq6c = ''; if ( ! empty( $vwpalm4is_yf3ymetwsvx ) ) { foreach( $vwpalm4is_yf3ymetwsvx as $vwpalm4is_vzoj7cv_rsly ) { $vwpalm4is_biblegoq6c .= $vwpalm4is_ssxdjp0[$vwpalm4is_vzoj7cv_rsly]['ProductName'] . ', '; } unset( $vwpalm4is_yf3ymetwsvx, $vwpalm4is_vzoj7cv_rsly ); } echo trim( $vwpalm4is_biblegoq6c, ', ' ); echo '</td>'; echo '<td><button name="refresh" class="button button-primary" value="', $vwpalm4is_x3e6m_hobj, '">Refresh</button></td>';  echo '</tr>'; } echo '</table>'; echo '<p><input type="submit" name="update-leaderboard" value="Update Leaderboards" class="button-primary"></p>'; echo '</form>'; } else { echo '<p>You have no affiliate leaderboards created.  Create one now!</p>'; } echo '<form method="post" id="newprofile">'; echo '<ul>'; echo '<h3>Create New Leaderboard</h3>'; $vwpalm4is_g87myl0d = array( 'id' => 'newprofile_name', 'label' => 'Profile Name', 'placeholder' => 'Enter a name for your Leaderboard here', 'required' => true, 'size' => 40, ); echo wpalm4is_yf0g75hqk184::wpalm4is_del8gz( 'name', $vwpalm4is_g87myl0d ); $vwpalm4is_itc61n3zpfd7 = array( 'leads' => 'Most Leads', 'dollars' => 'Most Sales by Dollar Amount', 'invoices' => 'Most Sales by Invoice Count', ); $vwpalm4is_g87myl0d = array( 'id' => 'newprofile_type', 'class' => 'basic-single', 'style' => 'width:250px;', ); $vwpalm4is__nt8p5 = null; echo '<li><label>Leaderboard Type</label>'; echo memberium_app()->wpalm4is_z2nabfukzdg()->wpalm4is_bh09xzn('type', $vwpalm4is_itc61n3zpfd7, $vwpalm4is__nt8p5, $vwpalm4is_g87myl0d); echo wpalm4is_yf0g75hqk184::wpalm4is_nu0flh4y2( 0000 ), '</li>'; $vwpalm4is_g87myl0d = array( 'id' => 'newprofile_slots', 'label' => 'Slots', 'placeholder' => '', 'type' => 'number', 'min' => 1, 'step' => 1, 'value' => 10, 'style' => 'width:50px;', 'required' => true, ); echo wpalm4is_yf0g75hqk184::wpalm4is_del8gz( 'slots', $vwpalm4is_g87myl0d ); $vwpalm4is_g87myl0d = array( 'id' => 'newprofile_start_date', 'label' => 'Start Date', 'placeholder' => 'mm/dd/yyyy', 'size' => 10, 'type' => 'date', 'required' => true, ); echo wpalm4is_yf0g75hqk184::wpalm4is_del8gz( 'start_date', $vwpalm4is_g87myl0d ); $vwpalm4is_g87myl0d = array( 'id' => 'newprofile_end_date', 'label' => 'End Date', 'placeholder' => 'mm/dd/yyyy', 'size' => 10, 'type' => 'date', 'required' => true, ); echo wpalm4is_yf0g75hqk184::wpalm4is_del8gz( 'end_date', $vwpalm4is_g87myl0d ); echo '<div class="filteroptions" style="display:none;">'; $vwpalm4is_g87myl0d = array( 'id' => 'newprofile_products', 'label' => 'Products', 'placeholder' => 'Select the products for your leaderboard, or leave blank for all', 'type' => 'text', 'class' => 'multiproductlistdropdown', 'style' => 'width:500px;', 'required' => false, ); echo wpalm4is_yf0g75hqk184::wpalm4is_del8gz( 'products', $vwpalm4is_g87myl0d ); echo '</div><!-- filteroptions -->'; echo '</ul>'; echo '<p><input type="submit" name="create-leaderboard" value="Create Leaderboard" class="button-primary"></p>'; echo '</form>'; echo '<hr>'; echo '</div>'; echo '</div>'; echo '<script>



	</script>';  } elseif ( $vwpalm4is_q7qg9evksmf0 == 'about' ) { echo '<h2>Memberium Affiliate Leaderboard Extension for Infusionsoft</h2>'; echo '<p>', _( 'Version' ), ' ', $this->leaderboard_core->wpalm4is_jdo0j8leua26(), '</p>'; echo '<p>Copyright &copy; 2017 David Bullock</p>'; } elseif ( $vwpalm4is_q7qg9evksmf0 == 'test' ) {  $vwpalm4is_h5hmp47voj = $this->leaderboard_core->wpalm4is_k9cd7zw6(); foreach( $vwpalm4is_h5hmp47voj as $vwpalm4is_ylzogxqvs7d ) { echo '<pre>', print_r( $vwpalm4is_ylzogxqvs7d['cache'], true ), '</pre>'; } } $vwpalm4is_km8jyvk6eq = array(); foreach( $vwpalm4is_ssxdjp0 as $vwpalm4is_rtqyexf ) { $vwpalm4is_km8jyvk6eq[] = array( 'id' => $vwpalm4is_rtqyexf['Id'], 'text' => $vwpalm4is_rtqyexf['ProductName'] . ' (' . $vwpalm4is_rtqyexf['Id'] . ')' ); } $vwpalm4is_km8jyvk6eq = json_encode( $vwpalm4is_km8jyvk6eq ); unset( $vwpalm4is_rtqyexf ); echo '<script>'; echo 'var productlist = ', $vwpalm4is_km8jyvk6eq, ';'; echo '</script>'; unset( $vwpalm4is_kpql0yokc7, $vwpalm4is_m5wd8_z7volp, $vwpalm4is_crdlw9 ); ?>
<script>
	jQuery( '#newprofile').change( function() {
		var profile_type = jQuery( '#newprofile_type' ).val();
		if ( profile_type == 'leads' ) {
			jQuery(".filteroptions").prop( 'disabled', true );
			jQuery(".filteroptions").hide();
		}
		else {
			jQuery(".filteroptions").prop( 'disabled', false );
			jQuery(".filteroptions").show();
		}
	});

</script>
