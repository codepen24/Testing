<?php
 if ( ! defined( 'ABSPATH' ) ) { die(); } final class wpalm4is_x2e4_ry { private function wpalm4is_wapit613l($vwpalm4is_tcon6xrp, $vwpalm4is_ftob15ryu862) { global $wpdb; $vwpalm4is_ftob15ryu862 = (int) $vwpalm4is_ftob15ryu862; $vwpalm4is_tcon6xrp = (int) $vwpalm4is_tcon6xrp; $vwpalm4is_cevdqnb5lzm = "SELECT `comment_ID` FROM `{$wpdb->comments}` WHERE `comment_post_ID` = {$vwpalm4is_ftob15ryu862} AND `user_id` = {$vwpalm4is_tcon6xrp} AND `comment_approved` = 'complete' AND `comment_type` = 'sensei_lesson_status';"; $vwpalm4is_yij06z3y9 = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_yij06z3y9) { $vwpalm4is_j4dmucbgze = get_comment_meta($vwpalm4is_yij06z3y9); } else { $vwpalm4is_j4dmucbgze = array(); } return $vwpalm4is_j4dmucbgze; } private function wpalm4is_mx1jyr_ku($vwpalm4is_tcon6xrp, $vwpalm4is_wn5v_s4u) { global $wpdb; $vwpalm4is_wn5v_s4u = (int) $vwpalm4is_wn5v_s4u; $vwpalm4is_tcon6xrp = (int) $vwpalm4is_tcon6xrp; $vwpalm4is_cevdqnb5lzm = "SELECT `comment_ID` FROM `{$wpdb->comments}` WHERE `comment_post_ID` = {$vwpalm4is_wn5v_s4u} AND `user_id` = {$vwpalm4is_tcon6xrp} AND `comment_approved` = 'complete' AND `comment_type` = 'sensei_course_status';"; $vwpalm4is_yij06z3y9 = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_yij06z3y9) { $vwpalm4is_j4dmucbgze = get_comment_meta($vwpalm4is_yij06z3y9); } else { $vwpalm4is_j4dmucbgze = array(); } return $vwpalm4is_j4dmucbgze; } private function wpalm4is_lu_6tep4o7($vwpalm4is_tcon6xrp, $vwpalm4is_o_6p9tyav, $vwpalm4is_vm192ewh) { $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_tcon6xrp); if (! $vwpalm4is_s13i75n4ph) { return; } if ($vwpalm4is_o_6p9tyav == 'course') { $vwpalm4is_ipr8t95xj = $this->wpalm4is_mx1jyr_ku($vwpalm4is_tcon6xrp, $vwpalm4is_vm192ewh); } elseif ($vwpalm4is_o_6p9tyav == 'lesson') { $vwpalm4is_ipr8t95xj = $this->wpalm4is_wapit613l($vwpalm4is_tcon6xrp, $vwpalm4is_vm192ewh); } else { return; } $vwpalm4is_ougfb1hd = get_post_meta($vwpalm4is_vm192ewh); if (! empty($vwpalm4is_ougfb1hd['_is4wp_lms_start_date'][0]) ) { $vwpalm4is_a0g4be2 = isset($vwpalm4is_ougfb1hd['_is4wp_lms_start_date'][0]) ? $vwpalm4is_ougfb1hd['_is4wp_lms_start_date'][0] : ''; $vwpalm4is_xv0wta4r = isset($vwpalm4is_ipr8t95xj['start'][0]) ? $vwpalm4is_ipr8t95xj['start'][0] : ''; memberium_app()->wpalm4is_tc6arszl($vwpalm4is_s13i75n4ph, $vwpalm4is_a0g4be2, $vwpalm4is_xv0wta4r); } if (! empty($vwpalm4is_ougfb1hd['_is4wp_lms_complete_percent'][0]) ) { $vwpalm4is_a0g4be2 = isset($vwpalm4is_ougfb1hd['_is4wp_lms_complete_percent'][0]) ? $vwpalm4is_ougfb1hd['_is4wp_lms_complete_percent'][0] : ''; $vwpalm4is_xv0wta4r = isset($vwpalm4is_ipr8t95xj['percent'][0]) ? $vwpalm4is_ipr8t95xj['percent'][0] : ''; memberium_app()->wpalm4is_tc6arszl($vwpalm4is_s13i75n4ph, $vwpalm4is_a0g4be2, $vwpalm4is_xv0wta4r); } if ( ! empty( $vwpalm4is_ougfb1hd['_is4wp_learndash_goals'][0] ) ) { memberium_app()->wpalm4is_jljv9kr( $vwpalm4is_ougfb1hd['_is4wp_learndash_goals'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_ougfb1hd['_is4wp_learndash_tags'][0] ) ) { memberium_app()->wpalm4is_yp5awiqcv( $vwpalm4is_ougfb1hd['_is4wp_learndash_tags'][0], $vwpalm4is_s13i75n4ph ); } if ( ! empty( $vwpalm4is_ougfb1hd['_is4wp_learndash_actions'][0] ) ) { memberium_app()->wpalm4is_soe2avpm( $vwpalm4is_ougfb1hd['_is4wp_learndash_actions'][0], $vwpalm4is_s13i75n4ph ); } if ( function_exists( 'badgeos_award_achievement_to_user' ) && ! empty( $vwpalm4is_ougfb1hd['_is4wp_learndash_achievement'][0] ) ) { badgeos_award_achievement_to_user( (int) $vwpalm4is_ougfb1hd['_is4wp_learndash_achievement'][0], $vwpalm4is_tcon6xrp ); } } private function wpalm4is_qka65vyfn() { add_action('sensei_user_lesson_end', array($this, 'wpalm4is_wxj80m'), 10, 2); add_action('sensei_user_course_end', array($this, 'wpalm4is_mr34slbah'), 10, 2); add_action('sensei_user_quiz_grade', array($this, 'wpalm4is_jdzc_aoyl'), 10, 5); } function wpalm4is_jdzc_aoyl($vwpalm4is_tcon6xrp, $vwpalm4is_e5b_2mc0fjta, $vwpalm4is_iqa4xnp6og9, $vwpalm4is_fgrd7zjs6, $vwpalm4is_lm8_r3n0) { $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_tcon6xrp); if (! $vwpalm4is_s13i75n4ph) { return; } $vwpalm4is_w4ei_9tlzfh = wp_get_post_parent_id($vwpalm4is_e5b_2mc0fjta);  $vwpalm4is_o_6p9tyav = get_post_type($vwpalm4is_w4ei_9tlzfh); if ($vwpalm4is_o_6p9tyav == 'course') { $vwpalm4is_ipr8t95xj = $this->wpalm4is_mx1jyr_ku($vwpalm4is_tcon6xrp, $vwpalm4is_w4ei_9tlzfh); } elseif ($vwpalm4is_o_6p9tyav == 'lesson') { $vwpalm4is_ipr8t95xj = $this->wpalm4is_wapit613l($vwpalm4is_tcon6xrp, $vwpalm4is_w4ei_9tlzfh); } else { return; } $vwpalm4is_ougfb1hd = get_post_meta($vwpalm4is_e5b_2mc0fjta); if ( ! empty( $vwpalm4is_ougfb1hd['_is4wp_lms_grade'][0] ) ) { $vwpalm4is_a0g4be2 = isset($vwpalm4is_ougfb1hd['_is4wp_lms_grade'][0]) ? $vwpalm4is_ougfb1hd['_is4wp_lms_grade'][0] : ''; $vwpalm4is_xv0wta4r = $vwpalm4is_iqa4xnp6og9; memberium_app()->wpalm4is_tc6arszl($vwpalm4is_s13i75n4ph, $vwpalm4is_a0g4be2, "{$vwpalm4is_xv0wta4r}"); } if (! empty($vwpalm4is_ougfb1hd['_is4wp_lms_completed'][0]) ) { $vwpalm4is_a0g4be2 = isset($vwpalm4is_ougfb1hd['_is4wp_lms_completed'][0]) ? $vwpalm4is_ougfb1hd['_is4wp_lms_completed'][0] : ''; $vwpalm4is_xv0wta4r = (int) ($vwpalm4is_iqa4xnp6og9 >= $vwpalm4is_fgrd7zjs6); memberium_app()->wpalm4is_tc6arszl( $vwpalm4is_s13i75n4ph, $vwpalm4is_a0g4be2, $vwpalm4is_xv0wta4r ); }  if (false) { echo __LINE__, ' @ ', __FUNCTION__, '<br>'; echo '<pre>elv_contact_id = ', print_r($vwpalm4is_s13i75n4ph, true), '</pre>'; echo '<pre>elv_fieldname = ', print_r($vwpalm4is_a0g4be2, true), '</pre>'; echo '<pre>elv_meta_value = ', print_r($vwpalm4is_xv0wta4r, true), '</pre>'; echo '<pre>elv_user_id = ', print_r($vwpalm4is_tcon6xrp, true), '</pre>'; echo '<pre>elv_type = ', print_r($vwpalm4is_o_6p9tyav, true), '</pre>'; echo '<pre>elv_grade = ', print_r($vwpalm4is_iqa4xnp6og9, true), '</pre>'; echo '<pre>elv_quiz_passmark = ', print_r($vwpalm4is_fgrd7zjs6, true), '</pre>'; echo '<pre>elv_quiz_grade_type = ', print_r($vwpalm4is_lm8_r3n0, true), '</pre>'; echo '<pre>elv_quiz_id = ', print_r($vwpalm4is_e5b_2mc0fjta, true), '</pre>'; echo '<pre>elv_parent_module_id = ', print_r($vwpalm4is_w4ei_9tlzfh, true), '</pre>'; echo '<pre>elv_comment_metas = ', print_r($vwpalm4is_ipr8t95xj, true), '</pre>'; echo '<pre>elv_metas = ', print_r($vwpalm4is_ougfb1hd, true), '</pre>'; die(); } } function wpalm4is_wxj80m($vwpalm4is_tcon6xrp, $vwpalm4is_ftob15ryu862) { $this->wpalm4is_lu_6tep4o7($vwpalm4is_tcon6xrp, 'lesson', $vwpalm4is_ftob15ryu862); } function wpalm4is_mr34slbah($vwpalm4is_tcon6xrp, $vwpalm4is_wn5v_s4u) { $this->wpalm4is_lu_6tep4o7($vwpalm4is_tcon6xrp, 'course', $vwpalm4is_wn5v_s4u); } function __construct() { $this->wpalm4is_qka65vyfn(); } }
