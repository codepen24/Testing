<?php
/**
 * Copyright (C) 2020 David Bullock
 * Web Power and Light, LLC
 */

 if (! defined('ABSPATH') ) { header('HTTP/1.0 403 Forbidden'); die(); } class wpalm4is_g4128ayjfu { static $instance = false; private function __construct() { add_action('memberium_session_regenerated', array($this, 'wpalm4is_n0n_7p'), 10, 2); } static function wpalm4is_zj6dhx7q1() { if (! self::$instance) { self::$instance = new wpalm4is_g4128ayjfu; } } function wpalm4is_n0n_7p($vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja) { global $wpdb; if (! $vwpalm4is_tcon6xrp ) { return; } $vwpalm4is_gf2m1t7v8nbz = isset($vwpalm4is_hp41oja['memb_user']['Groups']) ? explode(',', $vwpalm4is_hp41oja['memb_user']['Groups']) : array(); if (empty($vwpalm4is_gf2m1t7v8nbz) ) { return; }  $vwpalm4is_cevdqnb5lzm = "SELECT `gm_group_id` FROM `{$wpdb->prefix}peepso_group_members` WHERE `gm_user_id` = {$vwpalm4is_tcon6xrp}"; $vwpalm4is_zdbjm039 = implode(',', array_keys($wpdb->get_results($vwpalm4is_cevdqnb5lzm, OBJECT_K) ) ); if (! empty($vwpalm4is_zdbjm039) ) { $vwpalm4is_cevdqnb5lzm = "SELECT `post_id`, `meta_value` FROM `{$wpdb->postmeta}` WHERE `post_id` IN ( {$vwpalm4is_zdbjm039} ) AND `meta_key` = 'autojoin' AND `meta_value` > ''"; $vwpalm4is_x6tc9r_xyz = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, OBJECT_K); if (! empty($vwpalm4is_x6tc9r_xyz) ) { foreach($vwpalm4is_x6tc9r_xyz as $vwpalm4is_qwa3ebgok) { if (! in_array($vwpalm4is_qwa3ebgok->meta_value, $vwpalm4is_gf2m1t7v8nbz) ) { $peepso = new PeepSoGroupUser($vwpalm4is_qwa3ebgok->post_id, $vwpalm4is_tcon6xrp); $peepso->member_leave(); } } } }  $vwpalm4is_cevdqnb5lzm = "SELECT distinct(`gm_group_id`) FROM `{$wpdb->prefix}peepso_group_members` WHERE `gm_user_id` <> {$vwpalm4is_tcon6xrp}"; $vwpalm4is_zdbjm039 = implode(',', array_keys($wpdb->get_results($vwpalm4is_cevdqnb5lzm, OBJECT_K) ) ); if (! empty($vwpalm4is_zdbjm039) ) { $vwpalm4is_cevdqnb5lzm = "SELECT `post_id`, `meta_value` FROM `{$wpdb->postmeta}` WHERE `post_id` IN ( {$vwpalm4is_zdbjm039} ) AND `meta_key` = 'autojoin' AND `meta_value` > ''"; $vwpalm4is_x6tc9r_xyz = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, OBJECT_K); if (! empty($vwpalm4is_x6tc9r_xyz) ) { foreach($vwpalm4is_x6tc9r_xyz as $vwpalm4is_qwa3ebgok) { if (in_array($vwpalm4is_qwa3ebgok->meta_value, $vwpalm4is_gf2m1t7v8nbz) ) { $peepso = new PeepSoGroupUser($vwpalm4is_qwa3ebgok->post_id, $vwpalm4is_tcon6xrp); $peepso->member_join(); } } } } } } wpalm4is_g4128ayjfu::wpalm4is_zj6dhx7q1();
