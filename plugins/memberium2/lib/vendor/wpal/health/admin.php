<?php
/**
* Copyright (c) 2020 David J Bullock
* Web Power and Light, LLC
* https://webpowerandlight.com
* support@webpowerandlight.com
*
*/

 if (! defined('ABSPATH') ) { header('Location: /'); die(); } final class wpalm4is_n4beuaogjk { function __construct() { $this->wpalm4is_qka65vyfn(); } private function wpalm4is_qka65vyfn() { include_once(__DIR__ . '/healthcheck.php'); add_action('admin_notices', array('wpalm4is_v4_qc3mv', 'wpalm4is_tk34_98dyh') ); add_filter('site_status_tests', array($this, 'wpalm4is_d81p7h'), 1); } function wpalm4is_d81p7h($vwpalm4is_lrdkwml9u_) { $vwpalm4is_lrdkwml9u_['direct']['wpal/memberium/memory'] = array( 'label' => 'Memory Allocation', 'test' => array(__CLASS__, 'wpalm4is_miqn3p4f6m9'), ); $vwpalm4is_lrdkwml9u_['direct']['wpal/memberium/caching'] = array( 'label' => 'Caching Plugins', 'test' => array(__CLASS__, 'wpalm4is_j16q24za'), ); $vwpalm4is_lrdkwml9u_['direct']['wpal/memberium/cloudflare'] = array( 'label' => 'Cloudflare', 'test' => array(__CLASS__, 'wpalm4is_kcz5e6gf'), ); $vwpalm4is_lrdkwml9u_['direct']['wpal/memberium/licenseserver'] = array( 'label' => 'Memberium License Seserver', 'test' => array(__CLASS__, 'wpalm4is_j2wsx45gj'), ); return $vwpalm4is_lrdkwml9u_; } static function wpalm4is_j16q24za() { $vwpalm4is_ukra4p = array( 'label' => 'No Page Caching Plugins Found', 'status' => 'good', 'badge' => array( 'label' => __( 'Security' ), 'color' => 'green', ), 'description' => '', 'actions' => '', 'test' => 'wpal_healthcheck_caching', ); if (function_exists('wpsc_init')) { $vwpalm4is_ukra4p['label'] = 'Page Caching Plugins Found'; $vwpalm4is_ukra4p['status'] = 'critical'; $vwpalm4is_ukra4p['badge']['color'] = 'red'; $vwpalm4is_ukra4p['description'] .= '<p>WP Super Cache is installed and active.</p>'; } if (defined('W3TC')) { $vwpalm4is_ukra4p['label'] = 'Page Caching Plugins Found'; $vwpalm4is_ukra4p['status'] = 'critical'; $vwpalm4is_ukra4p['badge']['color'] = 'red'; $vwpalm4is_ukra4p['description'] .= '<p>W3 Total Cache is installed and active.</p>p>'; } if (defined('WP_ROCKET_VERSION') ) { $vwpalm4is_ukra4p['label'] = 'Page Caching Plugins Found'; $vwpalm4is_ukra4p['status'] = 'critical'; $vwpalm4is_ukra4p['badge']['color'] = 'red'; $vwpalm4is_ukra4p['description'] .= '<p>WP Rocket is installed and active.</p>'; } if (empty($vwpalm4is_ukra4p['description'])) { $vwpalm4is_ukra4p['description'] = '<p>No caching plugin conflicts detected.<br />Installing Caching plugins can cause data corruption and security issues.</p>'; } else { $vwpalm4is_ukra4p['description'] .= '<p>Running caching plugins with your membership site can cause corruption and security problems.  To fix this problem, disable your caching plugins.</p>'; } return $vwpalm4is_ukra4p; } static function wpalm4is_miqn3p4f6m9() { $vwpalm4is_ukra4p = array( 'label' => 'Sufficient Memory Allocated', 'status' => 'good', 'badge' => array( 'label' => __( 'Performance' ), 'color' => 'green', ), 'description' => '', 'actions' => '', 'test' => 'wpal_healthcheck_memory', ); $vwpalm4is_ruhnw63r = wp_convert_hr_to_bytes(WP_MEMORY_LIMIT); if ($vwpalm4is_ruhnw63r <= 41943040) { $vwpalm4is_vxv5ahjbq = WP_MEMORY_LIMIT; $vwpalm4is_pl2e5v7_ = "<p>Your site is configured with a memory limit of {$vwpalm4is_vxv5ahjbq}<br />" . 'You can increase your WordPress memory limit by adding or updating the following line in your wp-config.php:<br />' . "<code>define('WP_MEMORY_LIMIT', '64M');</code><br />" . 'For sites with many or complex plugins or themes, you may want to set it to 96M, 128M, 160M or more.</p>'; $vwpalm4is_ukra4p['label'] = 'Insufficient memory allocated'; $vwpalm4is_ukra4p['status'] = 'recommended'; $vwpalm4is_ukra4p['badge']['color'] = 'orange'; $vwpalm4is_ukra4p['description'] = $vwpalm4is_pl2e5v7_; } else { $vwpalm4is_ukra4p['status'] = 'good'; $vwpalm4is_ukra4p['description'] = '<p>Foo</p>'; } return $vwpalm4is_ukra4p; } static function wpalm4is_kcz5e6gf() { $vwpalm4is_ukra4p = array( 'label' => 'No Proxies detected', 'status' => 'good', 'badge' => array('label' => __( 'Performance' ), 'color' => 'green'), 'description' => 'No web proxies were detected.  Web Proxies like Cloudflare and Securi are services to secure and speed up your website, however they may interfere with HTTP POSTs coming from Infusionsoft/Keap.', 'actions' => '', 'test' => 'wpal_healthcheck_cloudflare', ); if (! empty($_SERVER['HTTP_CF_RAY']) ) { $vwpalm4is_pl2e5v7_ = '<p>Memberium has detected that you are using CloudFlare.  We recommend reviewing your CloudFlare configuration to ensure that page caching is disabled.</p>'; $vwpalm4is_ukra4p['label'] = 'CloudFlare Detected'; $vwpalm4is_ukra4p['status'] = 'recommended'; $vwpalm4is_ukra4p['badge']['color'] = 'orange'; $vwpalm4is_ukra4p['description'] = $vwpalm4is_pl2e5v7_; } return $vwpalm4is_ukra4p; } static function wpalm4is_j2wsx45gj() {  $vwpalm4is_ukra4p = array( 'label' => 'Can Communicate with Memberium License Server', 'status' => 'good', 'badge' => array('label' => __( 'Memberium' ), 'color' => 'green'), 'description' => 'Your connection to the license server appears to be working properly.', 'actions' => '', 'test' => 'wpal_healthcheck_hostblocking', ); if (defined('WP_HTTP_BLOCK_EXTERNAL') && constant('WP_HTTP_BLOCK_EXTERNAL') == 1) { $vwpalm4is_dp12sk3u = defined('WP_ACCESSIBLE_HOSTS') ? strtolower(constant('WP_ACCESSIBLE_HOSTS') ) : ''; $vwpalm4is_otnom59c = array_filter(explode(',', $vwpalm4is_dp12sk3u) ); $vwpalm4is_otnom59c = array_filter($vwpalm4is_otnom59c); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is__mgjnuabrzvx = array( 'licenseserver.webpowerandlight.com', "{$vwpalm4is_dd4j20qwmn_}.infusionsoft.com" ); foreach($vwpalm4is__mgjnuabrzvx as $k => $vwpalm4is_x1folrs) { if (in_array($vwpalm4is_x1folrs, $vwpalm4is_otnom59c) ) { unset($vwpalm4is__mgjnuabrzvx[$k]); } } if (! empty($vwpalm4is__mgjnuabrzvx) ) { $vwpalm4is_ifcsd5 = trim($vwpalm4is_dp12sk3u . "," . implode(',', $vwpalm4is__mgjnuabrzvx), ','); $vwpalm4is_d970qtm24wc = 'notice notice-error'; $vwpalm4is_pl2e5v7_ = '<h3>External Hosts Blocked</h3>' . '<p>Memberium has detected that you are blocking access to external hosts, through your wp-config.php file.' . 'You will either need to remove the <strong>WP_HTTP_BLOCK_EXTERNAL</strong> setting, or add our hosts to the <strong>WP_ACCESSIBLE_HOSTS</strong> setting.' . 'Leaving this problem unaddressed will cause your plugin to stop working.</p>' . "<p style='font-family:\"courier new\",monospace;font-size:120%;'>define('WP_ACCESSIBLE_HOSTS', '" . $vwpalm4is_ifcsd5 . "');</p>" . '<p>If you would like assistance, please contact <a target="_blank" href="https://memberium.com/support/">Memberium Support.</a></p>'; $vwpalm4is_ukra4p['label'] = 'Memberium License Server is blocked'; $vwpalm4is_ukra4p['status'] = 'critical'; $vwpalm4is_ukra4p['badge']['color'] = 'red'; $vwpalm4is_ukra4p['description'] = $vwpalm4is_pl2e5v7_; } } return $vwpalm4is_ukra4p; }   }
