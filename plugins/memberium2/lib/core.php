<?php
/**
* Copyright (c) 2012-2020 David J Bullock
* Web Power and Light, LLC
* https://webpowerandlight.com
* support@webpowerandlight.com
*
*/

 if (!defined('ABSPATH') ) { die(); } final class wpalm4is_l9n25d {    function wpalm4is_zktb2lnm() { return MEMBERIUM_VERSION; } function wpalm4is_ymna7ce() { return MEMBERIUM_NESTING_LEVELS; } function wpalm4is_kcbqzm4_jw() { return 'https://licenseserver.webpowerandlight.com/memberium-is/current-version.php'; } function wpalm4is_zh492zb() { return $this->doing_http_post; } function wpalm4is_rdizb9uhqm($vwpalm4is_wkzcwa_hvu3) { $this->doing_http_post = (bool) $vwpalm4is_wkzcwa_hvu3; } function wpalm4is_yglaxnp9hw() { return $this->contact_id; } function wpalm4is_njoelpf8m6($vwpalm4is_s13i75n4ph) { $this->contact_id = $vwpalm4is_s13i75n4ph; } function wpalm4is_yjzkfc_npqw() { return wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } function wpalm4is_f9gafxo($vwpalm4is_deb8k5lj7 = true) { $this->sso_mode = (boolean) $vwpalm4is_deb8k5lj7; } function wpalm4is_ar8oqzi3() { return (bool) $this->sso_mode; }       function wpalm4is_mq3c0xpjilw($vwpalm4is_kzbf_tguy6h) { if (is_array($vwpalm4is_kzbf_tguy6h) && ! empty($vwpalm4is_kzbf_tguy6h) ) { global $wpdb; $vwpalm4is_q4zflay = implode(',', $vwpalm4is_kzbf_tguy6h); $vwpalm4is_cevdqnb5lzm = "SELECT user_id FROM {$wpdb->usermeta} WHERE user_id IN (" . $vwpalm4is_q4zflay . ") AND `meta_key` = 'memberium_optout' AND `meta_value` = 1; "; $vwpalm4is_k4yn7ue3tp = $wpdb->get_col($vwpalm4is_cevdqnb5lzm); $vwpalm4is_kzbf_tguy6h = array_diff($vwpalm4is_kzbf_tguy6h, $vwpalm4is_k4yn7ue3tp); } return $vwpalm4is_kzbf_tguy6h; }    function wpalm4is_sygjmvhabs($vwpalm4is_njtdr8ob) { $vwpalm4is_njtdr8ob['3min'] = array( 'interval' => 3 * 60, 'display' => __('Every 3 minutes') ); $vwpalm4is_njtdr8ob['5min'] = array( 'interval' => 5 * 60, 'display' => __('Every 5 minutes') ); $vwpalm4is_njtdr8ob['20min'] = array( 'interval' =>20 * 60, 'display' => __('Every 20 minutes') ); $vwpalm4is_njtdr8ob['30min'] = array( 'interval' => 30 * 60, 'display' => __('Every 30 minutes') ); return $vwpalm4is_njtdr8ob; }    function wpalm4is_o9ntmc($vwpalm4is_sf9tqcp3, $vwpalm4is_d4ns2m5, $vwpalm4is_flvc1386hwoj) { $vwpalm4is_p2lo457zj = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'login_url'); if ($vwpalm4is_p2lo457zj < 1) { if (! empty($vwpalm4is_d4ns2m5) ) { $vwpalm4is_sf9tqcp3 = add_query_arg('redirect_to', $vwpalm4is_d4ns2m5, $vwpalm4is_sf9tqcp3); } } else { $vwpalm4is_un81i7cstd = get_permalink($vwpalm4is_p2lo457zj); if (! empty($vwpalm4is_un81i7cstd) ) { if (! empty($vwpalm4is_d4ns2m5) ) { $vwpalm4is_sf9tqcp3 = add_query_arg('redirect_to', $vwpalm4is_d4ns2m5, $vwpalm4is_un81i7cstd); } } } return $vwpalm4is_sf9tqcp3; } function wpalm4is_fir1sj75xgfb($null, $vwpalm4is_tcon6xrp, $vwpalm4is_his8tep21wxu, $vwpalm4is_xv0wta4r, $vwpalm4is_lenj1chv) { if ($vwpalm4is_xv0wta4r == $vwpalm4is_lenj1chv) { return null; } if ( ! wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'sync_meta_updates') ) { return null; } $vwpalm4is_ubwq9j = wpalm4is_l9n25d::wpalm4is_s2ozcmt(); $vwpalm4is_ubwq9j = apply_filters('memberium_user_meta_map', $vwpalm4is_ubwq9j); if (empty($vwpalm4is_ubwq9j[$vwpalm4is_his8tep21wxu]) ) { return null; } $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_tcon6xrp); if (! $vwpalm4is_s13i75n4ph) { return null; } global $wpdb; $vwpalm4is_tys40r2 = get_user_meta($vwpalm4is_tcon6xrp, $vwpalm4is_his8tep21wxu, true); if ($vwpalm4is_tys40r2 == $vwpalm4is_xv0wta4r) { return null; } $vwpalm4is_a0g4be2 = $vwpalm4is_ubwq9j[$vwpalm4is_his8tep21wxu]; $this->wpalm4is_wvcz6opb($vwpalm4is_a0g4be2, $vwpalm4is_xv0wta4r, $vwpalm4is_s13i75n4ph);  return null;  }    function wpalm4is_l3hivgo2($vwpalm4is_znwr7yg80f, $vwpalm4is_c2fjsrxiy, $vwpalm4is_his8tep21wxu, $vwpalm4is_xv0wta4r, $vwpalm4is_gmwyxnigb = '') { global $wpdb; if ($vwpalm4is_gmwyxnigb == $vwpalm4is_xv0wta4r) { return; } if ($this->doing_user_update) { return; } if (substr($vwpalm4is_his8tep21wxu, 0, 5) <> 'memb_') { return; } $vwpalm4is_s13i75n4ph = (int) wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_c2fjsrxiy); if ($vwpalm4is_s13i75n4ph < 1) { return; }  $vwpalm4is_ysh56ury = array( 'CreatedBy', 'DateCreated', 'Groups', 'Id', 'LastUpdated', 'LastUpdatedBy', 'Validated', ); foreach($vwpalm4is_ysh56ury as $vwpalm4is_a0g4be2) { if ($vwpalm4is_his8tep21wxu == ('memb_' . $vwpalm4is_a0g4be2) ) { return; } } $vwpalm4is_a0g4be2 = substr($vwpalm4is_his8tep21wxu, 5); $vwpalm4is_pp2g10 = strtolower($vwpalm4is_a0g4be2); $vwpalm4is_xv0wta4r = trim($vwpalm4is_xv0wta4r); if ( get_current_user_id() == $vwpalm4is_c2fjsrxiy) { if (wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr($vwpalm4is_pp2g10) == $vwpalm4is_xv0wta4r) { return; } $vwpalm4is_x4n781w3pmu6 = true; } else { $vwpalm4is_x4n781w3pmu6 = false; }  if ($vwpalm4is_x4n781w3pmu6) { wpalm4is_xamhc3q6o::wpalm4is_n8bsagjurz5y($vwpalm4is_pp2g10, $vwpalm4is_xv0wta4r); if ($vwpalm4is_his8tep21wxu == 'memb_' . wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field') ) { $this->wpalm4is_mel79kz2sa($vwpalm4is_xv0wta4r); } $this->dirty_contacts[$vwpalm4is_s13i75n4ph][$vwpalm4is_a0g4be2] = $vwpalm4is_xv0wta4r; }  $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = 'INSERT INTO `' . MEMBERIUM_DB_CONTACTS . '` (`id`, `appname`, `fieldname`, `value`) VALUES (%d, %s, %s, %s) ON DUPLICATE KEY UPDATE `value` = %s;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_a0g4be2, $vwpalm4is_xv0wta4r, $vwpalm4is_xv0wta4r); $wpdb->query($vwpalm4is_cevdqnb5lzm); } function wpalm4is_z04ztxvabhyc($vwpalm4is_n_bsw6d3x, $vwpalm4is_q3m7fehial1 = '') { if (! wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'local_auth_only') ) { return; } if (empty($vwpalm4is_q3m7fehial1) ) { $vwpalm4is_q3m7fehial1 = (isset($_POST['password_1']) && isset($_POST['password_2']) ) ? $_POST['password_1'] : ''; }  $vwpalm4is_s13i75n4ph = (int) $this->wpalm4is_ild4oyu($vwpalm4is_n_bsw6d3x->user_email); if ($vwpalm4is_s13i75n4ph > 0) {  $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field'); $vwpalm4is_jbucldi1t7q = array( $vwpalm4is_urzq9h => $vwpalm4is_q3m7fehial1 ); $this->isdk->updateCon($vwpalm4is_s13i75n4ph, $vwpalm4is_jbucldi1t7q);   $this->wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph); } } function wpalm4is__xjgiby2lw67() { if (! is_user_logged_in() ) { unset($_SESSION['memb_db_fields'], $_SESSION['memb_user']); }  if ( ( $this->wpalm4is_yglaxnp9hw() > 0 ) && empty($_SESSION['memb_db_fields']) ) { $this->wpalm4is_pvab9fqcm(); } if ($this->license_status) { $this->wpalm4is_zj_e7dfo(); add_post_type_support('sfwd-courses', 'excerpt'); add_post_type_support('sfwd-lessons', 'excerpt'); add_post_type_support('sfwd-topic', 'excerpt'); } } function wpalm4is_z2nabfukzdg() { if (! $this->admin_class) { $this->admin_class = new wpalm4is_dwrme417cz; } return $this->admin_class; } function wpalm4is_qt45jry() { if (! $this->frontend_class) { $this->frontend_class = new wpalm4is_sfzq97me0; } return $this->frontend_class; } function wpalm4is_nt_n3bkfoag() { if (! $this->shortcodes) { $this->shortcodes = new wpalm4is_pc68st731r; } return $this->frontend_class; } function wpalm4is_iqg8vf6rykd() { if ( (defined('DOING_AJAX') && DOING_AJAX) || (! is_admin() ) ) { $this->wpalm4is_qt45jry(); $this->wpalm4is_nt_n3bkfoag();   } if (! $this->license_status) {  }  include_once MEMBERIUM_LIB . '/vendor/wpal/blocks/init.php'; $vwpalm4is_g87myl0d = array( 'debug' => 0, 'debuglog' => 'error_log:', 'prefix' => 'is4wp', 'settings_title' => __('Memberium', 'memberium'), 'access_level_name' => __('Membership Level', 'memberium'), 'key_name' => __('Tag ID(s)', 'memberium'), 'keys_removed_text' => __('Notice : The following Tag ID(s) have been removed', 'memberium'), 'disabled_settings' => array('asset_id' => 0, 'invert_results' => 0), ); wpalm4is_tbfvtohy93mq($vwpalm4is_g87myl0d); if (class_exists('AppPresser')) { include_once MEMBERIUM_LIB . '/vendor/wpal/apppresser/apppresser.php'; } if (class_exists('BadgeOS') ) { include_once MEMBERIUM_LIB . '/ext/badgeos/badgeos.php'; } if (function_exists('bp_is_active') ) { include_once MEMBERIUM_LIB . '/ext/buddypress/buddypress.php'; } if (false) { if (defined('WPEP_VERSION') && version_compare(WPEP_VERSION, 1, '>=') ) { include_once MEMBERIUM_LIB . '/ext/elearncommerce/elearncommerce.php'; } } if (class_exists('GamiPress') ) { include_once MEMBERIUM_LIB . '/ext/gamipress/gamipress.php'; }  if (function_exists('buddypress') ) { add_action('xprofile_updated_profile', array('wpalm4is_jhqro0jwe', 'wpalm4is_a1wm4tvpux'), 0, 5); } if (class_exists('SFWD_LMS') && defined('LEARNDASH_VERSION') && version_compare(LEARNDASH_VERSION, 3, '>=') ) { include_once MEMBERIUM_LIB . '/ext/learndash/learndash.php'; } if (class_exists('PeepSoGroupsPlugin') ) { include_once MEMBERIUM_LIB . '/ext/peepso-groups/peepso.php'; }  if (defined('LLMS_VERSION') ) { include_once MEMBERIUM_LIB . '/ext/lifterlms/lifterlms.php'; } if (class_exists('LearnPress') ) { include_once MEMBERIUM_LIB . '/ext/learnpress/learnpress.php'; }  if (function_exists('sensei') ) { include_once MEMBERIUM_LIB . '/ext/sensei/sensei.php'; }  if (defined('PROFILE_BUILDER_VERSION') ) { include_once MEMBERIUM_LIB . '/ext/profile-builder/index.php'; }  if (class_exists('GFCommon') ) { include_once MEMBERIUM_LIB . '/ext/gravity-forms/gravity-forms.php';  add_action('gform_editor_js', array($this, 'wpalm4is_i2npl96d8rb') ); add_action('gform_field_advanced_settings', array($this, 'wpalm4is_jhkp0jol69r'), 10, 2); add_action('gform_post_payment', array($this, 'wpalm4is_x2fxhd04'), 10, 2); add_filter('gform_form_settings', array($this, 'wpalm4is_m3jp6wlc'), 10, 2); add_filter('gform_pre_form_settings_save', array($this, 'wpalm4is_k4i0gr9do7'), 10, 2); }  if (class_exists('woocommerce') ) { new wpalm4is_plex8z; }  } function wpalm4is_qjxamosw() { $vwpalm4is_rm2d0f = get_registered_nav_menus(); $vwpalm4is_la4pzw = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('memberships'); if (is_array($vwpalm4is_rm2d0f) ) {  foreach($vwpalm4is_rm2d0f as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { unregister_nav_menu($vwpalm4is_x3e6m_hobj); } foreach($vwpalm4is_rm2d0f as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { register_nav_menu($vwpalm4is_x3e6m_hobj, $vwpalm4is_kh9vqi_6znd); register_nav_menu('memberium|' . $vwpalm4is_x3e6m_hobj . '|loggedin', '&nbsp;&nbsp;Logged In ' . $vwpalm4is_kh9vqi_6znd); foreach($vwpalm4is_la4pzw as $tag_id => $vwpalm4is_mp_ceis8) { if (empty($vwpalm4is_mp_ceis8['dynamic_menus']) ) { register_nav_menu('memberium|' . $vwpalm4is_x3e6m_hobj . '|' . $tag_id, '&nbsp;&nbsp;' . $vwpalm4is_mp_ceis8['name'] . ' ' . $vwpalm4is_kh9vqi_6znd); } } } } } function wpalm4is_tf82krq9hby($vwpalm4is_kmqnwo6cu5, $vwpalm4is_ndt31pno5eiy = false) { global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_zdwvp3mziy8 = array(); $vwpalm4is_n2moizyb = array(); $vwpalm4is_k9i_ho = array(); if (is_array($vwpalm4is_ndt31pno5eiy) ) { foreach($vwpalm4is_ndt31pno5eiy as $k => $v) { $vwpalm4is_ndt31pno5eiy[$k] = '_' . $v; } } if (is_array($vwpalm4is_kmqnwo6cu5) ) { foreach($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { if ($vwpalm4is_hs69ar['FormId'] == -1) { $vwpalm4is_a0g4be2 = '_' . $vwpalm4is_hs69ar['Name']; $vwpalm4is_zdwvp3mziy8[] = $vwpalm4is_a0g4be2; if ($vwpalm4is_ndt31pno5eiy !== false) { if (! in_array($vwpalm4is_a0g4be2, $vwpalm4is_ndt31pno5eiy) ) { $vwpalm4is_k9i_ho[] = $vwpalm4is_a0g4be2; } } } if ($vwpalm4is_hs69ar['FormId'] == -3) { $vwpalm4is_n2moizyb[] = '_' . $vwpalm4is_hs69ar['Name']; } } } if (! empty($vwpalm4is_zdwvp3mziy8) ) { $vwpalm4is__mnral5zjy = MEMBERIUM_DB_CONTACTS; $vwpalm4is_cevdqnb5lzm = "DELETE FROM `{$vwpalm4is__mnral5zjy}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' AND `fieldname` LIKE '\_%' AND fieldname NOT IN ('" . trim(implode("', '", $vwpalm4is_zdwvp3mziy8), ',') . "') "; $wpdb->query($vwpalm4is_cevdqnb5lzm); } if (! empty($vwpalm4is_n2moizyb) ) { $vwpalm4is__mnral5zjy = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_cevdqnb5lzm = "DELETE FROM `{$vwpalm4is__mnral5zjy}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' AND `fieldname` LIKE '\_%' AND fieldname NOT IN ('" . trim(implode("', '", $vwpalm4is_n2moizyb), ',') . "') "; $wpdb->query($vwpalm4is_cevdqnb5lzm); } $vwpalm4is_yamd4ps9kvl5 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'ignore_contact_fields') . ',' . implode(',', $vwpalm4is_k9i_ho); $vwpalm4is_yamd4ps9kvl5 = implode(',', array_unique(explode(',', $vwpalm4is_yamd4ps9kvl5) ) ); wpalm4is_xb7t0i6pzn::wpalm4is_jr16aisj($vwpalm4is_yamd4ps9kvl5, 'ignore_contact_fields', 'settings');  } function wpalm4is_p3oqv1a($vwpalm4is_tcon6xrp) { if (empty($this->options['settings']['sync_new_wp_users']) ) { return; } if ($this->wpalm4is_zh492zb() ) { return; } if (isset($_POST['createaccount']) && empty($_POST['createaccount']) ) { return; } global $wpdb; $vwpalm4is_n_bsw6d3x = get_userdata($vwpalm4is_tcon6xrp); $vwpalm4is_jbucldi1t7q = array(); $vwpalm4is_wo7adp5v9e = 0; $vwpalm4is_urzq9h = $this->options['settings']['password_field']; $vwpalm4is_ougfb1hd = get_user_meta($vwpalm4is_tcon6xrp); $vwpalm4is_pobydn7 = isset($_POST['action']) && $_POST['action'] == 'createuser' && isset($_POST['createuser']);  $vwpalm4is_jbucldi1t7q['FirstName'] = ''; $vwpalm4is_jbucldi1t7q['LastName'] = '';  if (isset($_POST['wp-submit']) && $_POST['wp-submit'] == 'Register') { $vwpalm4is_jbucldi1t7q['FirstName'] = isset($_POST['firstname']) ? trim($_POST['firstname']) : $vwpalm4is_jbucldi1t7q['FirstName']; $vwpalm4is_jbucldi1t7q['LastName'] = isset($_POST['lastname']) ? trim($_POST['lastname']) : $vwpalm4is_jbucldi1t7q['LastName']; } if ($vwpalm4is_pobydn7) { $vwpalm4is_jbucldi1t7q['FirstName'] = isset($_POST['first_name']) ? trim($_POST['first_name']) : $vwpalm4is_jbucldi1t7q['FirstName']; $vwpalm4is_jbucldi1t7q['LastName'] = isset($_POST['last_name']) ? trim($_POST['last_name']) : $vwpalm4is_jbucldi1t7q['LastName']; } $vwpalm4is_azal74d8ou5c = trim($vwpalm4is_jbucldi1t7q['FirstName'] . ' ' . $vwpalm4is_jbucldi1t7q['LastName']); $vwpalm4is_zps0dki = wpalm4is_l9n25d::wpalm4is_s2ozcmt(); $vwpalm4is_zps0dki = apply_filters('memberium_registration_field_map', $vwpalm4is_zps0dki); foreach($fields as $vwpalm4is_i7b8ex4 => $vwpalm4is_kr7f3vm) { if (isset($vwpalm4is_ougfb1hd[$vwpalm4is_i7b8ex4][0]) ) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_kr7f3vm] = trim($vwpalm4is_ougfb1hd[$vwpalm4is_i7b8ex4][0]); } }  foreach($vwpalm4is_zps0dki as $vwpalm4is_vo2efdaqtjv => $vwpalm4is_qy5i1ngkxq) { if (isset($_POST[$vwpalm4is_vo2efdaqtjv]) ) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_qy5i1ngkxq] = $_POST[$vwpalm4is_vo2efdaqtjv]; } } $vwpalm4is_jbucldi1t7q['Email'] = $vwpalm4is_n_bsw6d3x->user_email;  if (empty($this->options['settings']['local_auth_only']) ) { $this->wpalm4is_t0qpu_xty($vwpalm4is_n_bsw6d3x->user_email, 30); $vwpalm4is_cm4b8pug = MEMBERIUM_DB_CONTACTS; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_h9kht2xub8p = $this->options['settings']['username_field']; $vwpalm4is_urzq9h = $this->options['settings']['password_field']; $vwpalm4is_cevdqnb5lzm = "
			SELECT
			COUNT(`{$vwpalm4is_cm4b8pug}`.`id`)
			FROM
			`{$vwpalm4is_cm4b8pug}`,
			`{$vwpalm4is_cm4b8pug}` as `{$vwpalm4is_cm4b8pug}_1`
			WHERE	`{$vwpalm4is_cm4b8pug}`.`appname`     = '{$vwpalm4is_dd4j20qwmn_}'
			AND 	`{$vwpalm4is_cm4b8pug}`.`fieldname`   = '{$vwpalm4is_h9kht2xub8p}'
			AND		`{$vwpalm4is_cm4b8pug}`.`value`       = %s
			AND		`{$vwpalm4is_cm4b8pug}_1`.`id`        = `{$vwpalm4is_cm4b8pug}`.`id`
			AND		`{$vwpalm4is_cm4b8pug}_1`.`fieldname` = '{$vwpalm4is_urzq9h}'
			AND		`{$vwpalm4is_cm4b8pug}_1`.`value`     > ''
			ORDER BY `{$vwpalm4is_cm4b8pug}_1`.`id` ASC LIMIT 1"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_n_bsw6d3x->user_email); $vwpalm4is_jo91quzgpx0 = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_jo91quzgpx0 == 0) {  $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] = 'PASSWORD_PLACEHOLDER'; if (isset($_POST['pass1']) && ! empty($_POST['pass1']) ) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] = $_POST['pass1']; }  if (! empty($_POST['woocommerce-register-nonce']) ) { if (isset($_POST['password']) && ! empty($_POST['password']) ) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] = $_POST['password']; } } } } if (! empty($vwpalm4is_wo7adp5v9e) ) { $vwpalm4is_jbucldi1t7q['LeadSourceId'] = $vwpalm4is_wo7adp5v9e; }  update_user_meta($vwpalm4is_tcon6xrp, 'first_name', $vwpalm4is_jbucldi1t7q['FirstName']); update_user_meta($vwpalm4is_tcon6xrp, 'last_name', $vwpalm4is_jbucldi1t7q['LastName']); $vwpalm4is_g87myl0d = array( 'user_id' => $vwpalm4is_tcon6xrp, 'contact' => $_POST ); $vwpalm4is_csc29oe_6mn = $this->wpalm4is_ts_b9zir0of2($vwpalm4is_g87myl0d) ; update_user_meta($vwpalm4is_tcon6xrp, 'display_name', $vwpalm4is_csc29oe_6mn); update_user_meta($vwpalm4is_tcon6xrp, 'nickname', $vwpalm4is_csc29oe_6mn); update_user_meta($vwpalm4is_tcon6xrp, 'user_nicename', sanitize_title($vwpalm4is_csc29oe_6mn) ); add_filter('send_password_change_email', array($this, 'wpalm4is_cv9g6o'), 999999, 3); $vwpalm4is_g87myl0d = array( 'ID' => $vwpalm4is_tcon6xrp, 'display_name' => $vwpalm4is_csc29oe_6mn, 'nickname' => $vwpalm4is_csc29oe_6mn, 'user_nicename' => sanitize_title($vwpalm4is_csc29oe_6mn) ); wp_update_user($vwpalm4is_g87myl0d); remove_filter('send_password_change_email', array($this, 'wpalm4is_cv9g6o'), 999999);  if (get_user_meta($vwpalm4is_tcon6xrp, '_fb_is_sync', true) != 1) { $vwpalm4is_s13i75n4ph = (int) $this->isdk->addWithDupCheck($vwpalm4is_jbucldi1t7q, 'Email'); $this->isdk->OptIn($vwpalm4is_jbucldi1t7q['Email'], 'Membership Site Registration'); if ( (int) $this->options['settings']['new_user_registration_tag'] > 0) { $this->wpalm4is_yp5awiqcv(array($this->options['settings']['new_user_registration_tag']), $vwpalm4is_s13i75n4ph); } delete_user_meta($vwpalm4is_tcon6xrp, '_fb_is_sync'); add_user_meta($vwpalm4is_tcon6xrp, '_fb_is_sync', 1); } if ($vwpalm4is_s13i75n4ph) { $this->wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph); $this->wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph, $vwpalm4is_tcon6xrp); } } function wpalm4is_vedkslwyimrf() { $vwpalm4is_pramd46 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'makepass_scan_tag', 0); $vwpalm4is_mlnre1m0548 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'makepass_success_tag', 0); $vwpalm4is_hj9hv28d = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'makepass_success_actionset', 0); if (! $vwpalm4is_pramd46 || (! $vwpalm4is_mlnre1m0548 && ! $vwpalm4is_hj9hv28d) ) { return; } $vwpalm4is__q2l1jka = wpalm4is_i8g2fh::wpalm4is_fu57mn(0, 'cron', 'Start scanMakePass'); $vwpalm4is__b16pgsh9oxe = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'makepass_scan_size', 5); $vwpalm4is_h9kht2xub8p = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'username_field', 5); $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field', 5); $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true); $vwpalm4is_fqzgw57 = array( 'Groups' => $vwpalm4is_pramd46, ); $vwpalm4is_jo91quzgpx0 = $this->isdk->dsQueryOrderBy('Contact', $vwpalm4is__b16pgsh9oxe, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'LastUpdated', false); if (is_array($vwpalm4is_jo91quzgpx0) ) { foreach($vwpalm4is_jo91quzgpx0 as $vwpalm4is_jbucldi1t7q) { $vwpalm4is_s13i75n4ph = isset($vwpalm4is_jbucldi1t7q['Id']) ? (int) $vwpalm4is_jbucldi1t7q['Id'] : 0; $vwpalm4is_y3v1y549t = isset($vwpalm4is_jbucldi1t7q[$vwpalm4is_h9kht2xub8p]) ? strtolower(trim($vwpalm4is_jbucldi1t7q[$vwpalm4is_h9kht2xub8p]) ) : ''; $vwpalm4is__yia8c7q = isset($vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]) ? $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] : ''; $vwpalm4is_pav_wp7 = $vwpalm4is_jbucldi1t7q['Groups']; $vwpalm4is_zcknyhaxs1 = false; $vwpalm4is_lmhd98gkvxbi = false; wpalm4is_i8g2fh::wpalm4is_ifx6lhb2v9d1($vwpalm4is__q2l1jka, "Contact ID = {$vwpalm4is_s13i75n4ph}, Username = {$vwpalm4is_y3v1y549t}"); if (empty($vwpalm4is_s13i75n4ph) || empty($vwpalm4is_y3v1y549t) ) { break; } if (empty($vwpalm4is_jbucldi1t7q[$vwpalm4is_h9kht2xub8p]) ) { break; }  if (username_exists($vwpalm4is_hafks9j1) || email_exists($vwpalm4is_hafks9j1) ) { $this->wpalm4is_yp5awiqcv("-{$vwpalm4is_pramd46}", $vwpalm4is_s13i75n4ph); usleep(500000); $this->wpalm4is_yp5awiqcv($vwpalm4is_mlnre1m0548, $vwpalm4is_s13i75n4ph); usleep(500000); break; } if (empty($vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]) ) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] = $this->wpalm4is_i6mowsz12gln(); $vwpalm4is_guh4pc3x = array( $vwpalm4is_urzq9h => $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h], ); $vwpalm4is_ukra4p = $this->isdk->updateCon($vwpalm4is_s13i75n4ph, $vwpalm4is_guh4pc3x);  } $this->wpalm4is_xnfg7oiy0kwt($vwpalm4is_jbucldi1t7q);  $vwpalm4is_nibkalugdq = array(); $vwpalm4is_nibkalugdq['user_login'] = $vwpalm4is_jbucldi1t7q[$vwpalm4is_h9kht2xub8p]; $vwpalm4is_nibkalugdq['user_pass'] = $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]; $vwpalm4is_nibkalugdq['first_name'] = isset($vwpalm4is_jbucldi1t7q['FirstName']) ? trim($vwpalm4is_jbucldi1t7q['FirstName']) : ''; $vwpalm4is_nibkalugdq['last_name'] = isset($vwpalm4is_jbucldi1t7q['LastName']) ? trim($vwpalm4is_jbucldi1t7q['LastName']) : ''; $vwpalm4is_nibkalugdq['user_url'] = isset($vwpalm4is_jbucldi1t7q['Website']) ? trim($vwpalm4is_jbucldi1t7q['Website']) : ''; $vwpalm4is_nibkalugdq['user_email'] = isset($vwpalm4is_jbucldi1t7q['Email']) ? strtolower(trim($vwpalm4is_jbucldi1t7q['Email']) ) : ''; $vwpalm4is_g87myl0d = array('contact' => $vwpalm4is_jbucldi1t7q); $_POST['pass1'] = $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]; $vwpalm4is_nibkalugdq['display_name'] = apply_filters('memberium/wpuser/display_name', $this->wpalm4is_ts_b9zir0of2($vwpalm4is_g87myl0d), $vwpalm4is_jbucldi1t7q); $vwpalm4is_nibkalugdq['nickname'] = apply_filters('memberium/wpuser/nickname', $vwpalm4is_nibkalugdq['display_name'], $vwpalm4is_jbucldi1t7q); $vwpalm4is_nibkalugdq['user_nicename'] = apply_filters('memberium/wpuser/nicename', sanitize_title($vwpalm4is_nibkalugdq['nickname'], $vwpalm4is_nibkalugdq['display_name']), $vwpalm4is_jbucldi1t7q); if (true) { $vwpalm4is_f7imyept0o = $this->wpalm4is_gl1wt2xm9ea($vwpalm4is_s13i75n4ph); } else { add_filter('send_password_change_email', array($this, 'wpalm4is_cv9g6o'), PHP_INT_MAX, 3); $vwpalm4is_f7imyept0o = wp_insert_user($vwpalm4is_nibkalugdq); remove_filter('send_password_change_email', array($this, 'wpalm4is_cv9g6o'), PHP_INT_MAX); } if (is_int($vwpalm4is_f7imyept0o) && $vwpalm4is_f7imyept0o > 0) { $this->wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph, $vwpalm4is_f7imyept0o); do_action('user_register', $vwpalm4is_f7imyept0o); if (is_multisite() && ! is_user_member_of_blog($vwpalm4is_f7imyept0o) ) { $vwpalm4is_s7sdvr5j6hpo = get_current_blog_id(); $vwpalm4is_vme5v4qk79 = get_blog_option($vwpalm4is_s7sdvr5j6hpo, 'default_role', 'subscriber'); add_user_to_blog($vwpalm4is_s7sdvr5j6hpo, $vwpalm4is_f7imyept0o, $vwpalm4is_vme5v4qk79); } $rss_user_id = wpalm4is_lf9d0_sg1n::wpalm4is_oxv3nbclp($vwpalm4is_f7imyept0o); if (function_exists('WPCW_actions_users_newUserCreated') ) { WPCW_actions_users_newUserCreated($vwpalm4is_f7imyept0o); } } if (! empty($vwpalm4is_pramd46) ) { $this->wpalm4is_yp5awiqcv("-{$vwpalm4is_pramd46}", $vwpalm4is_s13i75n4ph); usleep(500000); } if (! empty($vwpalm4is_mlnre1m0548) ) { $this->wpalm4is_yp5awiqcv($vwpalm4is_mlnre1m0548, $vwpalm4is_s13i75n4ph); usleep(500000); } if (! empty($vwpalm4is_hj9hv28d) ) { $this->wpalm4is_soe2avpm($vwpalm4is_hj9hv28d, $vwpalm4is_s13i75n4ph); usleep(500000); } if (MEMBERIUM_ERRORLOG) error_log('scanMakePass Contact Id: ' . $vwpalm4is_jbucldi1t7q['Id'], 0);  } } } function wpalm4is_c_fm67s() { $vwpalm4is_tcon6xrp = get_current_user_id(); if (empty($vwpalm4is_tcon6xrp) || is_super_admin() ) { $this->wpalm4is_njoelpf8m6(0); if (isset($_SESSION) ) {  unset($_SESSION['memb_db_fields']); } return; } $session_user_id = isset($_SESSION['memb_user']['Id']) ? $_SESSION['memb_user']['Id'] : 0; $regenerate_session = ! ($session_user_id == $vwpalm4is_tcon6xrp); if (! $regenerate_session) { global $wpdb; $session_contact_id = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); $session_last_updated = wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('!lastupdated', 0); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $table = MEMBERIUM_DB_CONTACTS; $vwpalm4is_cevdqnb5lzm = "SELECT `value` FROM `{$table}` WHERE `id` = %d AND `appname` = %s AND fieldname = '!LastUpdated' "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $session_contact_id, $vwpalm4is_dd4j20qwmn_); $db_timestamp = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); $regenerate_session = ($db_timestamp <> $session_last_updated); } if ($regenerate_session) { $_SESSION = $this->wpalm4is_pvab9fqcm($vwpalm4is_tcon6xrp); } $this->wpalm4is_njoelpf8m6( wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() ); } function wpalm4is_q70ncqp() { $this->wpalm4is_bd51prj_n9(); $this->wpalm4is_jkrw_hjsu(); }    function wpalm4is_xrmjix4_fup() {  return wpalm4is_bd5uye4ng3l::wpalm4is_xrmjix4_fup(); } function wpalm4is_ryufqtvobae9() { if (! headers_sent() ) { header('X-Powered-By: Memberium ' . $this->wpalm4is_zktb2lnm(), false); } } function wpalm4is_zuo2vkgr($vwpalm4is_znwr7yg80f, $vwpalm4is_tcon6xrp, $vwpalm4is_his8tep21wxu, $vwpalm4is_xv0wta4r) { if ($this->doing_user_update) { return; } $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_tcon6xrp); if (! $vwpalm4is_s13i75n4ph) { return; } $vwpalm4is_ubwq9j = wpalm4is_l9n25d::wpalm4is_s2ozcmt(); if (isset($vwpalm4is_ubwq9j[$vwpalm4is_his8tep21wxu]) ) { $vwpalm4is_a0g4be2 = $vwpalm4is_ubwq9j[$vwpalm4is_his8tep21wxu]; $this->wpalm4is_wvcz6opb($vwpalm4is_a0g4be2, $meta_value, $vwpalm4is_s13i75n4ph); } }  function wpalm4is_zj_e7dfo() { global $pagenow; if ('wp-login.php' == $pagenow) { if (class_exists('NextendSocialLogin') && ! empty($_GET['loginSocial'])) { return; } $vwpalm4is_u0ted6 = array( ); foreach($vwpalm4is_u0ted6 as $vwpalm4is_jxl54rv70bja) { if (! empty($_GET[$vwpalm4is_jxl54rv70bja]) ) { return; } } $vwpalm4is_csowi52 = empty($_GET['action']) ? '' : strtolower(trim($_GET['action']) ); $vwpalm4is_jxl54rv70bja = array( 'rp', 'switch_to_user', 'switch_to_olduser', 'override', ); if (in_array($vwpalm4is_csowi52, $vwpalm4is_jxl54rv70bja) ) { return; } $vwpalm4is_kzb17e2 = apply_filters('memberium_wplogin_redirect', true); if (! $vwpalm4is_kzb17e2) { return; } $vwpalm4is_ltqv9dk6olz4 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'login_url', 0); if ($vwpalm4is_ltqv9dk6olz4 < 1) { return; } if ($_SERVER['REQUEST_METHOD'] == 'GET') { $vwpalm4is_uq06gxu = empty($_GET['rp']) ? '' : $_GET['rp']; if (! empty($vwpalm4is_uq06gxu) ) { return; } if (! empty($vwpalm4is_csowi52) ) { if ($vwpalm4is_csowi52 == 'logout') { return; } if ($vwpalm4is_csowi52 == 'register') { return; } if ($vwpalm4is_csowi52 == 'lostpassword') { return; } if ($vwpalm4is_csowi52 == 'lostpassword') { return; } } } if ($_SERVER['REQUEST_METHOD'] == 'POST') { if (isset($_POST['log']) && isset($_POST['pwd']) && empty($_POST['log']) && empty($_POST['pwd']) ) { } else { return; } } $vwpalm4is_sf9tqcp3 = get_permalink(wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'login_url') ); $vwpalm4is_tgzkrl = empty($_SERVER['QUERY_STRING']) ? '' : '?' . $_SERVER['QUERY_STRING']; $vwpalm4is_sf9tqcp3 = $vwpalm4is_sf9tqcp3 . $vwpalm4is_tgzkrl; wp_redirect($vwpalm4is_sf9tqcp3); die(); } }    static function wpalm4is_s2ozcmt() { $vwpalm4is_c7fqlc_hbw6a = array( 'account_first_name' => 'FirstName', 'account_last_name' => 'LastName', 'first_name' => 'FirstName', 'last_name' => 'LastName', 'billing_address_1' => 'StreetAddress1', 'billing_address_2' => 'StreetAddress2', 'billing_city' => 'City', 'billing_company' => 'Company', 'billing_country' => 'Country', 'billing_email' => 'Email', 'billing_phone' => 'Phone1', 'billing_postcode' => 'PostalCode', 'billing_state' => 'State', 'shipping_address_1' => 'Address2Street1', 'shipping_address_2' => 'Address2Street2', 'shipping_city' => 'City2', 'shipping_country' => 'Country2', 'shipping_email' => 'Email2', 'shipping_phone' => 'Phone2', 'shipping_postcode' => 'PostalCode2', 'shipping_state' => 'State2', ); return $vwpalm4is_c7fqlc_hbw6a; }    function wpalm4is_gm7uj2r($vwpalm4is_tcon6xrp) { static $vwpalm4is_op65cmv34o2 = false; if ($vwpalm4is_op65cmv34o2 === false) { $vwpalm4is_op65cmv34o2 = get_current_user_id(); } return ($vwpalm4is_tcon6xrp == $vwpalm4is_rbgl4yfxj); } function wpalm4is_pfaxscyd645($vwpalm4is_s13i75n4ph) { static $vwpalm4is_xvfnjatk53u = false; if ($vwpalm4is_xvfnjatk53u === false) { $vwpalm4is_xvfnjatk53u = empty($_SESSION['memb_db_fields']['id']) ? 0 : $_SESSION['memb_db_fields']['id']; } return ($vwpalm4is_xvfnjatk53u == $vwpalm4is_s13i75n4ph); } function wpalm4is_ha5fo8cz3pd() {  if ($this->license_status) { if (empty($this->options['settings']['autoupdate']) ) { return; } } if (! is_writable(MEMBERIUM_HOME) ) { error_log('MEMBERIUM:  Autoupdate failed due to write permissions.'); return; } if (! function_exists('get_plugin_data') ) { require_once ABSPATH . 'wp-admin/includes/plugin.php'; } $vwpalm4is_t40b3g5 = wp_remote_get( $this->wpalm4is_kcbqzm4_jw() ); $vwpalm4is_t40b3g5 = is_array($vwpalm4is_t40b3g5) ? $vwpalm4is_t40b3g5 = unserialize($vwpalm4is_t40b3g5['body']) : array(); $vwpalm4is_d8zcdwxjh1 = false; $vwpalm4is_fas8mq = get_plugin_data(MEMBERIUM_HOME, false, false); $vwpalm4is_s5np1caujd0f = (is_object($vwpalm4is_t40b3g5) && property_exists($vwpalm4is_t40b3g5, 'version') ) ? $vwpalm4is_t40b3g5->version : ''; $vwpalm4is_xm0pn6qkzxvd = $this->wpalm4is_zktb2lnm(); $vwpalm4is_ef9_poi8k7h = version_compare($vwpalm4is_s5np1caujd0f, $vwpalm4is_xm0pn6qkzxvd, 'gt'); if ($vwpalm4is_ef9_poi8k7h) {  ignore_user_abort();  require_once ABSPATH .'/wp-admin/includes/file.php';  require_once ABSPATH .'/wp-admin/includes/class-wp-filesystem-base.php'; $vwpalm4is_rrmeu9sv_c = WP_PLUGIN_DIR; $vwpalm4is_sylaucvd16 = download_url($vwpalm4is_t40b3g5->download_link, 300);  if (file_exists($vwpalm4is_sylaucvd16) ) {   file_put_contents(ABSPATH . '.maintenance', '<?php $upgrading = time();'); WP_Filesystem(); require_once ABSPATH .'/wp-admin/includes/class-wp-filesystem-direct.php'; $vwpalm4is_zke28_bp4j0w = new wp_filesystem_direct(null); $vwpalm4is_d8zcdwxjh1 = $vwpalm4is_zke28_bp4j0w->delete(MEMBERIUM_HOME_DIR, true); unzip_file($vwpalm4is_sylaucvd16, $vwpalm4is_rrmeu9sv_c); unlink($vwpalm4is_sylaucvd16); $vwpalm4is_d8zcdwxjh1 = true; } } if (file_exists(ABSPATH . '.maintenance') ) { unlink(ABSPATH . '.maintenance'); } return $vwpalm4is_d8zcdwxjh1; }    function wpalm4is_tc6arszl($vwpalm4is_s13i75n4ph, $vwpalm4is_gtyqfor0c8ib, $vwpalm4is_kh9vqi_6znd) { $this->dirty_contacts[$vwpalm4is_s13i75n4ph][$vwpalm4is_gtyqfor0c8ib] = $vwpalm4is_kh9vqi_6znd; } function wpalm4is_bd51prj_n9() { if (empty($this->dirty_contacts) ) { return; } if (is_array($this->dirty_contacts) ) { foreach($this->dirty_contacts as $vwpalm4is_s13i75n4ph => $vwpalm4is_iomhdlzi73g5) { if ($vwpalm4is_s13i75n4ph) { $this->i2sdk->isdk->updateCon( (int) $vwpalm4is_s13i75n4ph, $vwpalm4is_iomhdlzi73g5); } } $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); if ($vwpalm4is_s13i75n4ph) { if (! empty($this->dirty_contacts[$vwpalm4is_s13i75n4ph]) ) { foreach($this->dirty_contacts[$vwpalm4is_s13i75n4ph] as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { $vwpalm4is_ndxvp20 = strtolower($vwpalm4is_ndxvp20); wpalm4is_xamhc3q6o::wpalm4is_n8bsagjurz5y($vwpalm4is_ndxvp20, $vwpalm4is_x1folrs); } } } $this->dirty_contacts = array(); } } function wpalm4is_cv9g6o($vwpalm4is_usqn4va, $vwpalm4is_n_bsw6d3x, $vwpalm4is__joasq7mg) { return false; } function wpalm4is_ikgt_1duc($vwpalm4is_hafks9j1, $vwpalm4is_hl4snrvj = false) { $vwpalm4is_jyh5dbl1av = $vwpalm4is_hafks9j1; $vwpalm4is_hafks9j1 = wp_strip_all_tags($vwpalm4is_hafks9j1); $vwpalm4is_hafks9j1 = remove_accents($vwpalm4is_hafks9j1); $vwpalm4is_hafks9j1 = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])(\+)|', '', $vwpalm4is_hafks9j1);  $vwpalm4is_hafks9j1 = preg_replace('/&.?;/', '', $vwpalm4is_hafks9j1);   if ($vwpalm4is_hl4snrvj) { $vwpalm4is_hafks9j1 = preg_replace('|[^a-z0-9 _.\-@]|i', '', $vwpalm4is_hafks9j1); } $vwpalm4is_hafks9j1 = trim($vwpalm4is_hafks9j1);  $vwpalm4is_hafks9j1 = preg_replace('|\s+|', ' ', $vwpalm4is_hafks9j1); return $vwpalm4is_hafks9j1;  } function wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph = 0) { $vwpalm4is_s13i75n4ph = empty($vwpalm4is_s13i75n4ph) ? wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() : $vwpalm4is_s13i75n4ph; if (! $vwpalm4is_s13i75n4ph) { return false; } if ($vwpalm4is_s13i75n4ph > 0) { wp_cache_flush(); wp_cache_set('namespace_key', 1, 'memberium::user::' . $vwpalm4is_s13i75n4ph, 0); } }    function wpalm4is_ghr6gsov0($vwpalm4is_s13i75n4ph = 0) { $vwpalm4is_s13i75n4ph = empty($vwpalm4is_s13i75n4ph) ? wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() : $vwpalm4is_s13i75n4ph; if (! $vwpalm4is_s13i75n4ph) { return false; } if ($vwpalm4is_s13i75n4ph > 0) { $vwpalm4is_kgzfkusx = wp_cache_get('namespace_key', 'memberium::user::' . $vwpalm4is_s13i75n4ph);  if ($vwpalm4is_kgzfkusx === FALSE) { $vwpalm4is_kgzfkusx = microtime(TRUE); wp_cache_set('namespace_key', $vwpalm4is_kgzfkusx, 'memberium::user::' . $vwpalm4is_s13i75n4ph, 0); } } return $vwpalm4is_kgzfkusx; } function wpalm4is_qjlodzu() { global $wpdb; $vwpalm4is_q4irmgt_h0 = get_option('memberium_updatecontact_scan_time', 0); $vwpalm4is_kmqnwo6cu5 = array(); $vwpalm4is_huym27 = 0; $vwpalm4is_zxzf1s = isset($this->options['settings']['updatecontact_scan_tag']) ? (int) $this->options['settings']['updatecontact_scan_tag'] : 0; $vwpalm4is_ls4zde = ''; $vwpalm4is_k8dy5pnxo = 0; $vwpalm4is__mnral5zjy = 'Contact'; $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true);  $vwpalm4is_fqzgw57 = array( 'GroupName' => $vwpalm4is_zxzf1s, 'LastUpdated' => date('YmdTH:i:s', $vwpalm4is_q4irmgt_h0), );  $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTS; $vwpalm4is_wd6mliv = 0; do { set_time_limit(30); $vwpalm4is_jo91quzgpx0 = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'LastUpdated', true); if (is_array($vwpalm4is_jo91quzgpx0) ) { $vwpalm4is_az0w4le = array(); $vwpalm4is_obr60wde = array(); foreach ($vwpalm4is_jo91quzgpx0 as $vwpalm4is_jbucldi1t7q) { foreach($vwpalm4is_jbucldi1t7q as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_kh9vqi_6znd) { if ($vwpalm4is_x3e6m_hobj != $this->options['settings']['password_field']) { $vwpalm4is_kh9vqi_6znd = wp_strip_all_tags($vwpalm4is_kh9vqi_6znd); } else { $vwpalm4is_kh9vqi_6znd = ($vwpalm4is_kh9vqi_6znd <> 'null') ? html_entity_decode($vwpalm4is_kh9vqi_6znd) : ''; $vwpalm4is_az0w4le[] = $wpdb->prepare('(%d, %s, %s, %s)', $id, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_x3e6m_hobj, $vwpalm4is_kh9vqi_6znd); } } } $vwpalm4is_cevdqnb5lzm = "INSERT INTO {$vwpalm4is_q35jf97eg4} (id, appname, fieldname, value) VALUES " . implode(',', $vwpalm4is_az0w4le) . " ON DUPLICATE KEY UPDATE id=VALUES(id), appname=VALUES(appname), fieldname=VALUES(fieldname), value=VALUES(value);"; unset($vwpalm4is_az0w4le, $vwpalm4is_kh9vqi_6znd, $vwpalm4is_x3e6m_hobj); $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm); $vwpalm4is_cshmxpk++; $vwpalm4is_wd6mliv = $vwpalm4is_wd6mliv + count($vwpalm4is_jo91quzgpx0); } usleep(500000); set_transient('memberium_updatecontact_scan_time', time() - 300); } while (count($vwpalm4is_jo91quzgpx0) == $vwpalm4is_e8ns965uk); } function wpalm4is_bgwqb6ei() {  $vwpalm4is_m6frj9ipah = $this->isdk->dsGetSetting('Affiliate', 'chooseaffiliate'); $vwpalm4is_y81up9lark4 = $this->isdk->dsGetSetting('Affiliate', 'use_referral_history'); $vwpalm4is_o9x4qpvbns = $this->isdk->dsGetSetting('Affiliate', 'aff_prefix');   } function wpalm4is_ei3drvf5xohp($vwpalm4is_g87myl0d) { if (is_user_logged_in() ) { if ( ! empty($this->options['settings']['dynamic_menus']) ) { $vwpalm4is_uzr5t7098j = $vwpalm4is_g87myl0d['theme_location']; $vwpalm4is_f6318r72 = get_theme_mod('nav_menu_locations'); $vwpalm4is_y1jnciaz0fk = isset($_SESSION['memb_user']['membership_tags']) ? (explode(',', $_SESSION['memb_user']['membership_tags']) ) : array();  $vwpalm4is_x3e6m_hobj = "memberium|{$vwpalm4is_uzr5t7098j}|loggedin"; if (is_user_logged_in() && ! empty($vwpalm4is_f6318r72[$vwpalm4is_x3e6m_hobj]) ) { $vwpalm4is_g87myl0d['theme_location'] = $vwpalm4is_x3e6m_hobj; } if (is_super_admin() ) { return $vwpalm4is_g87myl0d; }  if (is_array($vwpalm4is_y1jnciaz0fk) ) { foreach($vwpalm4is_y1jnciaz0fk as $membership_tag) { $vwpalm4is_x3e6m_hobj = "memberium|{$vwpalm4is_uzr5t7098j}|{$membership_tag}"; if (! empty($vwpalm4is_f6318r72[$vwpalm4is_x3e6m_hobj]) ) { $vwpalm4is_g87myl0d['theme_location'] = $vwpalm4is_x3e6m_hobj; } } } } } $vwpalm4is_g87myl0d['theme_location'] = apply_filters('memberium_personal_menus', $vwpalm4is_g87myl0d['theme_location']); return $vwpalm4is_g87myl0d; }     function wpalm4is_k0vfdx($vwpalm4is_xavx4e9gd2fr) { return hash_hmac('sha256', $vwpalm4is_xavx4e9gd2fr, wp_salt('nonce') . wpalm4is_aznwrha4::wpalm4is_iirgtfjk6h() . $this->wpalm4is_yglaxnp9hw() ); } function wpalm4is_khubmk9j72i3($vwpalm4is_o5_we2b, $vwpalm4is_xavx4e9gd2fr) { return ($this->wpalm4is_k0vfdx($vwpalm4is_xavx4e9gd2fr) == $vwpalm4is_o5_we2b); } function wpalm4is_v5hqlf($vwpalm4is_kp5xz8, $vwpalm4is_d63502ky_z8i, $vwpalm4is_n_bsw6d3x) { if (empty($_REQUEST['redirect_to']) ) { return ''; } return $vwpalm4is_kp5xz8; } function wpalm4is_if4hi2rysg($vwpalm4is_wikmdre) { $vwpalm4is_p3kdx08if = get_post_status($vwpalm4is_wikmdre); return $vwpalm4is_p3kdx08if === 'publish'; } function wpalm4is_k0sih56($vwpalm4is_sf9tqcp3) { global $wp_rewrite; $vwpalm4is_sf9tqcp3 = apply_filters('wpalm4is_k0sih56', $vwpalm4is_sf9tqcp3);  if (preg_match('#[?&](p|page_id|attachment_id)=(\d+)#', $vwpalm4is_sf9tqcp3, $vwpalm4is_avl5zr0x2) ) { $vwpalm4is_vzoj7cv_rsly = absint($vwpalm4is_avl5zr0x2[2]); if ($vwpalm4is_vzoj7cv_rsly) return $vwpalm4is_vzoj7cv_rsly; }  $vwpalm4is_awaj_sbkv = $wp_rewrite->wp_rewrite_rules();  if (empty($vwpalm4is_awaj_sbkv) ) { return 0; }  $vwpalm4is_vna127cfrth = explode('#', $vwpalm4is_sf9tqcp3); $vwpalm4is_sf9tqcp3 = $vwpalm4is_vna127cfrth[0];  $vwpalm4is_vna127cfrth = explode('?', $vwpalm4is_sf9tqcp3); $vwpalm4is_sf9tqcp3 = $vwpalm4is_vna127cfrth[0];  if (false !== strpos(site_url(), '://www.') && false === strpos($vwpalm4is_sf9tqcp3, '://www.') ) { $vwpalm4is_sf9tqcp3 = str_replace('://', '://www.', $vwpalm4is_sf9tqcp3); }  if (false === strpos(site_url(), '://www.') ) { $vwpalm4is_sf9tqcp3 = str_replace('://www.', '://', $vwpalm4is_sf9tqcp3); }  if (!$wp_rewrite->using_index_permalinks() ) { $vwpalm4is_sf9tqcp3 = str_replace('index.php/', '', $vwpalm4is_sf9tqcp3); } if (false !== strpos($vwpalm4is_sf9tqcp3, site_url() ) ) {  $vwpalm4is_sf9tqcp3 = str_replace(site_url(), '', $vwpalm4is_sf9tqcp3); } else {  $vwpalm4is_b7f19gwb = parse_url(site_url() ); $vwpalm4is_b7f19gwb = isset($vwpalm4is_b7f19gwb['path']) ? $vwpalm4is_b7f19gwb['path'] : '' ; $vwpalm4is_sf9tqcp3 = str_replace($vwpalm4is_b7f19gwb, '', $vwpalm4is_sf9tqcp3); }  $vwpalm4is_sf9tqcp3 = trim($vwpalm4is_sf9tqcp3, '/'); $vwpalm4is_refzyu = $vwpalm4is_sf9tqcp3;  $vwpalm4is_cndvi5mlequs = $vwpalm4is_refzyu; foreach ( (array) $vwpalm4is_awaj_sbkv as $match => $vwpalm4is_fqzgw57) {   if (!empty($vwpalm4is_sf9tqcp3) && ($vwpalm4is_sf9tqcp3 != $vwpalm4is_refzyu) && (strpos($match, $vwpalm4is_sf9tqcp3) === 0) ) $vwpalm4is_cndvi5mlequs = $vwpalm4is_sf9tqcp3 . '/' . $vwpalm4is_refzyu; if (preg_match("!^{$match}!", $vwpalm4is_cndvi5mlequs, $matches) ) {   $vwpalm4is_fqzgw57 = preg_replace("!^.+\?!", '', $vwpalm4is_fqzgw57);  $vwpalm4is_fqzgw57 = addslashes(WP_MatchesMapRegex::apply($vwpalm4is_fqzgw57, $matches) );  global $wp; parse_str($vwpalm4is_fqzgw57, $query_vars); $vwpalm4is_fqzgw57 = array(); foreach ( (array) $query_vars as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { if (in_array($vwpalm4is_x3e6m_hobj, $wp->public_query_vars) ) $vwpalm4is_fqzgw57[$vwpalm4is_x3e6m_hobj] = $vwpalm4is_kh9vqi_6znd; } foreach ($GLOBALS['wp_post_types'] as $vwpalm4is_xvesxnc2dk => $t) { if ($t->query_var) { $vwpalm4is_hoau8nfw3[$t->query_var] = $vwpalm4is_xvesxnc2dk; } } foreach ($wp->public_query_vars as $wpvar) { if (isset($wp->extra_query_vars[$wpvar]) ) { $vwpalm4is_fqzgw57[$wpvar] = $wp->extra_query_vars[$wpvar]; } elseif (isset($_POST[$wpvar]) ) { $vwpalm4is_fqzgw57[$wpvar] = $_POST[$wpvar]; } elseif (isset($_GET[$wpvar]) ) { $vwpalm4is_fqzgw57[$wpvar] = $_GET[$wpvar]; } elseif (isset($query_vars[$wpvar]) ) { $vwpalm4is_fqzgw57[$wpvar] = $query_vars[$wpvar]; } if (!empty($vwpalm4is_fqzgw57[$wpvar]) ) { if (! is_array($vwpalm4is_fqzgw57[$wpvar]) ) { $vwpalm4is_fqzgw57[$wpvar] = (string) $vwpalm4is_fqzgw57[$wpvar]; } else { foreach ($vwpalm4is_fqzgw57[$wpvar] as $vwpalm4is_zkhus7lxq_tf => $vwpalm4is_x1folrs) { if (!is_object($vwpalm4is_x1folrs) ) { $vwpalm4is_fqzgw57[$wpvar][$vwpalm4is_zkhus7lxq_tf] = (string) $vwpalm4is_x1folrs; } } } if (isset($vwpalm4is_hoau8nfw3[$wpvar]) ) { $vwpalm4is_fqzgw57['post_type'] = $vwpalm4is_hoau8nfw3[$wpvar]; $vwpalm4is_fqzgw57['name'] = $vwpalm4is_fqzgw57[$wpvar]; } } }  $vwpalm4is_fqzgw57 = new WP_Query($vwpalm4is_fqzgw57); if (!empty($vwpalm4is_fqzgw57->posts) && $vwpalm4is_fqzgw57->is_singular) { return $vwpalm4is_fqzgw57->post->ID; } else { return 0; } } } return 0; } function wpalm4is_bjdcxtn($vwpalm4is_tcon6xrp = false) { } function wpalm4is_jdo0j8leua26() { return self::VERSION; } function wpalm4is_xs8fg9l257xj() { $vwpalm4is_z82s4yho = $_SERVER; $vwpalm4is_i_xjf5q = $_SESSION; $vwpalm4is_h7kbg1ir = $this->options['settings']['default_logout_page']; $vwpalm4is_la4pzw = $this->options['memberships']; $vwpalm4is_z82s4yho['HTTP_REFERER'] = isset($vwpalm4is_z82s4yho['HTTP_REFERER']) ? $vwpalm4is_z82s4yho['HTTP_REFERER'] : ''; $vwpalm4is_ct_6de5 = empty($vwpalm4is_h7kbg1ir) ? site_url() : get_permalink($vwpalm4is_h7kbg1ir); $vwpalm4is_ct_6de5 = str_replace('{{current.url}}', $vwpalm4is_z82s4yho['HTTP_REFERER'], $vwpalm4is_ct_6de5); $vwpalm4is_gf2m1t7v8nbz = isset($vwpalm4is_i_xjf5q['memb_user']['membership_tags']) ? explode(',', $vwpalm4is_i_xjf5q['memb_user']['membership_tags']) : array(); $membership_level = 0; if (is_array($vwpalm4is_gf2m1t7v8nbz) ) { foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { if (isset($vwpalm4is_la4pzw[$vwpalm4is_agvwtn]) ) { $vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['logout_page'] = (int) $vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['logout_page']; if ($vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['level'] >= $membership_level && $vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['logout_page'] > 0) { $membership_level = $vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['level']; if ($vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['logout_page'] > 0) { $vwpalm4is_ct_6de5 = get_permalink($vwpalm4is_la4pzw[$vwpalm4is_agvwtn]['logout_page']); } } } } } return $vwpalm4is_ct_6de5; } function wpalm4is_jspjzm5() {  if ($this->sso_mode) { return true; }  if (isset($_COOKIE['nextend_uniqid']) && $_COOKIE['nextend_uniqid'] > '') { return true; }   return false; }    function wpalm4is_xw91e_2pl($vwpalm4is_x3e6m_hobj, $vwpalm4is_h438bqdgczj = false) { if ($vwpalm4is_h438bqdgczj === false) { $writeback = true; $vwpalm4is_h438bqdgczj = (array) get_option('memberium_setup_completed'); } else { $writeback = false; } $vwpalm4is_h438bqdgczj[] = strtolower(trim($vwpalm4is_x3e6m_hobj) ); $vwpalm4is_h438bqdgczj = array_filter(array_unique($vwpalm4is_h438bqdgczj) ); if ($writeback){ update_option('memberium_setup_completed', array_filter(array_unique($vwpalm4is_h438bqdgczj) ) ); } return $vwpalm4is_h438bqdgczj; }         function wpalm4is_n0wxl2r($vwpalm4is_g87myl0d) { global $wpdb; $vwpalm4is_vx_n8e7hdrbo = array( 'table' => -1, 'type' => 19, ); $vwpalm4is_g87myl0d = wp_parse_args($vwpalm4is_g87myl0d, $vwpalm4is_vx_n8e7hdrbo); $vwpalm4is_g87myl0d['table'] = (int) $vwpalm4is_g87myl0d['table']; $vwpalm4is_g87myl0d['type'] = (int) $vwpalm4is_g87myl0d['type']; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT concat('_', name) as `name` FROM `" . MEMBERIUM_DB_DATAFORMFIELDS . "` WHERE `appname` =  '{$vwpalm4is_dd4j20qwmn_}' AND formid = " . (int) $vwpalm4is_g87myl0d['table'] . " AND datatype = " . (int) $vwpalm4is_g87myl0d['type']; $vwpalm4is_iomhdlzi73g5 = $wpdb->get_col($vwpalm4is_cevdqnb5lzm); return $vwpalm4is_iomhdlzi73g5; } static function wpalm4is_nkul8fh94x($vwpalm4is_k_f7wr8j2x) { $vwpalm4is_szyapq2r1bed = function ($vwpalm4is_vnz9uf) { if ( is_array($vwpalm4is_vnz9uf) && ! empty($vwpalm4is_vnz9uf) ) { $vwpalm4is_vnz9uf = array_change_key_case($vwpalm4is_vnz9uf); } return $vwpalm4is_vnz9uf; }; $vwpalm4is_k_f7wr8j2x = array_filter(array_map($vwpalm4is_szyapq2r1bed, array_change_key_case($vwpalm4is_k_f7wr8j2x) ) ); return $vwpalm4is_k_f7wr8j2x; }    function wpalm4is_fi5h278z($vwpalm4is_dzqjf460) { global $wpdb; $vwpalm4is_n_bsw6d3x = get_user_by('email', $vwpalm4is_dzqjf460); if (is_object($vwpalm4is_n_bsw6d3x) ) { return (int) $vwpalm4is_n_bsw6d3x->ID; } return 0; }  function wpalm4is_di6exhz($vwpalm4is_nki28u6, $vwpalm4is__lqy7iv62, $vwpalm4is_g87myl0d) { if (empty($_SESSION['memb_user']['roles']) ) { return $vwpalm4is_nki28u6; } $roles = isset($_SESSION['memb_user']['roles']) ? explode(',', trim($_SESSION['memb_user']['roles'], ',') ) : array(); foreach($roles as $role) { if ($role > '') { $vwpalm4is_nki28u6[$role] = 1; } } return $vwpalm4is_nki28u6; } function wpalm4is_huhyx3fi0mbd($vwpalm4is_tcon6xrp = 0) { if (! empty($vwpalm4is_tcon6xrp) ) { $vwpalm4is_tcon6xrp = get_current_user_id(); } if (user_can($vwpalm4is_tcon6xrp, 'manage_options') ) { return; } $vwpalm4is_mxv1j6lnc = get_user_meta($vwpalm4is_tcon6xrp, 'session_tokens', true); if (is_array($vwpalm4is_mxv1j6lnc) && count($vwpalm4is_mxv1j6lnc) > 1) { $vwpalm4is_g5l9_u = time();  $vwpalm4is_jwlbgat = 0; foreach($vwpalm4is_mxv1j6lnc as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_kh9vqi_6znd) { if ($vwpalm4is_kh9vqi_6znd['login'] > $vwpalm4is_jwlbgat) { $vwpalm4is_jwlbgat = $vwpalm4is_kh9vqi_6znd['login']; } }  foreach($vwpalm4is_mxv1j6lnc as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_kh9vqi_6znd) { if ($vwpalm4is_kh9vqi_6znd['login'] < $vwpalm4is_jwlbgat || $vwpalm4is_kh9vqi_6znd['expiration'] < $vwpalm4is_g5l9_u) { unset($vwpalm4is_mxv1j6lnc[$vwpalm4is_x3e6m_hobj]); } } update_user_meta($vwpalm4is_tcon6xrp, 'session_tokens', $vwpalm4is_mxv1j6lnc); } } function wpalm4is_hfr9iw_m0na3($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_hp41oja = false) { if (! is_array($vwpalm4is_hp41oja) ) { $vwpalm4is_hp41oja = array(); $vwpalm4is_hp41oja['memb_user']['Groups'] = ''; $vwpalm4is_hp41oja['memb_user']['membership_tags'] = ''; $vwpalm4is_hp41oja['memb_user']['membership_names'] = ''; $vwpalm4is_hp41oja['memb_user']['membership_level'] = 0; } if ($vwpalm4is_s13i75n4ph < 1) { return $vwpalm4is_hp41oja; } global $wpdb; $vwpalm4is_jbucldi1t7q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph, false); $this->doing_user_update = true; foreach ($vwpalm4is_jbucldi1t7q as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_kh9vqi_6znd) { if (false) {  } $vwpalm4is_hp41oja['memb_db_fields'][strtolower($vwpalm4is_x3e6m_hobj)] = $vwpalm4is_kh9vqi_6znd; $this->doing_user_update = false; } if (! empty($vwpalm4is_hp41oja['memb_db_fields']['groups']) ) { $vwpalm4is_hp41oja['memb_user']['Groups'] = $vwpalm4is_hp41oja['memb_db_fields']['groups']; $vwpalm4is_gf2m1t7v8nbz = explode(',', $vwpalm4is_hp41oja['memb_db_fields']['groups']); $vwpalm4is_raprue = wpalm4is_l9n25d::wpalm4is_d35w2jzaf(); $vwpalm4is_raprue = $vwpalm4is_raprue['mc']; $vwpalm4is_mqe2adg = array(); foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_agvwtn) { if (isset($vwpalm4is_raprue[$vwpalm4is_agvwtn]) ) { $vwpalm4is_ah356etf8[] = $vwpalm4is_raprue[$vwpalm4is_agvwtn]; } } if (! empty($vwpalm4is_ah356etf8) ) { $vwpalm4is_hp41oja['memb_user']['GroupNames'] = implode(',', $vwpalm4is_ah356etf8); } else { $vwpalm4is_hp41oja['memb_user']['GroupNames'] = ''; } unset($vwpalm4is_ah356etf8);  $vwpalm4is_ncp2rj9 = array(); $vwpalm4is_bnouftjc = array(); $vwpalm4is_hp41oja['memb_user']['membership_level'] = 0; $vwpalm4is_hp41oja['memb_user']['theme'] = ''; if (! isset($vwpalm4is_hp41oja['memb_user']['roles']) ) { $vwpalm4is_hp41oja['memb_user']['roles'] = ''; } $vwpalm4is_v52fwh0ovu = array(); if (is_array($this->options['memberships']) ) { foreach ($this->options['memberships'] as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_mp_ceis8) { if (in_array($vwpalm4is_vzoj7cv_rsly, $vwpalm4is_gf2m1t7v8nbz) && ! in_array($vwpalm4is_mp_ceis8['payf_id'], $vwpalm4is_gf2m1t7v8nbz) && ! in_array($vwpalm4is_mp_ceis8['cancel_id'], $vwpalm4is_gf2m1t7v8nbz) && ! in_array($vwpalm4is_mp_ceis8['suspend_id'], $vwpalm4is_gf2m1t7v8nbz) ) { if ($vwpalm4is_mp_ceis8['level'] >= $vwpalm4is_hp41oja['memb_user']['membership_level']) { $vwpalm4is_hp41oja['memb_user']['membership_level'] = $vwpalm4is_mp_ceis8['level']; $vwpalm4is_hp41oja['memb_user']['login_page'] = $vwpalm4is_mp_ceis8['login_page']; $vwpalm4is_hp41oja['memb_user']['logout_page'] = $vwpalm4is_mp_ceis8['logout_page'];  if (is_array($vwpalm4is_mp_ceis8['roles']) ) { $vwpalm4is_v52fwh0ovu = array_merge($vwpalm4is_v52fwh0ovu, $vwpalm4is_mp_ceis8['roles']); } $vwpalm4is_hp41oja['memb_user']['theme'] = isset($vwpalm4is_mp_ceis8['theme']) ? $vwpalm4is_mp_ceis8['theme'] : ''; $vwpalm4is_ncp2rj9[] = $vwpalm4is_vzoj7cv_rsly; $vwpalm4is_bnouftjc[] = $vwpalm4is_mp_ceis8['name']; } } if (count($vwpalm4is_ncp2rj9) > 0) { $vwpalm4is_hp41oja['memb_user']['membership_tags'] = implode(',', $vwpalm4is_ncp2rj9); $vwpalm4is_hp41oja['memb_user']['membership_names'] = implode(',', $vwpalm4is_bnouftjc); } } } if (! is_array($vwpalm4is_v52fwh0ovu) ) { $vwpalm4is_v52fwh0ovu = array(); } $vwpalm4is_hp41oja['memb_user']['roles'] = implode(',', array_unique($vwpalm4is_v52fwh0ovu) ); unset($vwpalm4is_v52fwh0ovu); } return $vwpalm4is_hp41oja; } function wpalm4is_ga2spw0ey() { unset($_SESSION['memb_user']); unset($_SESSION['memb_db_fields']); } function wpalm4is_pvab9fqcm($vwpalm4is_tcon6xrp = false, $vwpalm4is_s13i75n4ph = false) { global $wpdb; if (! headers_sent() && session_id() == '') { @session_start(); } if (! wpalm4is_rvrqgfe5ns_::wpalm4is_c8me3ltrxcn4() ) { return isset($_SESSION) ? $_SESSION : array(); } if (! $vwpalm4is_tcon6xrp && $vwpalm4is_s13i75n4ph) { $vwpalm4is_tcon6xrp = wpalm4is_bd5uye4ng3l::wpalm4is_v6egzl2n7($vwpalm4is_s13i75n4ph); } if (! $vwpalm4is_tcon6xrp) { $vwpalm4is_tcon6xrp = get_current_user_id(); } if ($vwpalm4is_tcon6xrp < 1) { return isset($_SESSION) ? $_SESSION : array(); } $vwpalm4is_b8a725ve14 = (bool) (get_current_user_id() === $vwpalm4is_tcon6xrp);  if ($vwpalm4is_b8a725ve14) { $vwpalm4is_hp41oja = isset($_SESSION) ? $_SESSION : array(); $vwpalm4is_hp41oja['memb_user'] = isset($_SESSION['memb_user']) ? $_SESSION['memb_user'] : array(); $vwpalm4is_s13i75n4ph = $this->wpalm4is_yjzkfc_npqw(); } else { $vwpalm4is_hp41oja = array(); unset($vwpalm4is_hp41oja['memb_user'], $vwpalm4is_hp41oja['memb_db_fields']); } if ($vwpalm4is_tcon6xrp) { $this->doing_user_update = true; delete_option('um_cache_userdata_' . $vwpalm4is_tcon6xrp); $this->wpalm4is_r54rie($vwpalm4is_tcon6xrp); $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp);  if (! empty($vwpalm4is_n_bsw6d3x->user_email) ) { $vwpalm4is_cbjka3o = $vwpalm4is_n_bsw6d3x->user_email; } else { $vwpalm4is_cbjka3o = $vwpalm4is_n_bsw6d3x->user_login; }     if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_n_bsw6d3x->ID); if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = (int) $this->wpalm4is_y5rp9h($vwpalm4is_cbjka3o); } } if ($vwpalm4is_b8a725ve14) { $this->wpalm4is_njoelpf8m6($vwpalm4is_s13i75n4ph); } $vwpalm4is_hp41oja['memb_user']['Id'] = $vwpalm4is_n_bsw6d3x->ID; $vwpalm4is_hp41oja['memb_user']['Email'] = $vwpalm4is_n_bsw6d3x->user_email; $vwpalm4is_hp41oja['memb_user']['FirstName'] = $vwpalm4is_n_bsw6d3x->user_firstname; $vwpalm4is_hp41oja['memb_user']['LastName'] = $vwpalm4is_n_bsw6d3x->user_lastname; $vwpalm4is_hp41oja['memb_user']['DisplayName'] = $vwpalm4is_n_bsw6d3x->display_name; $vwpalm4is_hp41oja['memb_user']['LoginName'] = $vwpalm4is_n_bsw6d3x->user_login; $vwpalm4is_hp41oja['memb_user']['source'] = 'local'; $vwpalm4is_hp41oja['memb_user']['languages'] = wpalm4is_lr1jic82xtbf::wpalm4is_t95h2e(); $vwpalm4is_hp41oja['memb_user']['session_id'] = session_id(); if (user_can($vwpalm4is_n_bsw6d3x, 'manage_options') ) { $vwpalm4is_hp41oja['memb_user']['source'] = 'local'; if ($vwpalm4is_b8a725ve14) { $_SESSION = $vwpalm4is_hp41oja; } return $vwpalm4is_hp41oja; } if (! isset($vwpalm4is_hp41oja['memb_user']['login']) ) { $vwpalm4is_hp41oja['memb_user']['login'] = time(); } if (! isset($vwpalm4is_hp41oja['memb_user']['nextupdate']) ) { $vwpalm4is_hp41oja['memb_user']['nextupdate'] = ''; } if ($vwpalm4is_s13i75n4ph > 0) { $this->wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph, $vwpalm4is_tcon6xrp); $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTS; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_jbucldi1t7q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph, false); if (is_array($vwpalm4is_jbucldi1t7q) && ! empty($vwpalm4is_jbucldi1t7q) ) { $vwpalm4is_hp41oja['memb_user']['source'] = 'infusionsoft'; if (! empty($this->options['settings']['sync_meta_updates']) ) { $vwpalm4is__mnral5zjy = $wpdb->usermeta; $vwpalm4is_li_ujaw7h = "memb\_%"; $vwpalm4is_cevdqnb5lzm = "SELECT `meta_key`, `meta_value` FROM {$vwpalm4is__mnral5zjy} WHERE `user_id` = {$vwpalm4is_tcon6xrp} AND `meta_key` LIKE '{$vwpalm4is_li_ujaw7h}' "; $vwpalm4is_y6sl01obhmy = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, OBJECT_K); } foreach ($vwpalm4is_jbucldi1t7q as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_kh9vqi_6znd) { if (! empty($this->options['settings']['sync_meta_updates']) ) { $vwpalm4is_i7b8ex4 = "memb_{$vwpalm4is_x3e6m_hobj}"; if (! isset($vwpalm4is_y6sl01obhmy[$vwpalm4is_i7b8ex4]->meta_value) || $vwpalm4is_y6sl01obhmy[$vwpalm4is_i7b8ex4]->meta_value <> $vwpalm4is_kh9vqi_6znd) { update_user_meta($vwpalm4is_tcon6xrp, $vwpalm4is_i7b8ex4, $vwpalm4is_kh9vqi_6znd); } } $vwpalm4is_hp41oja['memb_db_fields'][strtolower($vwpalm4is_x3e6m_hobj)] = $vwpalm4is_kh9vqi_6znd; }  wpalm4is_jhqro0jwe::wpalm4is_rmjbwqdzcx($vwpalm4is_jbucldi1t7q, $vwpalm4is_tcon6xrp); $this->doing_user_update = false;  $vwpalm4is_hp41oja['memb_user']['crm_id'] = $vwpalm4is_s13i75n4ph; $vwpalm4is_hp41oja['memb_user']['Groups'] = isset($vwpalm4is_hp41oja['memb_db_fields']['groups']) ? $vwpalm4is_hp41oja['memb_db_fields']['groups'] : ''; $vwpalm4is_hp41oja['memb_user']['payf_homepage'] = isset($vwpalm4is_hp41oja['memb_user']['payf_homepage']) ? $vwpalm4is_hp41oja['memb_user']['payf_homepage'] : 0; $vwpalm4is_hp41oja['memb_user']['susp_homepage'] = isset($vwpalm4is_hp41oja['memb_user']['susp_homepage']) ? $vwpalm4is_hp41oja['memb_user']['susp_homepage'] : 0; $vwpalm4is_hp41oja['memb_user']['canc_homepage'] = isset($vwpalm4is_hp41oja['memb_user']['canc_homepage']) ? $vwpalm4is_hp41oja['memb_user']['canc_homepage'] : 0; $vwpalm4is_hp41oja['memb_user']['membership_tags'] = ''; $vwpalm4is_hp41oja['memb_user']['membership_names'] = ''; $vwpalm4is_hp41oja['memb_user']['membership_level'] = 0; if (! empty($vwpalm4is_hp41oja['memb_db_fields']['groups']) ) { $vwpalm4is_hp41oja['memb_user']['Groups'] = $vwpalm4is_hp41oja['memb_db_fields']['groups']; $vwpalm4is_gf2m1t7v8nbz = explode(',', $vwpalm4is_hp41oja['memb_db_fields']['groups']); $vwpalm4is_raprue = wpalm4is_l9n25d::wpalm4is_d35w2jzaf(); $vwpalm4is_raprue = $vwpalm4is_raprue['mc']; $vwpalm4is_mqe2adg = array(); foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_vzoj7cv_rsly=>$tag) { if (isset($vwpalm4is_raprue[$tag]) ) { $tag_names[] = $vwpalm4is_raprue[$tag]; } } if (! empty($tag_names) ) { $vwpalm4is_hp41oja['memb_user']['GroupNames'] = implode(MEMBERIUM_DELIMITER, $tag_names); } else { $vwpalm4is_hp41oja['memb_user']['GroupNames'] = ''; } unset($tag_names);  $vwpalm4is_ncp2rj9 = array(); $vwpalm4is_bnouftjc = array(); $vwpalm4is_hp41oja['memb_user']['membership_level'] = 0; $vwpalm4is_hp41oja['memb_user']['theme'] = ''; $vwpalm4is_hp41oja['memb_user']['login_page'] = 0; $vwpalm4is_v52fwh0ovu = array(); $redirection_level = -1; if (! isset($vwpalm4is_hp41oja['memb_user']['roles']) ) { $vwpalm4is_hp41oja['memb_user']['roles'] = ''; } $redirection_level = -1; if (is_array($this->options['memberships']) ) { foreach ($this->options['memberships'] as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_mp_ceis8) { $vwpalm4is_mp_ceis8['susp_id'] = isset($vwpalm4is_mp_ceis8['susp_id']) ? $vwpalm4is_mp_ceis8['susp_id'] : 0; $vwpalm4is_mp_ceis8['canc_id'] = isset($vwpalm4is_mp_ceis8['canc_id']) ? $vwpalm4is_mp_ceis8['canc_id'] : 0; $vwpalm4is_mp_ceis8['payf_id'] = isset($vwpalm4is_mp_ceis8['payf_id']) ? $vwpalm4is_mp_ceis8['payf_id'] : 0; $vwpalm4is_mp_ceis8['addltag_ids'] = isset($vwpalm4is_mp_ceis8['addltag_ids']) ? $vwpalm4is_mp_ceis8['addltag_ids'] : ''; $has_primary_tag = in_array($vwpalm4is_vzoj7cv_rsly, $vwpalm4is_gf2m1t7v8nbz); $has_alt_tags = (bool) count(array_intersect($vwpalm4is_gf2m1t7v8nbz, explode(',', $vwpalm4is_mp_ceis8['addltag_ids']) ) ); $has_payf_tag = (bool) in_array($vwpalm4is_mp_ceis8['payf_id'], $vwpalm4is_gf2m1t7v8nbz); $has_susp_tag = (bool) in_array($vwpalm4is_mp_ceis8['suspend_id'], $vwpalm4is_gf2m1t7v8nbz); $has_canc_tag = (bool) in_array($vwpalm4is_mp_ceis8['cancel_id'], $vwpalm4is_gf2m1t7v8nbz);  if ($has_primary_tag || $has_alt_tags) { if ($has_payf_tag || $has_canc_tag || $has_susp_tag) { if (intval($vwpalm4is_mp_ceis8['login_redirect_priority']) >= $redirection_level) { if (empty($vwpalm4is_hp41oja['memb_user']['login_page']) ) { $vwpalm4is_hp41oja['memb_user']['login_page'] = $has_payf_tag ? $vwpalm4is_mp_ceis8['payf_homepage'] : $vwpalm4is_hp41oja['memb_user']['login_page']; $vwpalm4is_hp41oja['memb_user']['login_page'] = $has_susp_tag ? $vwpalm4is_mp_ceis8['susp_homepage'] : $vwpalm4is_hp41oja['memb_user']['login_page']; $vwpalm4is_hp41oja['memb_user']['login_page'] = $has_canc_tag ? $vwpalm4is_mp_ceis8['canc_homepage'] : $vwpalm4is_hp41oja['memb_user']['login_page']; } $redirection_level = isset($vwpalm4is_mp_ceis8['login_redirect_priority']) ? $vwpalm4is_mp_ceis8['login_redirect_priority'] : 0; } } else { if ($vwpalm4is_mp_ceis8['level'] >= $vwpalm4is_hp41oja['memb_user']['membership_level']) { if (is_array($vwpalm4is_mp_ceis8['roles']) && ! empty($vwpalm4is_mp_ceis8['roles']) ) { $vwpalm4is_v52fwh0ovu = array_merge($vwpalm4is_v52fwh0ovu, $vwpalm4is_mp_ceis8['roles']); } $vwpalm4is_hp41oja['memb_user']['theme'] = isset($vwpalm4is_mp_ceis8['theme']) ? $vwpalm4is_mp_ceis8['theme'] : ''; $vwpalm4is_ncp2rj9[] = $vwpalm4is_vzoj7cv_rsly; $vwpalm4is_bnouftjc[] = $vwpalm4is_mp_ceis8['name']; $vwpalm4is_hp41oja['memb_user']['membership_level'] = $vwpalm4is_mp_ceis8['level']; } if (intval($vwpalm4is_mp_ceis8['login_redirect_priority']) >= $redirection_level) { $vwpalm4is_hp41oja['memb_user']['login_page'] = isset($vwpalm4is_mp_ceis8['login_page']) ? $vwpalm4is_mp_ceis8['login_page'] : 0; $vwpalm4is_hp41oja['memb_user']['first_login_page'] = isset($vwpalm4is_mp_ceis8['first_login_page']) ? $vwpalm4is_mp_ceis8['first_login_page'] : 0; $vwpalm4is_hp41oja['memb_user']['logout_page'] = isset($vwpalm4is_mp_ceis8['logout_page']) ? $vwpalm4is_mp_ceis8['logout_page'] : 0; $redirection_level = isset($vwpalm4is_mp_ceis8['login_redirect_priority']) ? $vwpalm4is_mp_ceis8['login_redirect_priority'] : 0; } } } } if (count($vwpalm4is_ncp2rj9) > 0) { $vwpalm4is_hp41oja['memb_user']['membership_tags'] = implode(',', $vwpalm4is_ncp2rj9); $vwpalm4is_hp41oja['memb_user']['membership_names'] = implode(',', $vwpalm4is_bnouftjc); } unset($memberships, $vwpalm4is_mp_ceis8, $vwpalm4is_vzoj7cv_rsly, $redirection_level, $has_primary_tag, $has_alt_tags, $has_payf_tag, $has_susp_tag, $has_canc_tag, $has_list_id); } if (! is_array($vwpalm4is_v52fwh0ovu) ) { $vwpalm4is_v52fwh0ovu = array(); } $vwpalm4is_hp41oja['memb_user']['roles'] = implode(',', array_unique($vwpalm4is_v52fwh0ovu) ); unset($vwpalm4is_v52fwh0ovu); }  if (! empty($this->options['settings']['sync_tag_details']) ) { $vwpalm4is_cevdqnb5lzm = 'SELECT COUNT(*) FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `contactid` = ' . $vwpalm4is_s13i75n4ph . ';'; $vwpalm4is_hp41oja['memb_user']['tag_detail_count'] = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); } else { $vwpalm4is_hp41oja['memb_user']['tag_detail_count'] = 0; } if ($this->options['settings']['sync_ecommerce']) { $this->wpalm4is_eze0o74d1p($vwpalm4is_s13i75n4ph, true); }  if ($this->options['settings']['sync_affiliate']) { if (empty($vwpalm4is_hp41oja['memb_db_fields']['affiliate.id']) ) { $this->wpalm4is_l7_wr8($vwpalm4is_s13i75n4ph);  $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_cevdqnb5lzm = "
							SELECT
							`{$vwpalm4is_q35jf97eg4}_2`.`fieldname`,
							`{$vwpalm4is_q35jf97eg4}_2`.`value`
							FROM
							`{$vwpalm4is_q35jf97eg4}`,
							`{$vwpalm4is_q35jf97eg4}` AS `{$vwpalm4is_q35jf97eg4}_2`
							WHERE	`{$vwpalm4is_q35jf97eg4}`.`appname`  = '{$vwpalm4is_dd4j20qwmn_}'
							AND 	`{$vwpalm4is_q35jf97eg4}`.`fieldname` = 'ContactId'
							AND		`{$vwpalm4is_q35jf97eg4}`.`value`     = %d
							AND		`{$vwpalm4is_q35jf97eg4}_2`.`id`      = {$vwpalm4is_q35jf97eg4}.id
							AND		`{$vwpalm4is_q35jf97eg4}_2`.`appname` = '{$vwpalm4is_dd4j20qwmn_}'; "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph); $vwpalm4is_kasrikuc = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_N); foreach ($vwpalm4is_kasrikuc as $vwpalm4is_hs69ar) { $vwpalm4is_hp41oja['memb_db_fields']['affiliate.' . strtolower($vwpalm4is_hs69ar[0])] = $vwpalm4is_hs69ar[1]; } $vwpalm4is_hp41oja['memb_db_fields']['affiliate.id'] = (isset($vwpalm4is_hp41oja['memb_db_fields']['affiliate.id']) ) ? $vwpalm4is_hp41oja['memb_db_fields']['affiliate.id'] : 0; } } }  if ($this->options['settings']['sync_affiliate']) { $vwpalm4is_fawi64knts = $this->wpalm4is_bkfn2wgx6($vwpalm4is_s13i75n4ph); if ($vwpalm4is_fawi64knts > 0) { $vwpalm4is_epgcir953x = $this->wpalm4is_f_l4k7($vwpalm4is_fawi64knts); $vwpalm4is_bs4egmi = isset($vwpalm4is_epgcir953x['ContactId']) ? (int) $vwpalm4is_epgcir953x['ContactId'] : 0; } $vwpalm4is_hp41oja['memb_user']['referral_contact_id'] = isset($vwpalm4is_bs4egmi) ? $vwpalm4is_bs4egmi : 0; } else { $vwpalm4is_hp41oja['memb_user']['referral_contact_id'] = 0; } } } else {  } if (isset($vwpalm4is_n_bsw6d3x) && is_a($vwpalm4is_n_bsw6d3x, 'WP_User') ) { $this->wpalm4is_gl1wt2xm9ea($vwpalm4is_s13i75n4ph); $vwpalm4is_hp41oja = apply_filters('memberium_session_filter', $vwpalm4is_hp41oja); $vwpalm4is_hp41oja = $this->wpalm4is_rukhlszwi96($vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja); do_action('memberium_session_regenerated', $vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja);  $this->wpalm4is_i071fei_($vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja); $this->wpalm4is_w8qh47bm15u($vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja); if (isset($vwpalm4is_hp41oja['memb_user']['roles']) ) { $this->wpalm4is_jbytljxa9v($vwpalm4is_hp41oja['memb_user']['roles'], $vwpalm4is_tcon6xrp); } do_action('memberium_session_created', $vwpalm4is_hp41oja);  } $this->doing_user_update = false; return $vwpalm4is_hp41oja; } function wpalm4is_v_6dobvn07t($vwpalm4is_zkof17aryg = false) { if ($vwpalm4is_zkof17aryg) { return $this->options['memberships']; } else { $vwpalm4is_la4pzw = array(); foreach($this->options['memberships'] as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_mp_ceis8) { $vwpalm4is_la4pzw[] = $vwpalm4is_mp_ceis8[$vwpalm4is_gtyqfor0c8ib]; } return $vwpalm4is_la4pzw; } } private function wpalm4is_rukhlszwi96($vwpalm4is_tcon6xrp = 0, $vwpalm4is_hp41oja = array() ) {  $vwpalm4is_f_cfqo = get_user_meta($vwpalm4is_tcon6xrp, 'memberium_issue_subs', true); $vwpalm4is_g5l9_u = time(); if (is_array($vwpalm4is_f_cfqo) ) { foreach($vwpalm4is_f_cfqo as $vwpalm4is_rgln0x3j) { $vwpalm4is_v71grxf2ep = $vwpalm4is_rgln0x3j['channel']; $vwpalm4is_pk0jirn = $vwpalm4is_rgln0x3j['cat_id']; $vwpalm4is_uitzw2av76h = $vwpalm4is_rgln0x3j['tagcount']; $vwpalm4is_rh4w1zudfq9 = $vwpalm4is_rgln0x3j['start_time']; $vwpalm4is_ii5uow = $vwpalm4is_rgln0x3j['date_format']; while ($vwpalm4is_rh4w1zudfq9 < $vwpalm4is_g5l9_u) { } } }   return $vwpalm4is_hp41oja; } function wpalm4is_r54rie($vwpalm4is_tcon6xrp = 0) { if (is_super_admin() ) { return; } global $wpdb; $vwpalm4is_tcon6xrp = (int) $vwpalm4is_tcon6xrp; if ($vwpalm4is_tcon6xrp == 0){ $vwpalm4is_tcon6xrp = isset($_SESSION['memb_user']['Id']) ? $_SESSION['memb_user']['Id'] : get_current_user_id(); } if ($vwpalm4is_tcon6xrp > 0) { $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp); $vwpalm4is_wjv59cdzuoy = array_filter(explode(',', get_user_meta($vwpalm4is_tcon6xrp, 'memberium_roles', true) ) );  foreach($vwpalm4is_wjv59cdzuoy as $vwpalm4is_vhylij7_3) { if (! empty($vwpalm4is_vhylij7_3) ) { $vwpalm4is_n_bsw6d3x->remove_role($vwpalm4is_vhylij7_3); } } update_user_meta($vwpalm4is_tcon6xrp, 'memberium_roles', ''); } } function wpalm4is_i071fei_($vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja) { if (! function_exists('Sensei') ) { return; } global $wpdb;  $vwpalm4is_kiwhb_v27 = $wpdb->posts; $vwpalm4is_u49acq = $wpdb->postmeta; $vwpalm4is_cevdqnb5lzm = "SELECT ID, meta_value FROM {$vwpalm4is_kiwhb_v27}, {$vwpalm4is_u49acq} WHERE post_status = 'publish' AND post_type = 'course' AND  post_id = ID AND meta_key = '_is4wp_learndash_autoenroll' AND meta_value > '' "; $vwpalm4is_uviqodtg6b = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); if (is_array($vwpalm4is_uviqodtg6b) && ! empty($vwpalm4is_uviqodtg6b) ) { foreach ($vwpalm4is_uviqodtg6b as $vwpalm4is_sxkc2voun) { $vwpalm4is_ofnwy72 = wpalm4is_l9n25d::wpalm4is_vodyxmki9r($vwpalm4is_sxkc2voun['meta_value'], $vwpalm4is_hp41oja); if ($vwpalm4is_ofnwy72) { Sensei_Utils::user_start_course($vwpalm4is_tcon6xrp, $vwpalm4is_sxkc2voun['ID']); } if (! $vwpalm4is_ofnwy72) { Sensei_Utils::sensei_remove_user_from_course($vwpalm4is_sxkc2voun['ID'], $vwpalm4is_tcon6xrp); } } } } function wpalm4is_w8qh47bm15u($vwpalm4is_tcon6xrp, $vwpalm4is_hp41oja) { if (! function_exists('WPCW_courses_syncUserAccess') ) { return; } $vwpalm4is_s6eb0ytw = get_option('memberium_wpcw', array() ); $vwpalm4is_s6eb0ytw = isset($vwpalm4is_s6eb0ytw['courses']['access_tags']) ? $vwpalm4is_s6eb0ytw['courses']['access_tags'] : array(); $vwpalm4is_q4xpfeuh = WPCW_users_getUserCourseList($vwpalm4is_tcon6xrp); $vwpalm4is_hlf705pd4 = array();  foreach($vwpalm4is_q4xpfeuh as $vwpalm4is_ikcmtds4qzr6) { $vwpalm4is_wn5v_s4u = $vwpalm4is_ikcmtds4qzr6->course_id; $vwpalm4is_lw8u4ckm5air = isset($vwpalm4is_s6eb0ytw[$vwpalm4is_wn5v_s4u]) ? $vwpalm4is_s6eb0ytw[$vwpalm4is_wn5v_s4u] : ''; if ($vwpalm4is_ikcmtds4qzr6->course_opt_user_access == 'default_show') { $vwpalm4is_hlf705pd4[] = $vwpalm4is_wn5v_s4u; } elseif (! empty($vwpalm4is_lw8u4ckm5air) ) { if (wpalm4is_l9n25d::wpalm4is_vodyxmki9r($vwpalm4is_lw8u4ckm5air, $vwpalm4is_hp41oja) ) { $vwpalm4is_hlf705pd4[] = $vwpalm4is_wn5v_s4u; } } } foreach($vwpalm4is_s6eb0ytw as $vwpalm4is_wn5v_s4u => $vwpalm4is_lw8u4ckm5air) { if (wpalm4is_l9n25d::wpalm4is_vodyxmki9r($vwpalm4is_lw8u4ckm5air, $vwpalm4is_hp41oja) ) { $vwpalm4is_hlf705pd4[] = $vwpalm4is_wn5v_s4u; } }  $vwpalm4is_hlf705pd4 = array_unique($vwpalm4is_hlf705pd4); WPCW_courses_syncUserAccess($vwpalm4is_tcon6xrp, $vwpalm4is_hlf705pd4, 'sync'); } function wpalm4is_tfpbos($vwpalm4is_tcon6xrp) { global $wpdb; $vwpalm4is_tcon6xrp = (int) $vwpalm4is_tcon6xrp; if ($vwpalm4is_tcon6xrp == 0){ $vwpalm4is_tcon6xrp = isset($_SESSION['memb_user']['Id']) ? $_SESSION['memb_user']['Id'] : get_current_user_id(); $vwpalm4is_jzuoler9cn = true; } else { $vwpalm4is_jzuoler9cn = false; } } function wpalm4is_jbytljxa9v($vwpalm4is_qstn5y3x4k = array(), $vwpalm4is_tcon6xrp = 0) { global $wpdb; if (is_string($vwpalm4is_qstn5y3x4k) ) { $vwpalm4is_qstn5y3x4k = array_filter(array_map('trim', explode(',', $vwpalm4is_qstn5y3x4k) ) ); } if ($vwpalm4is_tcon6xrp == 0){ $vwpalm4is_tcon6xrp = isset($_SESSION['memb_user']['Id']) ? $_SESSION['memb_user']['Id'] : get_current_user_id(); } if (empty($vwpalm4is_qstn5y3x4k) && isset($_SESSION['memb_user']['roles']) ) { $vwpalm4is_qstn5y3x4k = array_filter(explode(',', $_SESSION['memb_user']['roles']) ); } $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp); if (method_exists($vwpalm4is_n_bsw6d3x, 'add_role') ) { $vwpalm4is_rm5g_npil = strval(get_user_meta($vwpalm4is_tcon6xrp, 'memberium_roles', true) ); if ($vwpalm4is_rm5g_npil > '') { $vwpalm4is_rm5g_npil = array_filter(explode(',', $vwpalm4is_rm5g_npil) ); } else { $vwpalm4is_rm5g_npil = array(); } $vwpalm4is_apvjf1 = $vwpalm4is_qstn5y3x4k; $vwpalm4is_lu9mfac_8 = array();  foreach($vwpalm4is_rm5g_npil as $vwpalm4is_vhylij7_3) { if (! empty($vwpalm4is_vhylij7_3) ) { $vwpalm4is_n_bsw6d3x->remove_role($vwpalm4is_vhylij7_3); } }   if (is_array($vwpalm4is_apvjf1) && ! empty($vwpalm4is_apvjf1) ) { $vwpalm4is_vlc793421 = array_unique($vwpalm4is_apvjf1); $vwpalm4is_tn6j5wk4u = array(); if (! empty($vwpalm4is_vlc793421) ) { foreach($vwpalm4is_vlc793421 as $vwpalm4is_vhylij7_3) { if (! in_array($vwpalm4is_vhylij7_3, $vwpalm4is_n_bsw6d3x->roles) ) { $vwpalm4is_tn6j5wk4u[] = $vwpalm4is_vhylij7_3; $vwpalm4is_n_bsw6d3x->add_role($vwpalm4is_vhylij7_3); } } update_user_meta($vwpalm4is_tcon6xrp, 'memberium_roles', implode(',', $vwpalm4is_tn6j5wk4u) ); } } }  } function wpalm4is_x7wf3i4cyp($vwpalm4is_s13i75n4ph = 0) { if ($vwpalm4is_s13i75n4ph == 0 || wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() == $vwpalm4is_s13i75n4ph) {  $vwpalm4is_jzuoler9cn = true; $vwpalm4is_gf2m1t7v8nbz = explode(',', wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups') ); } else {  $vwpalm4is_jzuoler9cn = false; $vwpalm4is_jbucldi1t7q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph, true); $vwpalm4is_gf2m1t7v8nbz = explode(',', empty($vwpalm4is_jbucldi1t7q['groups']) ? '' : $vwpalm4is_jbucldi1t7q['groups']); } $vwpalm4is_ukra4p = array(); $vwpalm4is_ncp2rj9 = array(); $vwpalm4is_bnouftjc = array(); $vwpalm4is_y1jnciaz0fk = ''; $vwpalm4is_acedl4 = 0; $vwpalm4is_ls9xak = ''; $vwpalm4is_xwpbr5 = ''; foreach ( (array) $this->options['memberships'] as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_mp_ceis8) { $vwpalm4is_rx7pvd = false;  if (in_array($vwpalm4is_vzoj7cv_rsly, $vwpalm4is_gf2m1t7v8nbz) && ! in_array($vwpalm4is_mp_ceis8['payf_id'], $vwpalm4is_gf2m1t7v8nbz) && ! in_array($vwpalm4is_mp_ceis8['cancel_id'], $vwpalm4is_gf2m1t7v8nbz) && ! in_array($vwpalm4is_mp_ceis8['suspend_id'], $vwpalm4is_gf2m1t7v8nbz) ) { $vwpalm4is_rx7pvd = true; }   if ($vwpalm4is_rx7pvd) { $vwpalm4is_acedl4 = ($vwpalm4is_mp_ceis8['level'] > $vwpalm4is_acedl4 ? $vwpalm4is_mp_ceis8['level'] : $vwpalm4is_acedl4); $vwpalm4is_ncp2rj9[] = $vwpalm4is_vzoj7cv_rsly; $vwpalm4is_bnouftjc[] = $vwpalm4is_mp_ceis8['name']; $vwpalm4is_r6afj1lo4i[] = implode(',', isset($vwpalm4is_mp_ceis8['roles']) ? $vwpalm4is_mp_ceis8['roles'] : array() ); } } if (count($vwpalm4is_ncp2rj9) > 0) { $vwpalm4is_y1jnciaz0fk = implode(',', $vwpalm4is_ncp2rj9); $vwpalm4is_ls9xak = implode(',', $vwpalm4is_bnouftjc); $vwpalm4is_xwpbr5 = trim(implode(',', $vwpalm4is_r6afj1lo4i), ','); } if ($vwpalm4is_jzuoler9cn) { $_SESSION['memb_user']['membership_level'] = $vwpalm4is_acedl4; $_SESSION['memb_user']['membership_tags'] = $vwpalm4is_y1jnciaz0fk; $_SESSION['memb_user']['membership_names'] = $vwpalm4is_ls9xak; } $vwpalm4is_ukra4p['membership_level'] = $vwpalm4is_acedl4; $vwpalm4is_ukra4p['membership_tags'] = $vwpalm4is_y1jnciaz0fk; $vwpalm4is_ukra4p['membership_names'] = $vwpalm4is_ls9xak; $vwpalm4is_ukra4p['roles'] = $vwpalm4is_xwpbr5; return $vwpalm4is_ukra4p; } function wpalm4is_t3sq20e9dwiy($vwpalm4is_z3qlki = 20) { global $wpdb; $vwpalm4is_z3qlki = (int) $vwpalm4is_z3qlki; $vwpalm4is_cevdqnb5lzm = "SELECT {$wpdb->users}.*, {$wpdb->usermeta}.meta_key FROM {$wpdb->users} LEFT OUTER JOIN {$wpdb->usermeta} ON ({$wpdb->usermeta}.user_id = {$wpdb->users}.ID AND {$wpdb->usermeta}.meta_key = 'infusionsoft_user_id') WHERE {$wpdb->usermeta}.meta_key IS NULL LIMIT {$vwpalm4is_z3qlki};";  $vwpalm4is_cevdqnb5lzm = "SELECT {$wpdb->users}.* FROM {$wpdb->users} LEFT OUTER JOIN {$wpdb->usermeta} ON ({$wpdb->usermeta}.user_id = {$wpdb->users}.ID AND {$wpdb->usermeta}.meta_key = 'infusionsoft_user_id') WHERE {$wpdb->usermeta}.meta_key IS NULL LIMIT {$vwpalm4is_z3qlki};";  $vwpalm4is_kzbf_tguy6h = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); foreach($vwpalm4is_kzbf_tguy6h as $vwpalm4is_n_bsw6d3x) {  $vwpalm4is_jbucldi1t7q = array(); $vwpalm4is_jbucldi1t7q['Email'] = $vwpalm4is_n_bsw6d3x['user_email']; $vwpalm4is_jbucldi1t7q['Leadsource'] = 'Memberium User Sync'; if (! empty($vwpalm4is_n_bsw6d3x['user_url']) ) { $vwpalm4is_jbucldi1t7q['Website'] = $vwpalm4is_n_bsw6d3x['user_url']; } if (! empty($vwpalm4is_n_bsw6d3x['user_nicename']) ) { $vwpalm4is_jbucldi1t7q['Nickname'] = $vwpalm4is_n_bsw6d3x['user_nicename']; } $vwpalm4is_cevdqnb5lzm = "SELECT {$wpdb->usermeta}.meta_key, {$wpdb->usermeta}.meta_value FROM {$wpdb->usermeta} WHERE user_id = {$vwpalm4is_n_bsw6d3x['ID']};"; $vwpalm4is_ougfb1hd = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); $vwpalm4is_st3el2r8agm = wpalm4is_l9n25d::wpalm4is_s2ozcmt(); foreach($vwpalm4is_ougfb1hd as $vwpalm4is_p536eja) { foreach ($vwpalm4is_st3el2r8agm as $vwpalm4is_dtrw94gx=>$vwpalm4is_dv1ci_n5m7pa) { if ($vwpalm4is_p536eja['meta_key'] == $vwpalm4is_dtrw94gx && ! empty($vwpalm4is_p536eja['meta_value']) ) { $vwpalm4is_jbucldi1t7q[$vwpalm4is_dv1ci_n5m7pa] = $vwpalm4is_p536eja['meta_value']; } } } if (isset($vwpalm4is_jbucldi1t7q['Country']) ) { $vwpalm4is_jbucldi1t7q['Country'] = wpalm4is_f3tlx_ad::wpalm4is_tzkib7q($vwpalm4is_jbucldi1t7q['Country']); } if (isset($vwpalm4is_jbucldi1t7q['Country2']) ) { $vwpalm4is_jbucldi1t7q['Country2'] = wpalm4is_f3tlx_ad::wpalm4is_tzkib7q($vwpalm4is_jbucldi1t7q['Country2']); } if (isset($vwpalm4is_jbucldi1t7q['Country3']) ) { $vwpalm4is_jbucldi1t7q['Country3'] = wpalm4is_f3tlx_ad::wpalm4is_tzkib7q($vwpalm4is_jbucldi1t7q['Country3']); } set_time_limit(30); $vwpalm4is_s13i75n4ph = $this->isdk->addWithDupCheck($vwpalm4is_jbucldi1t7q, 'Email'); $this->isdk->optin($vwpalm4is_jbucldi1t7q['Email'], 'Memberium User Sync'); sleep(1); $this->wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph, $vwpalm4is_n_bsw6d3x['ID']); } if ($vwpalm4is_i1sqefoxk && (count($vwpalm4is_kzbf_tguy6h) == $vwpalm4is_z3qlki) ) { header('Location: ' . $_SERVER['REQUEST_URI']); echo '<meta http-equiv="refresh" content="1;URL=\'"', $_SERVER['REQUEST_URI'], '\'" /> '; exit; } }  function wpalm4is_vsrdp5($vwpalm4is_s13i75n4ph, $vwpalm4is_iomhdlzi73g5, $vwpalm4is_yh0x3jn5tkq = false) { foreach($vwpalm4is_iomhdlzi73g5 as $vwpalm4is_zx43rky_j => $vwpalm4is_fnw9l_u) { $this->wpalm4is_wvcz6opb($vwpalm4is_zx43rky_j, $vwpalm4is_fnw9l_u, $vwpalm4is_s13i75n4ph); } if ($vwpalm4is_yh0x3jn5tkq) { $this->wpalm4is_bd51prj_n9(); if ($vwpalm4is_s13i75n4ph == $this->wpalm4is_yglaxnp9hw() ) { $_SESSION = $this->wpalm4is_pvab9fqcm(); } } } function wpalm4is_wvcz6opb($vwpalm4is_zx43rky_j, $vwpalm4is_fnw9l_u, $vwpalm4is_s13i75n4ph = 0) { global $wpdb; if (! $vwpalm4is_s13i75n4ph && $this->wpalm4is_yglaxnp9hw() > 0) { $vwpalm4is_s13i75n4ph = $this->wpalm4is_yglaxnp9hw(); } if (! $vwpalm4is_s13i75n4ph) { return false; } $this->dirty_contacts[$vwpalm4is_s13i75n4ph][$vwpalm4is_zx43rky_j] = $vwpalm4is_fnw9l_u;  $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ai7v5m = array( 'id' => $vwpalm4is_s13i75n4ph, 'appname' => $vwpalm4is_dd4j20qwmn_, 'fieldname' => $vwpalm4is_zx43rky_j, 'value' => $vwpalm4is_fnw9l_u ); $vwpalm4is_io7yae = array( '%d', '%s', '%s', '%s' ); $wpdb->replace(MEMBERIUM_DB_CONTACTS, $vwpalm4is_ai7v5m, $vwpalm4is_io7yae);  $vwpalm4is_o70_tv = strtolower($vwpalm4is_zx43rky_j); if ($vwpalm4is_s13i75n4ph == wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() ) { wpalm4is_xamhc3q6o::wpalm4is_n8bsagjurz5y($vwpalm4is_o70_tv, $vwpalm4is_fnw9l_u); } return true; } function wpalm4is_m0poxmrk5shj($vwpalm4is_tcon6xrp, $vwpalm4is_dzqjf460, $vwpalm4is_s13i75n4ph = 0, $vwpalm4is_hqlb_swpu = false) { global $wpdb; $vwpalm4is_dzqjf460 = strtolower(trim($vwpalm4is_dzqjf460) ); if ($vwpalm4is_tcon6xrp < 1 || empty($vwpalm4is_dzqjf460) ) { return false; } if ($vwpalm4is_s13i75n4ph) { update_user_meta($vwpalm4is_tcon6xrp, 'infusionsoft_user_id', $vwpalm4is_s13i75n4ph); }  $vwpalm4is_cevdqnb5lzm = "SELECT COUNT(`ID`) FROM `{$wpdb->users}` WHERE (`user_login` = %s OR `user_email` = %s) AND `ID` <> %d"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, sanitize_user($vwpalm4is_dzqjf460, true), $vwpalm4is_dzqjf460, $vwpalm4is_tcon6xrp); $vwpalm4is_rzvh8sbjwen = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_rzvh8sbjwen) { return false; }  $vwpalm4is_mq3gv6sdxeu = array('Id', 'Email', 'EmailAddress2', 'EmailAddress3'); $vwpalm4is_jo91quzgpx0 = $this->isdk->findByEmail($vwpalm4is_dzqjf460, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_jo91quzgpx0) ) { foreach($vwpalm4is_jo91quzgpx0 as $vwpalm4is_x3e6m_hobj => $vwpalm4is_jbucldi1t7q) { if ($vwpalm4is_jbucldi1t7q['Id'] == $vwpalm4is_s13i75n4ph) { unset($vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]); } } } if (! empty($vwpalm4is_jo91quzgpx0) && is_array($vwpalm4is_jo91quzgpx0) ) { return false; } $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp); $vwpalm4is_va2ithfpq8_ = strtolower($vwpalm4is_n_bsw6d3x->user_email); if (false && $_SERVER['REMOTE_ADDR'] == '71.92.64.210') { echo __LINE__, ' @ ', __FILE__, '<br>'; echo '<pre>elv_user_id = ', print_r($vwpalm4is_tcon6xrp, true), '</pre>'; echo '<pre>elv_email = ', print_r($vwpalm4is_dzqjf460, true), '</pre>'; echo '<pre>elv_contact_id = ', var_dump($vwpalm4is_s13i75n4ph), '</pre>'; echo '<pre>elv_force_username = ', var_dump($vwpalm4is_hqlb_swpu), '</pre>'; die(); }  if ($vwpalm4is_hqlb_swpu) { $vwpalm4is_cevdqnb5lzm = "UPDATE `{$wpdb->users}` SET `user_login` = %s , `user_email` = %s WHERE `ID` = %d "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, sanitize_user($vwpalm4is_dzqjf460, true), $vwpalm4is_dzqjf460, $vwpalm4is_tcon6xrp); } else { $vwpalm4is_cevdqnb5lzm = "UPDATE `{$wpdb->users}` SET `user_email` = %s WHERE `ID` = %d "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dzqjf460, $vwpalm4is_tcon6xrp); } $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm);  unset($vwpalm4is_rzvh8sbjwen, $vwpalm4is_cevdqnb5lzm); if (class_exists('WooCommerce') ) { update_user_meta($vwpalm4is_tcon6xrp, 'billing_email', $vwpalm4is_dzqjf460); }  $vwpalm4is_guh4pc3x = array( 'Email' => $vwpalm4is_dzqjf460 ); if ($vwpalm4is_s13i75n4ph > 0) { $vwpalm4is_ukra4p = $this->isdk->updateCon( (int) $vwpalm4is_s13i75n4ph, $vwpalm4is_guh4pc3x);  } else { $vwpalm4is_mq3gv6sdxeu = array('Id'); $vwpalm4is_fqzgw57 = array( 'Email' => $vwpalm4is_va2ithfpq8_, ); $vwpalm4is_jo91quzgpx0 = $this->isdk->dsQuery('Contact' ,1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_jo91quzgpx0) && ! empty($vwpalm4is_jo91quzgpx0) ) { foreach($vwpalm4is_jo91quzgpx0 as $vwpalm4is_jbucldi1t7q) { if ($vwpalm4is_jbucldi1t7q['Id']) { $vwpalm4is_ukra4p = $this->isdk->updateCon($vwpalm4is_jbucldi1t7q['Id'], $vwpalm4is_guh4pc3x);  } } } } $this->isdk->optIn($vwpalm4is_dzqjf460, 'Memberium Subscriber Email Change'); $vwpalm4is_g87myl0d = array( 'contact_id' => $vwpalm4is_s13i75n4ph, 'cache_ttl' => 0, ); $this->wpalm4is_r6wmi2bj81l9($vwpalm4is_g87myl0d); do_action('memberium_email_change', $vwpalm4is_s13i75n4ph, $vwpalm4is_tcon6xrp, $vwpalm4is_va2ithfpq8_, $vwpalm4is_dzqjf460); return true; } function wpalm4is_mel79kz2sa($vwpalm4is_t15xztu_wb2, $vwpalm4is_s13i75n4ph = false) { if (! $this->license_status) { return false; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = (int) $this->wpalm4is_yglaxnp9hw(); if (! $vwpalm4is_s13i75n4ph) { return false; } } $vwpalm4is_tcon6xrp = wpalm4is_bd5uye4ng3l::wpalm4is_v6egzl2n7($vwpalm4is_s13i75n4ph); if (! $vwpalm4is_tcon6xrp) { return false; } if (strpos($vwpalm4is_t15xztu_wb2, '\\') !== false) { return false; } $vwpalm4is_t15xztu_wb2 = trim($vwpalm4is_t15xztu_wb2); if (empty($vwpalm4is_t15xztu_wb2) ) { return false; } $vwpalm4is_cnivz3qbu = true;  $vwpalm4is_hafks9j1 = $_SESSION['memb_user']['LoginName']; $vwpalm4is_slbpgcf = wp_hash_password($vwpalm4is_t15xztu_wb2); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); if ($_SESSION['memb_user']['source'] != 'infusionsoft') { return false; } if (strlen($vwpalm4is_t15xztu_wb2) < $this->options['settings']['min_password_length']) { return false; } global $i2sdk, $wpdb;  if (empty($this->options['settings']['local_auth_only']) ) { $vwpalm4is_guh4pc3x = array( $this->options['settings']['password_field'] => $vwpalm4is_t15xztu_wb2 ); $this->isdk->updateCon($vwpalm4is_s13i75n4ph, $vwpalm4is_guh4pc3x);   $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTS; $vwpalm4is_urzq9h = $this->options['settings']['password_field']; $vwpalm4is_cevdqnb5lzm = "UPDATE {$vwpalm4is_q35jf97eg4} SET `value` = '%s' WHERE id = %d AND `appname` = '%s' AND `fieldname` = '%s'; "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_t15xztu_wb2, $vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_urzq9h); $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm); $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); }  $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field'); wpalm4is_xamhc3q6o::wpalm4is_n8bsagjurz5y($vwpalm4is_urzq9h, $vwpalm4is_t15xztu_wb2);   $wpdb->query("UPDATE `" . $wpdb->users . "` SET `user_pass` = '{$vwpalm4is_slbpgcf}' WHERE `ID` = '{$vwpalm4is_tcon6xrp}';"); wp_cache_delete($vwpalm4is_tcon6xrp, 'users'); wp_cache_delete($vwpalm4is_hafks9j1, 'userlogins'); $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp); $this->disable_login_redirect = true; if ($vwpalm4is_n_bsw6d3x && $vwpalm4is_tcon6xrp == get_current_user_id() ) { wp_set_current_user($vwpalm4is_tcon6xrp); wp_set_auth_cookie($vwpalm4is_tcon6xrp); $this->wpalm4is_pvab9fqcm(); } $this->disable_login_redirect = false; return true; }  function wpalm4is_i6mowsz12gln($vwpalm4is_h2k0q3v8_6n = false, $vwpalm4is_a_by5l4jxn = false) { $vwpalm4is_h2k0q3v8_6n = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'min_password_length', 8); $vwpalm4is_a_by5l4jxn = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_strength', 0); $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field', 'Password'); if ($vwpalm4is_h2k0q3v8_6n < 4) { $vwpalm4is_b4gblqh8yo = 8; } if ($vwpalm4is_urzq9h == 'Password' && $vwpalm4is_h2k0q3v8_6n > 20) { $vwpalm4is_h2k0q3v8_6n = 20; } $vwpalm4is_q_6n5ut4mbik = 'aeuy'; $vwpalm4is_zhwtvfocyjs = 'bdghjmnpqrstvz'; $vwpalm4is_qjxhpqu72 = ''; $vwpalm4is_xyf9tvd3rg = ''; if ($vwpalm4is_a_by5l4jxn > 0) { $vwpalm4is_zhwtvfocyjs .= 'BDGHJLMNPQRSTVWXZ'; } if ($vwpalm4is_a_by5l4jxn > 1) { $vwpalm4is_q_6n5ut4mbik .= "AEUY"; } if ($vwpalm4is_a_by5l4jxn > 2) {  $vwpalm4is_xyf9tvd3rg = '23456789'; } if ($vwpalm4is_a_by5l4jxn > 3) {  $vwpalm4is_qjxhpqu72 = '@#$%'; } $vwpalm4is_a_by5l4jxn = max($vwpalm4is_a_by5l4jxn, 2); $vwpalm4is_t15xztu_wb2 = ''; $vwpalm4is_zchwv9 = time() % $vwpalm4is_a_by5l4jxn; for ($i = 0; $i < $vwpalm4is_h2k0q3v8_6n; $i++) { $vwpalm4is_zchwv9 = mt_rand(1, 100) % $vwpalm4is_a_by5l4jxn; if ($vwpalm4is_zchwv9 == 0) { $vwpalm4is_t15xztu_wb2 .= $vwpalm4is_zhwtvfocyjs[(rand() % strlen($vwpalm4is_zhwtvfocyjs) )];  } elseif ($vwpalm4is_zchwv9 == 1) { $vwpalm4is_t15xztu_wb2 .= $vwpalm4is_q_6n5ut4mbik[(rand() % strlen($vwpalm4is_q_6n5ut4mbik) )];  } elseif ($vwpalm4is_zchwv9 == 2 && $vwpalm4is_a_by5l4jxn > 2) { $vwpalm4is_t15xztu_wb2 .= $vwpalm4is_xyf9tvd3rg[(rand() % strlen($vwpalm4is_xyf9tvd3rg) )];  } elseif ($vwpalm4is_zchwv9 == 3 && $vwpalm4is_a_by5l4jxn > 3) { $vwpalm4is_t15xztu_wb2 .= $vwpalm4is_qjxhpqu72[(rand() % strlen($vwpalm4is_qjxhpqu72) )];  } } return $vwpalm4is_t15xztu_wb2; } function wpalm4is_ts_b9zir0of2($vwpalm4is_g87myl0d) { $vwpalm4is_vx_n8e7hdrbo = array( 'contact_id' => 0, 'user_id' => 0, 'contact' => array(), 'user' => false, ); $vwpalm4is_g87myl0d = wp_parse_args ($vwpalm4is_g87myl0d, $vwpalm4is_vx_n8e7hdrbo); if (! empty($vwpalm4is_g87myl0d['contact_id' ]) ) { $vwpalm4is_g87myl0d['contact'] = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($contact); } $vwpalm4is_g87myl0d['contact'] = array_change_key_case($vwpalm4is_g87myl0d['contact'], CASE_LOWER); if (! empty ($vwpalm4is_g87myl0d['user_id']) ) { $vwpalm4is_g87myl0d['user'] = get_user_by('id', $vwpalm4is_g87myl0d['user_id']); } if ($vwpalm4is_g87myl0d['user']) { $vwpalm4is_csc29oe_6mn = $vwpalm4is_g87myl0d['user']->display_name; } else { $vwpalm4is_csc29oe_6mn = ''; } $vwpalm4is_fxavjf2 = $this->options['settings']['displayname_format']; if (empty($vwpalm4is_fxavjf2) ) { $vwpalm4is_fxavjf2 = trim($vwpalm4is_g87myl0d['contact']['firstname'] . ' ' . $vwpalm4is_g87myl0d['contact']['lastname']); } if (empty($vwpalm4is_csc29oe_6mn) || empty($this->options['settings']['disable_displayname_update']) ) { $vwpalm4is_csc29oe_6mn = trim(preg_replace_callback('|({{contact\.(.*)}})|U', function($vwpalm4is_rzvh8sbjwen) use ($vwpalm4is_g87myl0d) { $vwpalm4is_x3e6m_hobj = strtolower($vwpalm4is_rzvh8sbjwen[2]); if (isset($vwpalm4is_g87myl0d['contact'][$vwpalm4is_x3e6m_hobj]) ) { $vwpalm4is_ukra4p = $vwpalm4is_g87myl0d['contact'][$vwpalm4is_x3e6m_hobj]; } else { $vwpalm4is_ukra4p = ''; } return htmlspecialchars($vwpalm4is_ukra4p); }, $vwpalm4is_fxavjf2) ); } return $vwpalm4is_csc29oe_6mn; } function wpalm4is_gl1wt2xm9ea($vwpalm4is_s13i75n4ph, $vwpalm4is_t15xztu_wb2 = '') { global $wpdb;  $vwpalm4is_jbucldi1t7q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph); $vwpalm4is_h9kht2xub8p = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'username_field', 'Email'); $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field', 'Password'); $vwpalm4is_hafks9j1 = isset($vwpalm4is_jbucldi1t7q[$vwpalm4is_h9kht2xub8p]) ? $vwpalm4is_jbucldi1t7q[$vwpalm4is_h9kht2xub8p] : ''; $vwpalm4is_hafks9j1 = apply_filters('memberium_wordpress_username', $vwpalm4is_hafks9j1, $vwpalm4is_jbucldi1t7q); $vwpalm4is_kadel7cfxhrm = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'local_auth_only'); $vwpalm4is_zislv640ufy = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'disable_displayname_update'); $vwpalm4is_kadel7cfxhrm = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'local_auth_only'); if (empty($vwpalm4is_hafks9j1) ) { return false; } if (empty($vwpalm4is_jbucldi1t7q['Email'])) { return false; } if (empty($vwpalm4is_t15xztu_wb2) ) { $vwpalm4is_t15xztu_wb2 = isset($vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]) ? $vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h] : ''; }  if (empty($vwpalm4is_kadel7cfxhrm) ) { if (empty($vwpalm4is_t15xztu_wb2) ) { return false; } }  $vwpalm4is__m2uny = (int) wpalm4is_bd5uye4ng3l::wpalm4is_v6egzl2n7($vwpalm4is_s13i75n4ph);  if (! $vwpalm4is__m2uny) { $vwpalm4is__m2uny = (int) $this->wpalm4is_dlyduk38j($vwpalm4is_hafks9j1); } $this->doing_user_update = true; if ($vwpalm4is__m2uny) { $vwpalm4is_lkgpa16yw0dr = get_user_by('id', $vwpalm4is__m2uny); if (is_object($vwpalm4is_lkgpa16yw0dr) && strtolower($vwpalm4is_lkgpa16yw0dr->user_email) == strtolower($vwpalm4is_jbucldi1t7q['Email']) ) { $vwpalm4is_jbucldi1t7q['Email'] = $vwpalm4is_lkgpa16yw0dr->user_email; }  $vwpalm4is_nibkalugdq = array(); $vwpalm4is_nibkalugdq['ID'] = $vwpalm4is__m2uny;  $vwpalm4is_nibkalugdq['user_url'] = empty($vwpalm4is_jbucldi1t7q['Website']) ? '' : $vwpalm4is_jbucldi1t7q['Website']; $vwpalm4is_nibkalugdq['user_email'] = strtolower(trim($vwpalm4is_jbucldi1t7q['Email']) ); $vwpalm4is_nibkalugdq['first_name'] = isset($vwpalm4is_jbucldi1t7q['FirstName']) ? $vwpalm4is_jbucldi1t7q['FirstName'] : ''; $vwpalm4is_nibkalugdq['last_name'] = isset($vwpalm4is_jbucldi1t7q['LastName']) ? $vwpalm4is_jbucldi1t7q['LastName'] : '';  if (empty($vwpalm4is_zislv640ufy ) ) { $vwpalm4is_g87myl0d = array( 'contact' => $vwpalm4is_jbucldi1t7q, 'user_id' => $vwpalm4is__m2uny, ); $vwpalm4is_nibkalugdq['display_name'] = apply_filters('memberium/wpuser/display_name', $this->wpalm4is_ts_b9zir0of2($vwpalm4is_g87myl0d), $vwpalm4is_jbucldi1t7q); $vwpalm4is_nibkalugdq['nickname'] = apply_filters('memberium/wpuser/nickname', $vwpalm4is_nibkalugdq['display_name'], $vwpalm4is_jbucldi1t7q); $vwpalm4is_nibkalugdq['user_nicename'] = apply_filters('memberium/wpuser/nicename', sanitize_title($vwpalm4is_nibkalugdq['nickname'], $vwpalm4is_nibkalugdq['display_name']), $vwpalm4is_jbucldi1t7q); }  if (! empty($_POST['pwd']) ) { $vwpalm4is_t15xztu_wb2 = stripslashes($_POST['pwd']); } else { $vwpalm4is_t15xztu_wb2 = ''; } if (empty($vwpalm4is_kadel7cfxhrm) && is_a($vwpalm4is_lkgpa16yw0dr, 'WP_User') ) { if (! in_array($vwpalm4is_t15xztu_wb2, array('', 'PASSWORD_PLACEHOLDER') ) ) { if ( (! @wp_check_password($_POST['pwd'], $vwpalm4is_lkgpa16yw0dr->data->user_pass, $vwpalm4is_n_bsw6d3x->ID) ) ) { $vwpalm4is_nibkalugdq['user_pass'] = $vwpalm4is_jbucldi1t7q[$this->options['settings']['password_field']]; } } } add_filter('send_password_change_email', array($this, 'wpalm4is_cv9g6o'), PHP_INT_MAX, 3); wp_update_user($vwpalm4is_nibkalugdq); remove_filter('send_password_change_email', array($this, 'wpalm4is_cv9g6o'), PHP_INT_MAX); } else {  $vwpalm4is_nibkalugdq = array(); $vwpalm4is_nibkalugdq['user_pass'] = $vwpalm4is_t15xztu_wb2; $vwpalm4is_nibkalugdq['user_login'] = $vwpalm4is_hafks9j1; $vwpalm4is_nibkalugdq['user_email'] = strtolower($vwpalm4is_jbucldi1t7q['Email']); $vwpalm4is_nibkalugdq['first_name'] = isset($vwpalm4is_jbucldi1t7q['FirstName']) ? $vwpalm4is_jbucldi1t7q['FirstName'] : ''; $vwpalm4is_nibkalugdq['last_name'] = isset($vwpalm4is_jbucldi1t7q['LastName']) ? $vwpalm4is_jbucldi1t7q['LastName'] : ''; $vwpalm4is_nibkalugdq['user_url'] = isset($vwpalm4is_jbucldi1t7q['Website']) ? $vwpalm4is_jbucldi1t7q['Website'] : ''; $vwpalm4is_g87myl0d = array( 'contact' => $vwpalm4is_jbucldi1t7q, ); $vwpalm4is_nibkalugdq['display_name'] = apply_filters('memberium/wpuser/display_name', $this->wpalm4is_ts_b9zir0of2($vwpalm4is_g87myl0d), $vwpalm4is_jbucldi1t7q); $vwpalm4is_nibkalugdq['nickname'] = apply_filters('memberium/wpuser/nickname', $vwpalm4is_nibkalugdq['display_name'], $vwpalm4is_jbucldi1t7q); $vwpalm4is_nibkalugdq['user_nicename'] = apply_filters('memberium/wpuser/nicename', sanitize_title($vwpalm4is_nibkalugdq['nickname'], $vwpalm4is_nibkalugdq['display_name']), $vwpalm4is_jbucldi1t7q); $vwpalm4is__m2uny = wp_insert_user($vwpalm4is_nibkalugdq);  do_action('user_register', $vwpalm4is__m2uny); if (function_exists('WPCW_actions_users_newUserCreated') ) { WPCW_actions_users_newUserCreated($local_user_id); } } $this->wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph, $vwpalm4is__m2uny); $this->doing_user_update = false; return $vwpalm4is__m2uny; }  function wpalm4is_t0qpu_xty($vwpalm4is_hafks9j1, $vwpalm4is_qv9n0cp7 = false) { global $wpdb; $vwpalm4is_hafks9j1 = stripslashes($vwpalm4is_hafks9j1); if (empty($vwpalm4is_hafks9j1) ) { return; } if ($this->contact_cache_refreshed == 1) { return; } $vwpalm4is_n_bsw6d3x = get_user_by('login', $vwpalm4is_hafks9j1); if (! $vwpalm4is_n_bsw6d3x && ! strpos($vwpalm4is_hafks9j1, '@') && in_array($this->options['settings']['username_field'], array('Email', 'EmailAddress2', 'EmailAddress3') ) ) { if (is_a($vwpalm4is_n_bsw6d3x, 'WP_User') ) { $vwpalm4is_hafks9j1 = $vwpalm4is_n_bsw6d3x->data->user_email; } } if (empty($vwpalm4is_hafks9j1) ) { return; } if (! $vwpalm4is_qv9n0cp7) { $vwpalm4is_qv9n0cp7 = (int) wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'max_contact_age'); } $vwpalm4is_xdefv_gzi09 = time() - $vwpalm4is_qv9n0cp7; $vwpalm4is_cm4b8pug = MEMBERIUM_DB_CONTACTS; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_n0idxp7uzye = 0; $vwpalm4is_hafks9j1 = $this->wpalm4is_ew2iq6lx3g($vwpalm4is_hafks9j1); if ($vwpalm4is_qv9n0cp7) { $vwpalm4is_cevdqnb5lzm = "
			SELECT
			COUNT(`{$vwpalm4is_cm4b8pug}`.`id`)
			FROM
			`{$vwpalm4is_cm4b8pug}`,
			`{$vwpalm4is_cm4b8pug}` as `{$vwpalm4is_cm4b8pug}_1`
			WHERE	`{$vwpalm4is_cm4b8pug}`.`appname`     = %s
			AND 	`{$vwpalm4is_cm4b8pug}`.`fieldname`   = %s
			AND		`{$vwpalm4is_cm4b8pug}`.`value`       = %s
			AND		`{$vwpalm4is_cm4b8pug}_1`.`id`        = `{$vwpalm4is_cm4b8pug}`.`id`
			AND		`{$vwpalm4is_cm4b8pug}_1`.`fieldname` = '!LastUpdated'
			AND		`{$vwpalm4is_cm4b8pug}_1`.`value`     > %d"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $this->options['settings']['username_field'], $vwpalm4is_hafks9j1, $vwpalm4is_xdefv_gzi09); $vwpalm4is_n0idxp7uzye = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); } if ($vwpalm4is_n0idxp7uzye == 0) { $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true); $vwpalm4is_fqzgw57 = array( ( ($this->options['settings']['username_field']) ? $this->options['settings']['username_field'] : 'Email') => $vwpalm4is_hafks9j1, );  if (is_object($vwpalm4is_n_bsw6d3x) && $vwpalm4is_n_bsw6d3x->ID > 0) {  } $vwpalm4is_jo91quzgpx0 = $this->isdk->dsQueryOrderBy('Contact', 1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', true ); if (is_array($vwpalm4is_jo91quzgpx0) && ! empty($vwpalm4is_jo91quzgpx0) ) { $vwpalm4is_njgibx8dwk0s = array(); foreach($vwpalm4is_jo91quzgpx0 as $vwpalm4is_jbucldi1t7q) { if (isset($vwpalm4is_jbucldi1t7q['Id']) ) { $vwpalm4is_njgibx8dwk0s[] = $vwpalm4is_jbucldi1t7q['Id']; } } $vwpalm4is_njgibx8dwk0s = implode(',', $vwpalm4is_njgibx8dwk0s); $vwpalm4is_cevdqnb5lzm = "SELECT `id`
				FROM`{$vwpalm4is_cm4b8pug}`
				WHERE `{$vwpalm4is_cm4b8pug}`.`appname` = %s
				AND   `{$vwpalm4is_cm4b8pug}`.`fieldname` = %s
				AND   `{$vwpalm4is_cm4b8pug}`.`value` = %s
				AND   `{$vwpalm4is_cm4b8pug}`.`id` NOT IN ({$vwpalm4is_njgibx8dwk0s})
				/*    " . __LINE__ . " */"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $this->options['settings']['username_field'], $vwpalm4is_hafks9j1); $vwpalm4is_efapcd6 = $wpdb->get_col($vwpalm4is_cevdqnb5lzm); if (is_array($vwpalm4is_efapcd6) && ! empty($vwpalm4is_efapcd6) ) { $vwpalm4is_cevdqnb5lzm = "DELETE FROM `{$vwpalm4is_cm4b8pug}`
					WHERE `{$vwpalm4is_cm4b8pug}`.`appname` = %s
					AND `{$vwpalm4is_cm4b8pug}`.`id` IN (" . implode(',', $vwpalm4is_efapcd6) . ");
					/* " . __LINE__ . " */"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $this->options['settings']['username_field']); $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm); } foreach ($vwpalm4is_jo91quzgpx0 as $vwpalm4is_jbucldi1t7q) { $this->wpalm4is_xnfg7oiy0kwt($vwpalm4is_jbucldi1t7q); } unset($vwpalm4is_cevdqnb5lzm, $vwpalm4is_efapcd6, $vwpalm4is_njgibx8dwk0s); if (count($vwpalm4is_jo91quzgpx0) > 0) { $this->contact_cache_refreshed = 1; } } } else {  } }  function wpalm4is_ild4oyu($vwpalm4is_hafks9j1) { $vwpalm4is_hafks9j1 = strtolower(trim(stripslashes($vwpalm4is_hafks9j1) ) ); if (empty($vwpalm4is_hafks9j1) ) { return 0; }  $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); if ($vwpalm4is_s13i75n4ph > 0) { if (isset($_SESSION['memb_user']['LoginName']) && $vwpalm4is_hafks9j1 == $_SESSION['memb_user']['LoginName'] ) { return $vwpalm4is_s13i75n4ph; } } global $wpdb; $vwpalm4is_mseywfvazo1 = $this->isdk; $vwpalm4is_pc0lq3 = $this->options; $vwpalm4is_cm4b8pug = MEMBERIUM_DB_CONTACTS; $vwpalm4is_xdefv_gzi09 = intval(time() - $this->options['settings']['max_contact_age']) - 10; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_h9kht2xub8p = $vwpalm4is_pc0lq3['settings']['username_field']; $vwpalm4is_urzq9h = $vwpalm4is_pc0lq3['settings']['password_field']; $vwpalm4is_gxc6iufv4s = get_user_by('email', $vwpalm4is_hafks9j1); if (! $vwpalm4is_gxc6iufv4s) { $vwpalm4is_gxc6iufv4s = get_user_by('login', $vwpalm4is_hafks9j1); } if (is_object($vwpalm4is_gxc6iufv4s) && user_can($vwpalm4is_gxc6iufv4s, 'manage_options') ) { return 0; } $vwpalm4is__m2uny = $vwpalm4is_gxc6iufv4s->ID; $vwpalm4is_rdzb1j9p2 = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is__m2uny); if ($vwpalm4is_rdzb1j9p2) { return $vwpalm4is_rdzb1j9p2; }   $vwpalm4is_mq3gv6sdxeu = array( 'Id', $vwpalm4is_h9kht2xub8p, $vwpalm4is_urzq9h, );  $vwpalm4is_fqzgw57 = array( $vwpalm4is_h9kht2xub8p => $vwpalm4is_hafks9j1,  ); $vwpalm4is_jo91quzgpx0 = $this->isdk->dsQueryOrderBy('Contact', 1, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', true ); $vwpalm4is_qlz_a5yc = 0;  if (! is_array($vwpalm4is_jo91quzgpx0) ) { return 0; }  if (! empty($this->options['settings']['local_auth_only']) ) { return (int) $vwpalm4is_jo91quzgpx0[0]['Id']; }   foreach($vwpalm4is_jo91quzgpx0 as $vwpalm4is_s13i75n4ph => $vwpalm4is_jbucldi1t7q) { if (! empty($vwpalm4is_jbucldi1t7q[$vwpalm4is_urzq9h]) ) { $vwpalm4is_qlz_a5yc = (int) $vwpalm4is_jbucldi1t7q['Id']; break; } } return $vwpalm4is_qlz_a5yc; } function wpalm4is_ew2iq6lx3g($vwpalm4is_hafks9j1) {  if (! in_array($this->options['settings']['username_field'], array('Email', 'EmailAddress2', 'EmailAddress3') ) ) { return $vwpalm4is_hafks9j1; } $vwpalm4is_n_bsw6d3x = get_user_by('login', $vwpalm4is_hafks9j1); if (is_a($vwpalm4is_n_bsw6d3x, 'WP_User') ) { $vwpalm4is_hafks9j1 = $vwpalm4is_n_bsw6d3x->data->user_email; } else { $vwpalm4is_n_bsw6d3x = get_user_by('email', $vwpalm4is_hafks9j1); if (is_a($vwpalm4is_n_bsw6d3x, 'WP_User') ) { $vwpalm4is_hafks9j1 = $vwpalm4is_n_bsw6d3x->data->user_email; } } return $vwpalm4is_hafks9j1; } function wpalm4is_dlyduk38j($vwpalm4is_hafks9j1) { $vwpalm4is_hafks9j1 = strtolower(trim($vwpalm4is_hafks9j1)); $vwpalm4is_ukra4p = false; $vwpalm4is_n_bsw6d3x = get_user_by('login', $vwpalm4is_hafks9j1); if (is_a($vwpalm4is_n_bsw6d3x, 'WP_User') && $vwpalm4is_n_bsw6d3x->ID > 0 ) { $vwpalm4is_ukra4p = $vwpalm4is_n_bsw6d3x->ID; } else { $vwpalm4is_n_bsw6d3x = get_user_by('email', $vwpalm4is_hafks9j1); if ( is_a($vwpalm4is_n_bsw6d3x, 'WP_User') && $vwpalm4is_n_bsw6d3x->ID > 0 ) { $vwpalm4is_ukra4p = $vwpalm4is_n_bsw6d3x->ID; } } return $vwpalm4is_ukra4p; } function wpalm4is_rrd15kw0($vwpalm4is_s13i75n4ph) { global $wpdb; $vwpalm4is_cevdqnb5lzm = "SELECT `user_id` FROM `{$wpdb->usermeta}`, `{$wpdb->users}` WHERE `{$wpdb->usermeta}`.`meta_value` = %s AND `{$wpdb->usermeta}`.`meta_key` = 'infusionsoft_user_id' AND `{$wpdb->users}`.`ID` = `{$wpdb->usermeta}`.`user_id` LIMIT 1;";  $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph); $vwpalm4is_tcon6xrp = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_tcon6xrp > 0) { $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp); return $vwpalm4is_n_bsw6d3x; } else { return false; } } function wpalm4is_y5rp9h($vwpalm4is_hafks9j1, $vwpalm4is_t15xztu_wb2 = '', $vwpalm4is_i5lr26x = false) {  static $vwpalm4is_rzvh8sbjwen = array(); $vwpalm4is_hafks9j1 = stripslashes($vwpalm4is_hafks9j1); $vwpalm4is_t15xztu_wb2 = stripslashes($vwpalm4is_t15xztu_wb2); if (isset($vwpalm4is_rzvh8sbjwen[$vwpalm4is_hafks9j1]) ) { return $vwpalm4is_rzvh8sbjwen[$vwpalm4is_hafks9j1]; } global $wpdb; if ($vwpalm4is_hafks9j1 == '') { return false; } $vwpalm4is_hafks9j1 = $this->wpalm4is_ew2iq6lx3g($vwpalm4is_hafks9j1); $vwpalm4is_tcon6xrp = $this->wpalm4is_dlyduk38j($vwpalm4is_hafks9j1); if ($this->wpalm4is_yglaxnp9hw() > 0 && $vwpalm4is_tcon6xrp == get_current_user_id() ) { return $this->wpalm4is_yglaxnp9hw(); } if (! $vwpalm4is_tcon6xrp && $this->options['settings']['local_auth_only'] == 1) { return false; } else { $vwpalm4is_zcn_i08y = wpalm4is_bd5uye4ng3l::wpalm4is_titrm5z4($vwpalm4is_tcon6xrp); } $vwpalm4is_mseywfvazo1 = $this->isdk; $vwpalm4is_pc0lq3 = $this->options; $vwpalm4is_s13i75n4ph = 0; $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp);  $contacts_table = MEMBERIUM_DB_CONTACTS; $vwpalm4is_xdefv_gzi09 = intval(time() - $this->options['settings']['max_contact_age']); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); if (! empty($this->options['settings']['local_auth_only']) ) { $vwpalm4is_cevdqnb5lzm = "
			SELECT
			`c1`.`id`,
			'' as `password`,
			0 as `score`
			FROM
			`{$contacts_table}` as `c1`
			WHERE	`c1`.`appname` = '{$vwpalm4is_dd4j20qwmn_}'
			AND 	`c1`.`fieldname` = '{$this->options['settings']['username_field']}'
			AND		`c1`.`value` = %s
			ORDER BY
			`c1`.`id` ASC"; } else { $vwpalm4is_cevdqnb5lzm = "
			SELECT
			`c1`.`id`,
			`c2`.`value` as `password`,
			0 as `score`
			FROM
			`{$contacts_table}` as `c1`,
			`{$contacts_table}` as `c2`
			WHERE	`c1`.`appname` = '{$vwpalm4is_dd4j20qwmn_}'
			AND 	`c1`.`fieldname` = '{$this->options['settings']['username_field']}'
			AND		`c1`.`value` = %s
			AND 	`c2`.`id` = `c1`.`id`
			AND 	`c2`.`appname` = '{$vwpalm4is_dd4j20qwmn_}'
			AND 	`c2`.`fieldname` = '{$this->options['settings']['password_field']}'
			ORDER BY
			`c1`.`id` ASC"; } $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, stripslashes($vwpalm4is_hafks9j1) ); $vwpalm4is_jo91quzgpx0 = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); if (! empty($this->options['settings']['local_auth_only']) ) {  $vwpalm4is_s13i75n4ph = isset($vwpalm4is_jo91quzgpx0[0]['id']) ? $vwpalm4is_jo91quzgpx0[0]['id'] : 0; } else {  if (is_array($vwpalm4is_jo91quzgpx0) && ! empty($vwpalm4is_jo91quzgpx0) ) { foreach ($vwpalm4is_jo91quzgpx0 as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_jbucldi1t7q) { $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['password'] = stripslashes(html_entity_decode(trim($vwpalm4is_jbucldi1t7q['password']) ) ); } $vwpalm4is_at8si91b_ag3 = false;  if (false && count($vwpalm4is_jo91quzgpx0) == 1) { $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_jo91quzgpx0[0]['id']; $vwpalm4is_at8si91b_ag3 = 0; $vwpalm4is_jbucldi1t7q[0]['score'] = $vwpalm4is_jo91quzgpx0[0]['score'] + 25; } else { $vwpalm4is_jo91quzgpx0[0]['score'] = $vwpalm4is_jo91quzgpx0[0]['score'] + 2; foreach ($vwpalm4is_jo91quzgpx0 as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_jbucldi1t7q) { if ($vwpalm4is_t15xztu_wb2 > '' && $vwpalm4is_jbucldi1t7q['password'] == stripslashes(trim($vwpalm4is_t15xztu_wb2) ) ) {  $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] = $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] + 10; } elseif ($vwpalm4is_t15xztu_wb2 > '' && $vwpalm4is_jbucldi1t7q['password'] > '' && $vwpalm4is_jbucldi1t7q['password'] != 'PASSWORD_PLACEHOLDER') { $vwpalm4is_jbucldi1t7q['score'] = $vwpalm4is_jbucldi1t7q['score'] + 5; } elseif ($vwpalm4is_t15xztu_wb2 > '' && $vwpalm4is_t15xztu_wb2 != $vwpalm4is_jbucldi1t7q['password'] && $vwpalm4is_jbucldi1t7q['password'] == 'PASSWORD_PLACEHOLDER') { $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] = $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] + 3; } elseif ($vwpalm4is_t15xztu_wb2 == '' && $vwpalm4is_jbucldi1t7q['password'] == '') { $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] = $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] + 1; } elseif ($vwpalm4is_jbucldi1t7q['id'] == $vwpalm4is_zcn_i08y) { $vwpalm4is_jo91quzgpx0[$vwpalm4is_x3e6m_hobj]['score'] + 10; } }  $vwpalm4is_riqpxz9nc = 0; foreach ($vwpalm4is_jo91quzgpx0 as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_jbucldi1t7q) { if ($vwpalm4is_jbucldi1t7q['score'] > $vwpalm4is_riqpxz9nc) { $vwpalm4is_at8si91b_ag3 = $vwpalm4is_x3e6m_hobj; } } unset($vwpalm4is_riqpxz9nc); } if ($vwpalm4is_at8si91b_ag3 !== FALSE) { if ($vwpalm4is_t15xztu_wb2 == '' || ($vwpalm4is_t15xztu_wb2 > '' && $vwpalm4is_jo91quzgpx0[$vwpalm4is_at8si91b_ag3]['password'] == $vwpalm4is_t15xztu_wb2) ) {  $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_jo91quzgpx0[$vwpalm4is_at8si91b_ag3]['id']; } elseif ($vwpalm4is_t15xztu_wb2 > '' && $vwpalm4is_t15xztu_wb2 <> 'PASSWORD_PLACEHOLDER' && $vwpalm4is_jo91quzgpx0[$vwpalm4is_at8si91b_ag3]['password'] == 'PASSWORD_PLACEHOLDER') {  if (is_a($vwpalm4is_n_bsw6d3x, 'WP_User')) { if ( ($vwpalm4is_n_bsw6d3x->ID > 0) && wp_check_password($vwpalm4is_t15xztu_wb2, $vwpalm4is_n_bsw6d3x->data->user_pass, $vwpalm4is_n_bsw6d3x->ID) ) { $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_jo91quzgpx0[$vwpalm4is_at8si91b_ag3]['id']; $vwpalm4is__mva5tn_6k3r = array( $this->options['settings']['password_field'] => $vwpalm4is_t15xztu_wb2 ); $this->isdk->updateCon($vwpalm4is_s13i75n4ph, $vwpalm4is__mva5tn_6k3r);  $this->wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph); } } } else { } } if ($vwpalm4is_s13i75n4ph > 0) { $vwpalm4is_jbucldi1t7q = $vwpalm4is_jo91quzgpx0[$vwpalm4is_at8si91b_ag3];  } } } if (! $vwpalm4is_n_bsw6d3x) { $vwpalm4is_n_bsw6d3x = get_user_by('email', $vwpalm4is_hafks9j1); } if (is_a($vwpalm4is_n_bsw6d3x, 'WP_User') && $vwpalm4is_s13i75n4ph > 0) { $this->wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph, $vwpalm4is_n_bsw6d3x->ID); }  if ($vwpalm4is_hafks9j1 > '' && $vwpalm4is_t15xztu_wb2 > '' && $vwpalm4is_s13i75n4ph > 0) { $vwpalm4is_rzvh8sbjwen[$vwpalm4is_hafks9j1] = $vwpalm4is_s13i75n4ph; } return $vwpalm4is_s13i75n4ph; } function wpalm4is_xnfg7oiy0kwt($vwpalm4is__zd4r50ct_gw, $vwpalm4is_s0zrvwine = false) { global $i2sdk, $wpdb; $vwpalm4is_mseywfvazo1 = $i2sdk->isdk; $this->doing_user_update = true; $vwpalm4is_vzoj7cv_rsly = isset($vwpalm4is__zd4r50ct_gw['Id']) ? (int) $vwpalm4is__zd4r50ct_gw['Id'] : 0; if (! $vwpalm4is_vzoj7cv_rsly) { return false; } if (isset($vwpalm4is__zd4r50ct_gw['CompanyID']) && $vwpalm4is__zd4r50ct_gw['CompanyID'] == $vwpalm4is_vzoj7cv_rsly) { return false; } $vwpalm4is_urzq9h = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'password_field'); $vwpalm4is_y0e3o7u1n_6w = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'plaintext_db'); $vwpalm4is_yamd4ps9kvl5 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'ignore_contact_fields'); $vwpalm4is_wrgz4p86b = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'sync_tag_details'); $vwpalm4is_zislv640ufy = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'disable_displayname_update');  if (! isset($vwpalm4is__zd4r50ct_gw[$vwpalm4is_urzq9h]) ) { $vwpalm4is__zd4r50ct_gw[$vwpalm4is_urzq9h] = ''; }  foreach($vwpalm4is__zd4r50ct_gw as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is__zd4r50ct_gw[$vwpalm4is_x3e6m_hobj] = ($vwpalm4is_kh9vqi_6znd == 'null') ? '' : $vwpalm4is_kh9vqi_6znd; }  if ($vwpalm4is_s0zrvwine) { $vwpalm4is_mseywfvazo1->updatecon($vwpalm4is_vzoj7cv_rsly, $vwpalm4is__zd4r50ct_gw);  } $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTS; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is__zd4r50ct_gw['!LastUpdated'] = time(); $vwpalm4is__m6ko3q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_vzoj7cv_rsly); foreach($vwpalm4is__m6ko3q as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is__m6ko3q[$vwpalm4is_x3e6m_hobj] = ($vwpalm4is_kh9vqi_6znd == 'null') ? '' : $vwpalm4is_kh9vqi_6znd; } unset($vwpalm4is__m6ko3q['!LastUpdated']); $vwpalm4is_d4dhqr57al1t = isset($vwpalm4is__zd4r50ct_gw['Website']); $vwpalm4is_jnxosvir8aw = isset($vwpalm4is__zd4r50ct_gw['FirstName']); $vwpalm4is_sois_3nld1b = isset($vwpalm4is__zd4r50ct_gw['LastName']); $vwpalm4is_onoi841m = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true); foreach($vwpalm4is_onoi841m as $vwpalm4is_a0g4be2) { if (! isset($vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2]) ) { $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2] = ''; } else { if ($vwpalm4is_y0e3o7u1n_6w) { $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2] = iconv('UTF-8', 'ISO-8859-1//IGNORE', remove_accents($vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2]) ); $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2] = filter_var($vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2], FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH); } } if ($vwpalm4is_a0g4be2 == 'Groups') { $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2] = implode(',', array_filter(array_unique(explode(',', $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2]) ) ) ); } if ($vwpalm4is_a0g4be2 != $vwpalm4is_urzq9h) { $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2] = wp_strip_all_tags($vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2]); } $vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2] = html_entity_decode($vwpalm4is__zd4r50ct_gw[$vwpalm4is_a0g4be2]); }  $vwpalm4is_obr60wde = array_filter(explode(',', $vwpalm4is_yamd4ps9kvl5) ); $vwpalm4is_wi3z2g90xs = $vwpalm4is_obr60wde; foreach($vwpalm4is__m6ko3q as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { if ( (! isset($vwpalm4is__zd4r50ct_gw[$vwpalm4is_ndxvp20]) ) && (! in_array($vwpalm4is_ndxvp20, $vwpalm4is_onoi841m) ) ) { $vwpalm4is_obr60wde[] = $vwpalm4is_ndxvp20; } } if (! empty($vwpalm4is_obr60wde) ) { $vwpalm4is_cevdqnb5lzm = "DELETE FROM {$vwpalm4is_q35jf97eg4} WHERE `appname` = %s AND `id` = %d AND `fieldname` IN ('" . implode("','", $vwpalm4is_obr60wde) . "');"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_vzoj7cv_rsly); $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm); }  $vwpalm4is_az0w4le = array(); $vwpalm4is_obr60wde = array(); foreach($vwpalm4is__zd4r50ct_gw as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { if (! in_array($vwpalm4is_ndxvp20, $vwpalm4is_wi3z2g90xs) ) { if ( (! isset($vwpalm4is__m6ko3q[$vwpalm4is_ndxvp20]) || ($vwpalm4is__m6ko3q[$vwpalm4is_ndxvp20] <> $vwpalm4is_x1folrs) ) ) { $vwpalm4is_az0w4le[] = $wpdb->prepare('(%d, %s, %s, %s)', $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_ndxvp20, $vwpalm4is_x1folrs); $vwpalm4is_obr60wde[] .= $wpdb->prepare("%s", $vwpalm4is_x3e6m_hobj); } } } if (! empty($vwpalm4is_az0w4le) ) { $vwpalm4is_cevdqnb5lzm = "INSERT INTO {$vwpalm4is_q35jf97eg4} (id, appname, fieldname, value) VALUES " . implode(',', $vwpalm4is_az0w4le) . " ON DUPLICATE KEY UPDATE id=VALUES(id), appname=VALUES(appname), fieldname=VALUES(fieldname), value=VALUES(value);"; $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm); } unset($vwpalm4is_az0w4le, $vwpalm4is_kh9vqi_6znd, $vwpalm4is_obr60wde, $vwpalm4is_ndxvp20, $vwpalm4is_x1folrs); if (! empty($vwpalm4is_wrgz4p86b) ) { $this->wpalm4is_k2_3iqhs( (int) $vwpalm4is__zd4r50ct_gw['Id']); } $vwpalm4is_tcon6xrp = wpalm4is_bd5uye4ng3l::wpalm4is_v6egzl2n7($vwpalm4is_vzoj7cv_rsly); if ($vwpalm4is_tcon6xrp) { $vwpalm4is_gkyobg = get_user_by('id', $vwpalm4is_tcon6xrp); $vwpalm4is_iomhdlzi73g5 = array(); $vwpalm4is_n_bsw6d3x = get_user_by('id', $vwpalm4is_tcon6xrp); $vwpalm4is_iomhdlzi73g5['ID'] = $vwpalm4is_tcon6xrp; $vwpalm4is_iomhdlzi73g5['user_login'] = $vwpalm4is_n_bsw6d3x->user_login; $vwpalm4is_iomhdlzi73g5['user_email'] = $vwpalm4is_n_bsw6d3x->user_email; if ($vwpalm4is_iomhdlzi73g5['user_login'] == $vwpalm4is_iomhdlzi73g5['user_email']) { $vwpalm4is_iomhdlzi73g5['user_login'] = $vwpalm4is_iomhdlzi73g5['user_email']; } if ($vwpalm4is_jnxosvir8aw) { $vwpalm4is_iomhdlzi73g5['first_name'] = $vwpalm4is__zd4r50ct_gw['FirstName']; } if ($vwpalm4is_sois_3nld1b) { $vwpalm4is_iomhdlzi73g5['last_name'] = $vwpalm4is__zd4r50ct_gw['LastName']; } if ($vwpalm4is_d4dhqr57al1t) { $vwpalm4is_iomhdlzi73g5['user_url'] = $vwpalm4is__zd4r50ct_gw['Website']; } if (! empty($vwpalm4is_iomhdlzi73g5) ) { $vwpalm4is_iomhdlzi73g5['ID'] = $vwpalm4is_tcon6xrp; } if (empty($vwpalm4is_zislv640ufy) ) { $vwpalm4is_g87myl0d = array('contact' => $vwpalm4is__zd4r50ct_gw); $vwpalm4is_iomhdlzi73g5['display_name'] = apply_filters('memberium/wpuser/display_name', $this->wpalm4is_ts_b9zir0of2($vwpalm4is_g87myl0d), $vwpalm4is__zd4r50ct_gw); $vwpalm4is_iomhdlzi73g5['nickname'] = apply_filters('memberium/wpuser/nickname', $vwpalm4is_iomhdlzi73g5['display_name'], $vwpalm4is__zd4r50ct_gw); $vwpalm4is_iomhdlzi73g5['user_nicename'] = apply_filters('memberium/wpuser/nicename', sanitize_title($vwpalm4is_iomhdlzi73g5['nickname'], $vwpalm4is_iomhdlzi73g5['display_name']), $vwpalm4is__zd4r50ct_gw); } $this->wpalm4is_gl1wt2xm9ea($vwpalm4is_vzoj7cv_rsly); if (is_multisite() && ! is_user_member_of_blog($vwpalm4is_tcon6xrp) ) { $vwpalm4is_s7sdvr5j6hpo = get_current_blog_id(); $vwpalm4is_vme5v4qk79 = get_blog_option($vwpalm4is_s7sdvr5j6hpo, 'default_role', 'subscriber'); add_user_to_blog($vwpalm4is_s7sdvr5j6hpo, $vwpalm4is_tcon6xrp, $vwpalm4is_vme5v4qk79); } } $this->wpalm4is_d6jdz2($vwpalm4is_vzoj7cv_rsly);  do_action('memberium_save_contact', $vwpalm4is__zd4r50ct_gw['Id'], $vwpalm4is_tcon6xrp, $vwpalm4is__zd4r50ct_gw); $this->doing_user_update = false; } function wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_t39vr1wp = false) { $vwpalm4is_huym27 = 0; if ($vwpalm4is_s13i75n4ph) { global $wpdb; $vwpalm4is_pc0lq3 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy(); $vwpalm4is_vsmw53_cfzn = get_option('i2sdk'); $vwpalm4is_mseywfvazo1 = $this->isdk; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true); $vwpalm4is_kmqnwo6cu5 = array(); $vwpalm4is_huym27 = 0; $vwpalm4is_cevdqnb5lzm = 'SELECT `value` FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `id` = %d AND `fieldname` = "!LastUpdated";'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph); $vwpalm4is__24nr1v = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); $vwpalm4is_g5l9_u = time(); if ($vwpalm4is__24nr1v <= $vwpalm4is_g5l9_u) { $vwpalm4is_kmqnwo6cu5 = $this->isdk->loadCon($vwpalm4is_s13i75n4ph, $vwpalm4is_mq3gv6sdxeu); } if (is_string($vwpalm4is_kmqnwo6cu5) && stripos($vwpalm4is_kmqnwo6cu5, 'RecordNotFound') !== false) { $this->wpalm4is_lydups4($vwpalm4is_s13i75n4ph); } if (is_array($vwpalm4is_kmqnwo6cu5) && count($vwpalm4is_kmqnwo6cu5) > 0) { $this->wpalm4is_xnfg7oiy0kwt($vwpalm4is_kmqnwo6cu5); $vwpalm4is_huym27 = count($vwpalm4is_kmqnwo6cu5); if (! empty($this->options['settings']['sync_tag_details']) ) { $this->wpalm4is_k2_3iqhs( (int) $vwpalm4is_kmqnwo6cu5['Id']); } $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); } } return $vwpalm4is_huym27; } function wpalm4is_r6wmi2bj81l9($vwpalm4is_g87myl0d = array() ) { $vwpalm4is_vx_n8e7hdrbo = array( 'contact_id' => 0, 'cascade' => false, 'cache_ttl' => 0, ); $vwpalm4is_g87myl0d = wp_parse_args($vwpalm4is_g87myl0d, $vwpalm4is_vx_n8e7hdrbo); $vwpalm4is_s13i75n4ph = $vwpalm4is_g87myl0d['contact_id']; $vwpalm4is_t39vr1wp = $vwpalm4is_g87myl0d['cascade']; $vwpalm4is_zds2_3vizog = $vwpalm4is_g87myl0d['cache_ttl']; $vwpalm4is_huym27 = 0; if ($vwpalm4is_s13i75n4ph > 0) { global $wpdb; $vwpalm4is_pc0lq3 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy(); $vwpalm4is_vsmw53_cfzn = get_option('i2sdk'); $vwpalm4is_mseywfvazo1 = $this->isdk; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true); $vwpalm4is_kmqnwo6cu5 = array(); $vwpalm4is_huym27 = 0; $vwpalm4is_cevdqnb5lzm = 'SELECT `value` FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `id` = %d AND `fieldname` = "!LastUpdated";'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph); $vwpalm4is__24nr1v = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); $vwpalm4is_g5l9_u = time(); if ($vwpalm4is__24nr1v < ($vwpalm4is_g5l9_u - $vwpalm4is_zds2_3vizog) ) { $vwpalm4is_kmqnwo6cu5 = $this->isdk->loadCon($vwpalm4is_s13i75n4ph, $vwpalm4is_mq3gv6sdxeu); if (is_string($vwpalm4is_kmqnwo6cu5) && stripos($vwpalm4is_kmqnwo6cu5, 'RecordNotFound') !== false) { $this->wpalm4is_lydups4($vwpalm4is_s13i75n4ph); } if (is_array($vwpalm4is_kmqnwo6cu5) && count($vwpalm4is_kmqnwo6cu5) > 0) { $this->wpalm4is_xnfg7oiy0kwt($vwpalm4is_kmqnwo6cu5); $vwpalm4is_huym27 = count($vwpalm4is_kmqnwo6cu5); if (! empty($this->options['settings']['sync_tag_details']) ) { $this->wpalm4is_k2_3iqhs( (int) $vwpalm4is_hs69ar['Id']); } $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); } } } return $vwpalm4is_huym27; } function wpalm4is_lydups4($vwpalm4is_s13i75n4ph, $vwpalm4is_t39vr1wp = FALSE) { global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); if (! is_array($vwpalm4is_s13i75n4ph) ) { $vwpalm4is_njgibx8dwk0s = array($vwpalm4is_s13i75n4ph); } foreach ($vwpalm4is_njgibx8dwk0s as $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph > 0) { $vwpalm4is_cevdqnb5lzm = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `id` = %d AND `appname` = %s ;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, array($vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_) ); $wpdb->query($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_t39vr1wp) {  $vwpalm4is_cevdqnb5lzm = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `contactid` = %d AND `appname` = %s ;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, array($vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_) ); $wpdb->query($vwpalm4is_cevdqnb5lzm);  $vwpalm4is_cevdqnb5lzm = 'DELETE FROM `' . MEMBERIUM_DB_AFFILIATES . '` WHERE `contactid` = %d AND `appname` = %s ;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, array($vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_) ); $wpdb->query($vwpalm4is_cevdqnb5lzm);  } } } }  function wpalm4is_t07nk42($vwpalm4is_g87myl0d) { global $wpdb; if (empty($vwpalm4is_g87myl0d) ) { return false; } $vwpalm4is_vx_n8e7hdrbo = array( 'email' => '', 'return' => 'row_count',  ); if (is_string($vwpalm4is_g87myl0d) ) { $vwpalm4is_vx_n8e7hdrbo['email'] = strtolower(trim($vwpalm4is_g87myl0d) ); $vwpalm4is_g87myl0d = array(); } $vwpalm4is_g87myl0d = wp_parse_args($vwpalm4is_g87myl0d, $vwpalm4is_vx_n8e7hdrbo); $vwpalm4is_dzqjf460 = $vwpalm4is_g87myl0d['email']; if (empty($vwpalm4is_dzqjf460) ) { return; } $vwpalm4is_pc0lq3 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy(); $vwpalm4is_vsmw53_cfzn = get_option('i2sdk'); $vwpalm4is_mseywfvazo1 = $this->isdk;  $vwpalm4is_e8ns965uk = 1000; $vwpalm4is__mnral5zjy = 'Contact'; $vwpalm4is_cshmxpk = 0; $vwpalm4is_capec2nktjiu = 'Email'; $vwpalm4is_ndjgnlct7_9 = $vwpalm4is_dzqjf460; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact', true); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTS; $vwpalm4is_huym27 = 0; $contact_count = 0; $contact_ids = array(); $contacts = array(); $vwpalm4is_fqzgw57 = array( $vwpalm4is_capec2nktjiu => $vwpalm4is_ndjgnlct7_9 ); do { $vwpalm4is_kmqnwo6cu5 = $vwpalm4is_mseywfvazo1->dsQuery($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_kmqnwo6cu5) && ! empty($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { if ($vwpalm4is_g87myl0d['return'] == 'contacts') { $contacts[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; } $contact_count++; $contact_ids[] = $vwpalm4is_hs69ar['Id']; $this->wpalm4is_xnfg7oiy0kwt($vwpalm4is_hs69ar); if (! empty($this->options['settings']['sync_tag_details']) ) { $this->wpalm4is_k2_3iqhs( (int) $vwpalm4is_hs69ar['Id']); } $this->wpalm4is_d6jdz2($vwpalm4is_hs69ar['Id']); } } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + count($vwpalm4is_kmqnwo6cu5); } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk);  if ($vwpalm4is_g87myl0d['return'] == 'contact_count') { return $contact_count; } elseif ($vwpalm4is_g87myl0d['return'] == 'contact_ids') { return $contact_ids; } elseif ($vwpalm4is_g87myl0d['return'] == 'contacts') { return $contacts; } return $vwpalm4is_huym27; } function wpalm4is_k2_3iqhs($vwpalm4is_s13i75n4ph) { if ($vwpalm4is_s13i75n4ph < 1 || (int) $vwpalm4is_s13i75n4ph !== $vwpalm4is_s13i75n4ph) { return; } global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; $vwpalm4is_e8ns965uk = 1000; $vwpalm4is__mnral5zjy = 'ContactGroupAssign'; $vwpalm4is_cshmxpk = 0; $vwpalm4is_capec2nktjiu = 'ContactId'; $vwpalm4is_ndjgnlct7_9 = $vwpalm4is_s13i75n4ph; $vwpalm4is_mq3gv6sdxeu = array('GroupId', 'DateCreated'); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTTAGS; $vwpalm4is_huym27 = 0; $wpdb->delete($vwpalm4is_q35jf97eg4, array('contactid' => $vwpalm4is_s13i75n4ph, 'appname' => $vwpalm4is_dd4j20qwmn_) ); do { $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsfind($vwpalm4is__mnral5zjy, (int) $vwpalm4is_e8ns965uk, (int) $vwpalm4is_cshmxpk, $vwpalm4is_capec2nktjiu, (string) $vwpalm4is_ndjgnlct7_9, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $wpdb->insert( MEMBERIUM_DB_CONTACTTAGS, array( 'appname' => $vwpalm4is_dd4j20qwmn_, 'contactid' => $vwpalm4is_s13i75n4ph, 'tagid' => (int) $vwpalm4is_hs69ar['GroupId'], 'created' => date('Y-m-d H:i:s', strtotime($vwpalm4is_hs69ar['DateCreated']) ), ), array('%s', '%d', '%d', '%s') ); } } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + count($vwpalm4is_kmqnwo6cu5); } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); $current_contact_id = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); if ($current_contact_id == $vwpalm4is_s13i75n4ph) { $_SESSION['memb_user']['tags_synced'] = 1; } } function wpalm4is_lswl1dxrz($vwpalm4is_s13i75n4ph, $vwpalm4is_dzqjf460) { global $wpdb; if (empty($vwpalm4is_dzqjf460) ) { return false; } if (empty($vwpalm4is_s13i75n4ph) ) { return false; } $vwpalm4is_a0g4be2 = $this->options['settings']['username_field']; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT count(`id`) FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `id` = %d AND `fieldname` = %s AND appname = %s AND VALUE = %s ;"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph, $vwpalm4is_a0g4be2, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_dzqjf460); $vwpalm4is_j2i0_tkn7ap = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if (! $vwpalm4is_j2i0_tkn7ap) { } else { } return $vwpalm4is_j2i0_tkn7ap; } function wpalm4is_hxtm0jb9s($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_tcon6xrp = 0) { if (empty($vwpalm4is_s13i75n4ph) ) { return false; } if (empty($vwpalm4is_tcon6xrp) ) { return false; } $vwpalm4is_n_bsw6d3x = get_userdata($vwpalm4is_tcon6xrp); $vwpalm4is_dzqjf460 = $vwpalm4is_n_bsw6d3x->user_email; $vwpalm4is_omrjpa9l5 = $this->wpalm4is_lswl1dxrz($vwpalm4is_s13i75n4ph, $vwpalm4is_dzqjf460); if (! $vwpalm4is_omrjpa9l5) { return false; } update_user_meta($vwpalm4is_tcon6xrp, 'infusionsoft_user_id', $vwpalm4is_s13i75n4ph);  return true; } function wpalm4is_pmthyxkew2($vwpalm4is_lqyrlwj5km6a, $vwpalm4is_hp41oja = false) { global $wpdb; if (! $vwpalm4is_hp41oja) {  if (current_user_can('manage_options') ) { return true; } }  if (! wpalm4is_rvrqgfe5ns_::wpalm4is_ot80ov2b() ) { return false; } if ($vwpalm4is_hp41oja === false) { if (wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups') == '') { $vwpalm4is_hp41oja['memb_db_fields']['groups'] = ''; $vwpalm4is_hp41oja['memb_user']['GroupNames'] = ''; } else { $vwpalm4is_zkq16hy = wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups'); $vwpalm4is_vkmr_g7tnh4 = $_SESSION['memb_user']['GroupNames']; } } else { $vwpalm4is_zkq16hy = isset($vwpalm4is_hp41oja['memb_db_fields']['groups']) ? $vwpalm4is_hp41oja['memb_db_fields']['groups'] : ''; $vwpalm4is_vkmr_g7tnh4 = isset($vwpalm4is_hp41oja['memb_user']['GroupNames']) ? $vwpalm4is_hp41oja['memb_user']['GroupNames'] : ''; } $vwpalm4is__mnral5zjy = MEMBERIUM_DB_TAGS; $vwpalm4is_lqyrlwj5km6a = (int) $vwpalm4is_lqyrlwj5km6a; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT count(*) FROM `{$vwpalm4is__mnral5zjy}` WHERE `id` IN (" . $vwpalm4is_zkq16hy . ") AND `appname` = %s AND `category` = %d"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_lqyrlwj5km6a); $vwpalm4is_ukra4p = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); return (bool) $vwpalm4is_ukra4p; }  static function wpalm4is_vodyxmki9r($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_hp41oja = false) {  if ($vwpalm4is_hp41oja === false && current_user_can('manage_options') ) { return true; }  if (! wpalm4is_rvrqgfe5ns_::wpalm4is_ot80ov2b() ) { return false; } if ($vwpalm4is_hp41oja === false) { if (wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups') == '') { $vwpalm4is_hp41oja['memb_db_fields']['groups'] = ''; $vwpalm4is_hp41oja['memb_user']['GroupNames'] = ''; } else { $vwpalm4is_zkq16hy = wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups'); $vwpalm4is_vkmr_g7tnh4 = $_SESSION['memb_user']['GroupNames']; } } else { $vwpalm4is_zkq16hy = isset($vwpalm4is_hp41oja['memb_db_fields']['groups']) ? $vwpalm4is_hp41oja['memb_db_fields']['groups'] : ''; $vwpalm4is_vkmr_g7tnh4 = isset($vwpalm4is_hp41oja['memb_user']['GroupNames']) ? $vwpalm4is_hp41oja['memb_user']['GroupNames'] : ''; } if (empty($vwpalm4is_zkq16hy) ) { return false; } if (is_array($vwpalm4is_gf2m1t7v8nbz) ) { $vwpalm4is_gf2m1t7v8nbz = trim(implode(',', $vwpalm4is_gf2m1t7v8nbz), ','); } if ($vwpalm4is_gf2m1t7v8nbz === $vwpalm4is_zkq16hy) { return true; } $vwpalm4is_j2i0_tkn7ap = false; $vwpalm4is_gf2m1t7v8nbz = preg_replace(array('/, */', '/ *,/'), ',', $vwpalm4is_gf2m1t7v8nbz); $vwpalm4is_gf2m1t7v8nbz = preg_replace(array('/^,/', '/,$/'), '', $vwpalm4is_gf2m1t7v8nbz); $vwpalm4is_gf2m1t7v8nbz = trim($vwpalm4is_gf2m1t7v8nbz); $vwpalm4is_l2zjdqu69 = array_filter(explode(',', strtolower(trim($vwpalm4is_gf2m1t7v8nbz) ) ) ); $vwpalm4is_lnvfl4bzc = implode(',', $vwpalm4is_l2zjdqu69); $vwpalm4is_zkq16hy = array_filter(explode(',', $vwpalm4is_zkq16hy) ); $vwpalm4is_vkmr_g7tnh4 = array_filter(explode(MEMBERIUM_DELIMITER, strtolower($vwpalm4is_vkmr_g7tnh4) ) ); $vwpalm4is_ll4szk63p_ = array(); $vwpalm4is_l_vb6tdg = array();  foreach($vwpalm4is_l2zjdqu69 as $vwpalm4is_agvwtn) { if (substr($vwpalm4is_agvwtn, 0, 1) <> '-') { $vwpalm4is_ll4szk63p_[] = $vwpalm4is_agvwtn; } else { $vwpalm4is_l_vb6tdg[] = substr($vwpalm4is_agvwtn, 1); } }  $vwpalm4is_fqohrl7k6 = false; $vwpalm4is_s64byvsq = 0; if (count($vwpalm4is_ll4szk63p_) ) { $vwpalm4is_s64byvsq = count(array_intersect($vwpalm4is_ll4szk63p_, $vwpalm4is_zkq16hy) ) + count(array_intersect($vwpalm4is_ll4szk63p_, $vwpalm4is_vkmr_g7tnh4) ); $vwpalm4is_fqohrl7k6 = (boolean) $vwpalm4is_s64byvsq; } else { $vwpalm4is_s64byvsq = 0; $vwpalm4is_fqohrl7k6 = true; }  $vwpalm4is__7cdtjzy = false; $vwpalm4is_ttyp6ou4x = 0; if (count($vwpalm4is_l_vb6tdg) ) { $vwpalm4is_ttyp6ou4x = count(array_intersect($vwpalm4is_l_vb6tdg, $vwpalm4is_zkq16hy) ) + count(array_intersect($vwpalm4is_l_vb6tdg, $vwpalm4is_vkmr_g7tnh4) ); $vwpalm4is__7cdtjzy = ! (boolean) $vwpalm4is_ttyp6ou4x; } else { $vwpalm4is_ttyp6ou4x = 0; $vwpalm4is__7cdtjzy = true; }  $vwpalm4is_j2i0_tkn7ap = false; if (count($vwpalm4is_ll4szk63p_) ) { $vwpalm4is_j2i0_tkn7ap = $vwpalm4is_j2i0_tkn7ap || $vwpalm4is_fqohrl7k6; } if (count($vwpalm4is_l_vb6tdg) ) { $vwpalm4is_j2i0_tkn7ap = $vwpalm4is_j2i0_tkn7ap || $vwpalm4is__7cdtjzy; } return $vwpalm4is_j2i0_tkn7ap; }  static function wpalm4is_tuymrtz($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_s13i75n4ph = false) {  if (empty($vwpalm4is_gf2m1t7v8nbz) ) { return false; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); }  if (! $vwpalm4is_s13i75n4ph) { if ($vwpalm4is_hp41oja === false && current_user_can('manage_options') ) { return true; } return false; }  if (! wpalm4is_rvrqgfe5ns_::wpalm4is_ot80ov2b() ) { return false; } if (! is_array($vwpalm4is_gf2m1t7v8nbz) ) { $vwpalm4is_gf2m1t7v8nbz = explode(',', $vwpalm4is_gf2m1t7v8nbz); } if ($vwpalm4is_s13i75n4ph == wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() ) { $vwpalm4is_zkq16hy = wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups'); $vwpalm4is_vkmr_g7tnh4 = $_SESSION['memb_user']['GroupNames']; } else { $vwpalm4is_tcon6xrp = wpalm4is_bd5uye4ng3l::wpalm4is_v6egzl2n7($vwpalm4is_s13i75n4ph); if ($vwpalm4is_tcon6xrp) {  $vwpalm4is_hp41oja = memberium_app()->wpalm4is_pvab9fqcm($vwpalm4is_tcon6xrp); $vwpalm4is_zkq16hy = $vwpalm4is_hp41oja['memb_db_fields']['groups']; $vwpalm4is_vkmr_g7tnh4 = $vwpalm4is_hp41oja['memb_user']['GroupNames']; } } if ($vwpalm4is_s13i75n4ph > 0) { $vwpalm4is_zkq16hy = explode(',', $vwpalm4is_zkq16hy); $vwpalm4is_vkmr_g7tnh4 = explode(MEMBERIUM_DELIMITER, strtolower($vwpalm4is_vkmr_g7tnh4) ); foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { if (substr($vwpalm4is_agvwtn, 0, 1) == '-') { $vwpalm4is_agvwtn = strtolower(ltrim($vwpalm4is_agvwtn, '-') ); if (in_array($vwpalm4is_agvwtn, $vwpalm4is_zkq16hy) || in_array($vwpalm4is_agvwtn, $vwpalm4is_vkmr_g7tnh4) ) { return false; } } else { $vwpalm4is_agvwtn = strtolower($vwpalm4is_agvwtn); if (! in_array($vwpalm4is_agvwtn, $vwpalm4is_zkq16hy) && ! in_array($vwpalm4is_agvwtn, $vwpalm4is_vkmr_g7tnh4) ) { return false; } } } return true; } return false; }    function wpalm4is_zkv3sywcntp8($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_qv9n0cp7 = FALSE) { global $wpdb; static $vwpalm4is_l3mx7wc = 0; if ($vwpalm4is_l3mx7wc == 1) { return; } if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! $vwpalm4is_qv9n0cp7) { $vwpalm4is_qv9n0cp7 = $this->options['settings']['max_contact_age']; } $vwpalm4is_xdefv_gzi09 = time() - $vwpalm4is_qv9n0cp7; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "
		SELECT
		COUNT(`{$vwpalm4is_q35jf97eg4}_2`.`id`)
		FROM
		`{$vwpalm4is_q35jf97eg4}`,
		`{$vwpalm4is_q35jf97eg4}` AS `{$vwpalm4is_q35jf97eg4}_2`
		WHERE	`{$vwpalm4is_q35jf97eg4}`.`appname`     = %s
		AND 	`{$vwpalm4is_q35jf97eg4}`.`fieldname`   = 'ContactId'
		AND		`{$vwpalm4is_q35jf97eg4}`.`value`       = %d
		AND		`{$vwpalm4is_q35jf97eg4}_2`.`id`        = {$vwpalm4is_q35jf97eg4}.id
		AND		`{$vwpalm4is_q35jf97eg4}_2`.`fieldname` = '!LastUpdated'
		AND		`{$vwpalm4is_q35jf97eg4}_2`.`value`     > %d"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_s13i75n4ph, $vwpalm4is_xdefv_gzi09); $vwpalm4is_daszhbfcyg = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_daszhbfcyg == 0) { $this->wpalm4is_l7_wr8($vwpalm4is_s13i75n4ph); } $vwpalm4is_l3mx7wc = 1; } function wpalm4is_jpthq4u3xf($vwpalm4is_s13i75n4ph) { static $vwpalm4is_r2ef1m5wyu; if ($vwpalm4is_r2ef1m5wyu[$vwpalm4is_s13i75n4ph]) { return $vwpalm4is_r2ef1m5wyu[$vwpalm4is_s13i75n4ph]; } global $wpdb; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; $vwpalm4is_xdefv_gzi09 = (int) time() - $this->options['settings']['max_contact_age'] - 10; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_cevdqnb5lzm = "
		SELECT
		`{$vwpalm4is_q35jf97eg4}`.`id`
		FROM
		`{$vwpalm4is_q35jf97eg4}`,
		`{$vwpalm4is_q35jf97eg4}` AS `{$vwpalm4is_q35jf97eg4}_2`
		WHERE	`{$vwpalm4is_q35jf97eg4}`.`appname`     = '{$vwpalm4is_dd4j20qwmn_}'
		AND 	`{$vwpalm4is_q35jf97eg4}`.`fieldname`   = 'ContactId'
		AND		`{$vwpalm4is_q35jf97eg4}`.`value`       = %d
		AND		`{$vwpalm4is_q35jf97eg4}_2`.`id`        = `{$vwpalm4is_q35jf97eg4}`.`id`
		AND		`{$vwpalm4is_q35jf97eg4}_2`.`fieldname` = '!LastUpdated'
		AND		`{$vwpalm4is_q35jf97eg4}_2`.`value`     > %d
		ORDER BY
		`{$vwpalm4is_q35jf97eg4}`.`id` ASC"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph, $vwpalm4is_xdefv_gzi09); $vwpalm4is_ukra4p = $wpdb->get_col($vwpalm4is_cevdqnb5lzm); $vwpalm4is_fawi64knts = (int) $vwpalm4is_ukra4p[0]; $vwpalm4is_r2ef1m5wyu[$vwpalm4is_s13i75n4ph] = $vwpalm4is_fawi64knts; return $vwpalm4is_fawi64knts; } function wpalm4is_f_l4k7($vwpalm4is_vzoj7cv_rsly) { global $wpdb; $vwpalm4is_vzoj7cv_rsly = (int) $vwpalm4is_vzoj7cv_rsly; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_e4r801g37ufb = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_xavx4e9gd2fr = array(); $vwpalm4is_cevdqnb5lzm = "SELECT `fieldname`, `value` FROM `{$vwpalm4is_e4r801g37ufb}` WHERE `appname` = %s AND `id` = %d "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_vzoj7cv_rsly); $vwpalm4is_kasrikuc = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); if (empty($vwpalm4is_kasrikuc) ) { $vwpalm4is_kvzbad9owmc8 = $this->wpalm4is_aojzlmu($vwpalm4is_vzoj7cv_rsly); $vwpalm4is_kvzbad9owmc8['!source'] = 'Remote'; } else { $vwpalm4is_kvzbad9owmc8 = array(); foreach ($vwpalm4is_kasrikuc as $vwpalm4is_hs69ar) { $vwpalm4is_kvzbad9owmc8[$vwpalm4is_hs69ar['fieldname']] = $vwpalm4is_hs69ar['value']; } $vwpalm4is_kvzbad9owmc8['!source'] = 'Local'; } return $vwpalm4is_kvzbad9owmc8; } function wpalm4is__e5bx3($vwpalm4is_s13i75n4ph) { } function wpalm4is_bkfn2wgx6($vwpalm4is_s13i75n4ph) { global $wpdb; static $cached_affiliate_id = array(); if (isset($cached_affiliate_id[$vwpalm4is_s13i75n4ph]) ) { return $cached_affiliate_id[$vwpalm4is_s13i75n4ph]; } if (empty($vwpalm4is_s13i75n4ph) ) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } if ($vwpalm4is_s13i75n4ph < 1) { return 0; }  $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is__igo9fqrpc_4 = array(); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is__mnral5zjy = 'Referral'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_huym27 = 0;; $vwpalm4is_fqzgw57 = array( 'ContactId' => $vwpalm4is_s13i75n4ph, ); $vwpalm4is_di3ju_46pnyb = ($this->options['settings']['referral_partner_order'] == 1); do { $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, (int) $vwpalm4is_e8ns965uk, (int) $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', true); if (is_array($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { if (! isset($vwpalm4is_hs69ar['DateExpires']) || $vwpalm4is_hs69ar['DateExpires'] >= date('Ymd\T00:00:00') ) { $vwpalm4is__igo9fqrpc_4[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; } } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + count($vwpalm4is_kmqnwo6cu5); } } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); if ($vwpalm4is_di3ju_46pnyb) { $vwpalm4is_ex9plo0kr6t7 = array_shift($vwpalm4is__igo9fqrpc_4); } else { $vwpalm4is_ex9plo0kr6t7 = array_pop($vwpalm4is__igo9fqrpc_4); } unset($vwpalm4is__igo9fqrpc_4, $vwpalm4is_kmqnwo6cu5); $cached_affiliate_id[$vwpalm4is_s13i75n4ph] = isset($vwpalm4is_ex9plo0kr6t7['AffiliateId']) ? $vwpalm4is_ex9plo0kr6t7['AffiliateId'] : 0; return $cached_affiliate_id[$vwpalm4is_s13i75n4ph]; } function wpalm4is_l7_wr8($vwpalm4is_s13i75n4ph = 0) { global $wpdb; static $vwpalm4is_mcoaz2079; if ($vwpalm4is_mcoaz2079[$vwpalm4is_s13i75n4ph]) { return $vwpalm4is_mcoaz2079[$vwpalm4is_s13i75n4ph]; } $vwpalm4is_pc0lq3 = $this->options; $vwpalm4is_vsmw53_cfzn = $this->i2sdk_options; $vwpalm4is_n1xf3or6ag = $this->i2sdk; $vwpalm4is_mseywfvazo1 = $vwpalm4is_n1xf3or6ag->isdk; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; $vwpalm4is_e8ns965uk = 1000; $vwpalm4is__mnral5zjy = 'Affiliate'; $vwpalm4is_cshmxpk = 0; $vwpalm4is_capec2nktjiu = 'ContactId'; $vwpalm4is_ndjgnlct7_9 = ($vwpalm4is_s13i75n4ph > 0) ? (int) $vwpalm4is_s13i75n4ph : '%'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, true); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_huym27 = 0; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); if ($vwpalm4is_s13i75n4ph == 0) { $vwpalm4is_fqzgw57 = array( 'ContactId' => '%' ); } else { $vwpalm4is_fqzgw57 = array( 'ContactId' => $vwpalm4is_s13i75n4ph ); } $vwpalm4is_zbjd89 = array(); do { $vwpalm4is_kmqnwo6cu5 = $vwpalm4is_mseywfvazo1->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', true); if (is_array($vwpalm4is_kmqnwo6cu5) && ! empty($vwpalm4is_kmqnwo6cu5) ) { $vwpalm4is_obr60wde = array(); $vwpalm4is_az0w4le = array(); foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_hs69ar['!LastUpdated'] = time(); $vwpalm4is_vzoj7cv_rsly = (int) $vwpalm4is_hs69ar['Id']; $vwpalm4is_zbjd89[] = $vwpalm4is_vzoj7cv_rsly; $vwpalm4is_iomhdlzi73g5[] = array(); foreach ($vwpalm4is_hs69ar as $vwpalm4is_x3e6m_hobj=>$vwpalm4is_kh9vqi_6znd) { if ($this->options['settings']['plaintext_db']) { $vwpalm4is_kh9vqi_6znd = iconv("UTF-8", "ISO-8859-1//IGNORE", remove_accents($vwpalm4is_kh9vqi_6znd) ); } $vwpalm4is_az0w4le[] = $wpdb->prepare('(%d, %s, %s, %s)', $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_x3e6m_hobj, $vwpalm4is_kh9vqi_6znd); $vwpalm4is_iomhdlzi73g5[] = $vwpalm4is_x3e6m_hobj; if ($vwpalm4is_x3e6m_hobj != $this->options['settings']['password_field']) { $vwpalm4is_kh9vqi_6znd = wp_strip_all_tags($vwpalm4is_kh9vqi_6znd); } $vwpalm4is_kh9vqi_6znd = ($vwpalm4is_kh9vqi_6znd <> 'null') ? $vwpalm4is_kh9vqi_6znd : ''; } } $vwpalm4is_cevdqnb5lzm = "INSERT INTO {$vwpalm4is_q35jf97eg4} (id, appname, fieldname, value) VALUES " . implode(',', $vwpalm4is_az0w4le) . " ON DUPLICATE KEY UPDATE id=VALUES(id), appname=VALUES(appname), fieldname=VALUES(fieldname), value=VALUES(value);"; $wpdb->query($vwpalm4is_cevdqnb5lzm); } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + count($vwpalm4is_kmqnwo6cu5); } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); if (! empty($vwpalm4is_zbjd89) ) { $vwpalm4is_cevdqnb5lzm = "DELETE FROM {$vwpalm4is_q35jf97eg4} WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' AND `id` NOT IN (" . implode(',', $vwpalm4is_zbjd89) . ");"; $wpdb->query($vwpalm4is_cevdqnb5lzm); } if ($vwpalm4is_s13i75n4ph == 0) {   set_transient('memberium_affiliates_updated', time() ); } $vwpalm4is_mcoaz2079[$vwpalm4is_s13i75n4ph] = $vwpalm4is_huym27; return $vwpalm4is_huym27; } function wpalm4is_aojzlmu($vwpalm4is_vzoj7cv_rsly) { global $wpdb; $vwpalm4is_pc0lq3 = $this->options; $vwpalm4is_vsmw53_cfzn = $this->i2sdk_options; $vwpalm4is_n1xf3or6ag = $this->i2sdk; $vwpalm4is_mseywfvazo1 = $vwpalm4is_n1xf3or6ag->isdk; $vwpalm4is_vzoj7cv_rsly = (int) $vwpalm4is_vzoj7cv_rsly; $vwpalm4is__mnral5zjy = 'Affiliate'; $vwpalm4is_e4r801g37ufb = MEMBERIUM_DB_AFFILIATES; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, true); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_hs69ar = $vwpalm4is_mseywfvazo1->dsLoad($vwpalm4is__mnral5zjy, $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_mq3gv6sdxeu); $vwpalm4is_cevdqnb5lzm = "DELETE FROM `{$vwpalm4is_e4r801g37ufb}` WHERE `appname` = %s AND `id` = %d "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_vzoj7cv_rsly); $wpdb->query($vwpalm4is_cevdqnb5lzm); if (count($vwpalm4is_hs69ar) > 1) { $vwpalm4is_hs69ar['!lastupdated'] = time(); foreach ($vwpalm4is_hs69ar as $vwpalm4is_a0g4be2=>$vwpalm4is_kh9vqi_6znd) { if ($vwpalm4is_a0g4be2 != $this->options['settings']['password_field']) { $vwpalm4is_kh9vqi_6znd = wp_strip_all_tags($vwpalm4is_kh9vqi_6znd); } $vwpalm4is_cevdqnb5lzm = "INSERT INTO `{$vwpalm4is_e4r801g37ufb}` (`id`, `appname`, `fieldname`, `value`) VALUES (%d, %s, %s, %s)"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_a0g4be2, $vwpalm4is_kh9vqi_6znd); $vwpalm4is_ukra4p = $wpdb->query($vwpalm4is_cevdqnb5lzm); } return $vwpalm4is_hs69ar; } else { return array(); } } function wpalm4is_z7n091z6() { global $wpdb; } function wpalm4is_b2et6b05v($vwpalm4is_fawi64knts, $vwpalm4is_v7c2m0n = '', $vwpalm4is_yw5l7rqo89gi = '') { $vwpalm4is_fawi64knts = (int) $vwpalm4is_fawi64knts; $vwpalm4is_cevdqnb5lzm = prepare('SELECT count(id) FROM `' . MEMBERIUM_DB_INVOICES . '` WHERE affiliateid = %d ', $vwpalm4is_fawi64knts); if ($vwpalm4is_v7c2m0n) { $vwpalm4is_cevdqnb5lzm .= $wpdb->prepare('AND datecreated >= %s ', date('Y-m-d h:i:s', strtotime($vwpalm4is_v7c2m0n) ) ); } if ($vwpalm4is_yw5l7rqo89gi) { $vwpalm4is_cevdqnb5lzm .= $wpdb->prepare('AND datecreated <= %s ', date('Y-m-d h:i:s', strtotime($vwpalm4is_yw5l7rqo89gi) ) ); } }    function wpalm4is_isej8k2uc9($vwpalm4is_g87myl0d) { $vwpalm4is_vx_n8e7hdrbo = array( 'format' => 'serial', 'invoice_id' => 0, 'contact_id' => $this->wpalm4is_yglaxnp9hw(), ); $vwpalm4is_g87myl0d = wp_parse_args($vwpalm4is_g87myl0d, $vwpalm4is_vx_n8e7hdrbo); $vwpalm4is_hrcbwqeazpv = (int) $vwpalm4is_g87myl0d['invoice_id']; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_g87myl0d['contact_id']; $vwpalm4is__8ypz9r_ = strtolower(trim($vwpalm4is_g87myl0d['format']) ); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = 'Memberium:' . $vwpalm4is_dd4j20qwmn_ . '::Receipt:' . $vwpalm4is_hrcbwqeazpv . '::Contact:' . $vwpalm4is_s13i75n4ph; $vwpalm4is_tqj1t2kv6 = array( 'invoice' => array(), 'job' => array(), 'invoiceitems' => array(), 'payments' => array(), 'paymentplan' => array(), 'paymentplanitems' => array(), 'contact' => array(), ); $vwpalm4is_tqj1t2kv6 = get_transient($vwpalm4is_ql0mb4js6); if ($vwpalm4is_tqj1t2kv6 === false) { if ($vwpalm4is_hrcbwqeazpv) {  $vwpalm4is__mnral5zjy = 'Invoice'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_uza4iu = $this->isdk->dsLoad($vwpalm4is__mnral5zjy, (int) $vwpalm4is_hrcbwqeazpv, $vwpalm4is_mq3gv6sdxeu); if (! is_super_admin() ) { if (isset($vwpalm4is_uza4iu['ContactId']) && $vwpalm4is_uza4iu['ContactId'] == $vwpalm4is_s13i75n4ph) { $vwpalm4is_hrcbwqeazpv = empty($vwpalm4is_uza4iu['Id']) ? 0 : (int) $vwpalm4is_uza4iu['Id']; $vwpalm4is_i0gyf4vtpism = empty($vwpalm4is_uza4iu['JobId']) ? 0 : (int) $vwpalm4is_uza4iu['JobId']; } else { $vwpalm4is_hrcbwqeazpv = 0; } } if ($vwpalm4is_hrcbwqeazpv) { $vwpalm4is_tqj1t2kv6['invoice'] = array_change_key_case($vwpalm4is_uza4iu, CASE_LOWER); $vwpalm4is_tqj1t2kv6['invoice']['totaldue'] = $vwpalm4is_tqj1t2kv6['invoice']['totaldue']; $vwpalm4is_tqj1t2kv6['invoice']['invoicetotal'] = $vwpalm4is_tqj1t2kv6['invoice']['invoicetotal']; $vwpalm4is_tqj1t2kv6['invoice']['totalpaid'] = $vwpalm4is_tqj1t2kv6['invoice']['totalpaid'];  $vwpalm4is_tqj1t2kv6['contact'] = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph, true);  if ($vwpalm4is_i0gyf4vtpism) { $vwpalm4is__mnral5zjy = 'Job'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_y4f763r0l = $this->isdk->dsLoad($vwpalm4is__mnral5zjy, (int) $vwpalm4is_i0gyf4vtpism, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_y4f763r0l) ) { $vwpalm4is_tqj1t2kv6['job'] = array_change_key_case($vwpalm4is_y4f763r0l, CASE_LOWER); }  $vwpalm4is__mnral5zjy = 'OrderItem'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_fqzgw57 = array('OrderId' => $vwpalm4is_i0gyf4vtpism); $vwpalm4is_pz1hfpuq68 = 'Id'; $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_as47xuvhkm1j = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); if (is_array($vwpalm4is_as47xuvhkm1j) ) { foreach($vwpalm4is_as47xuvhkm1j as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj] = array_change_key_case($vwpalm4is_kh9vqi_6znd, CASE_LOWER); $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['ppu'] = $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['ppu']; $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['cpu'] = $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['cpu']; } $vwpalm4is_tqj1t2kv6['orderitems'] = $vwpalm4is_as47xuvhkm1j; } }  $vwpalm4is__mnral5zjy = 'InvoiceItem'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_fqzgw57 = array('InvoiceId' => $vwpalm4is_hrcbwqeazpv); $vwpalm4is_pz1hfpuq68 = 'Id'; $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_as47xuvhkm1j = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); if (is_array($vwpalm4is_as47xuvhkm1j) ) { foreach($vwpalm4is_as47xuvhkm1j as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj] = array_change_key_case($vwpalm4is_kh9vqi_6znd, CASE_LOWER); $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['ppu'] = $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['ppu']; $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['cpu'] = $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['cpu']; $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['invoiceamt'] = $vwpalm4is_as47xuvhkm1j[$vwpalm4is_x3e6m_hobj]['invoiceamt']; } $vwpalm4is_tqj1t2kv6['invoiceitems'] = $vwpalm4is_as47xuvhkm1j; }  $vwpalm4is__mnral5zjy = 'Payment'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_fqzgw57 = array('InvoiceId' => $vwpalm4is_hrcbwqeazpv); $vwpalm4is_pz1hfpuq68 = 'Id'; $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_zxeu1k9 = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); $vwpalm4is_b0ubifqgny8 = 0; if (is_array($vwpalm4is_zxeu1k9) ) { foreach($vwpalm4is_zxeu1k9 as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_zxeu1k9[$vwpalm4is_x3e6m_hobj] = array_change_key_case($vwpalm4is_kh9vqi_6znd, CASE_LOWER); $vwpalm4is_zxeu1k9[$vwpalm4is_x3e6m_hobj]['payamt'] = $vwpalm4is_zxeu1k9[$vwpalm4is_x3e6m_hobj]['payamt']; } $vwpalm4is_tqj1t2kv6['payments'] = $vwpalm4is_zxeu1k9; } if ($vwpalm4is_uza4iu['TotalPaid'] < $vwpalm4is_uza4iu['InvoiceTotal']) {  $vwpalm4is__mnral5zjy = 'PayPlan'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_fqzgw57 = array('InvoiceId' => $vwpalm4is_hrcbwqeazpv); $vwpalm4is_pz1hfpuq68 = 'Id'; $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_ui16kdc = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); if (is_array($vwpalm4is_ui16kdc) ) { foreach($vwpalm4is_ui16kdc as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_ui16kdc[$vwpalm4is_x3e6m_hobj] = array_change_key_case($vwpalm4is_kh9vqi_6znd, CASE_LOWER); $vwpalm4is_ui16kdc[$vwpalm4is_x3e6m_hobj]['amtdue'] = $vwpalm4is_ui16kdc[$vwpalm4is_x3e6m_hobj]['amtdue']; $vwpalm4is_ui16kdc[$vwpalm4is_x3e6m_hobj]['firstpayamt'] = $vwpalm4is_ui16kdc[$vwpalm4is_x3e6m_hobj]['firstpayamt']; } $vwpalm4is_tqj1t2kv6['paymentplan'] = $vwpalm4is_ui16kdc[0]; }  $vwpalm4is__mnral5zjy = 'PayPlanItem'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_fqzgw57 = array('PayPlanId' => $vwpalm4is_ui16kdc[0]['id']); $vwpalm4is_pz1hfpuq68 = 'Id'; $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_mh63k5fd = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); if (is_array($vwpalm4is_mh63k5fd) ) { foreach($vwpalm4is_mh63k5fd as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_mh63k5fd[$vwpalm4is_x3e6m_hobj] = array_change_key_case($vwpalm4is_kh9vqi_6znd, CASE_LOWER); } $vwpalm4is_tqj1t2kv6['paymentplanitems'] = $vwpalm4is_mh63k5fd; } } } } } set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_tqj1t2kv6, HOUR_IN_SECONDS * 3); if ($vwpalm4is__8ypz9r_ == 'json') { $vwpalm4is_tqj1t2kv6 = json_encode($vwpalm4is_tqj1t2kv6); } return $vwpalm4is_tqj1t2kv6; } function wpalm4is_ks9jhp($vwpalm4is_s13i75n4ph, $vwpalm4is_y1k42cwg = true, $vwpalm4is_z3j0do8 = true, $vwpalm4is_sl129h46 = false) { $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph < 1) { return array(); } $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = 'Memberium::' . $vwpalm4is_dd4j20qwmn_ . '::Invoices::' . $vwpalm4is_s13i75n4ph; $vwpalm4is_digu92l_w = array(); if (! $vwpalm4is_sl129h46) { $vwpalm4is_kmqnwo6cu5 = get_transient($vwpalm4is_ql0mb4js6); } if (empty($vwpalm4is_digu92l_w) ) { $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_pz1hfpuq68 = 'DateCreated'; $vwpalm4is_fqzgw57 = array( 'ContactId' => (int) $vwpalm4is_s13i75n4ph ); $vwpalm4is_mq3gv6sdxeu = array( 'Id', 'CreditStatus', 'DateCreated', 'Description', 'InvoiceTotal', 'InvoiceType', 'JobId', 'PayPlanStatus', 'PayStatus', 'ProductSold', 'RefundStatus', 'TotalDue', 'TotalPaid', ); $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQueryOrderBy('Invoice', 1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_kmqnwo6cu5, 1800); } foreach($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_vzoj7cv_rsly = $vwpalm4is_hs69ar['Id']; $vwpalm4is_hs69ar['!payment_due'] = ($vwpalm4is_hs69ar['TotalDue'] - $vwpalm4is_hs69ar['TotalPaid']); if ($vwpalm4is_y1k42cwg && empty($vwpalm4is_hs69ar['!payment_due']) ) { $vwpalm4is_digu92l_w[$vwpalm4is_vzoj7cv_rsly] = $vwpalm4is_hs69ar;  } if ($vwpalm4is_z3j0do8 && (! empty($vwpalm4is_hs69ar['!payment_due']) ) ) { $vwpalm4is_digu92l_w[$vwpalm4is_vzoj7cv_rsly] = $vwpalm4is_hs69ar;      } } return $vwpalm4is_digu92l_w; } function wpalm4is_ecgnd8h1v0($vwpalm4is_hrcbwqeazpv = 0) { $vwpalm4is_hrcbwqeazpv = (int) $vwpalm4is_hrcbwqeazpv; if ($vwpalm4is_hrcbwqeazpv < 1) { return array(); } $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = "Memberium::{$vwpalm4is_dd4j20qwmn_}::Invoice::{$vwpalm4is_hrcbwqeazpv}"; $vwpalm4is_digu92l_w = array(); $vwpalm4is_kmqnwo6cu5 = get_transient($vwpalm4is_ql0mb4js6); if (empty($vwpalm4is_kmqnwo6cu5) ) { $vwpalm4is_digu92l_w = $this->wpalm4is_ks9jhp($vwpalm4is_s13i75n4ph, true, true); } if (empty($vwpalm4is_kmqnwo6cu5) ) { $vwpalm4is_di3ju_46pnyb = true; $vwpalm4is_pz1hfpuq68 = 'DateCreated'; $vwpalm4is_fqzgw57 = array( 'ContactId' => (int) $vwpalm4is_s13i75n4ph ); $return_fields = array( 'Id', 'CreditStatus', 'DateCreated', 'Description', 'InvoiceTotal', 'InvoiceType', 'PayPlanStatus', 'PayStatus', 'ProductSold', 'RefundStatus', 'TotalDue', 'TotalPaid', ); $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQueryOrderBy('Invoice', 1000, 0, $vwpalm4is_fqzgw57, $return_fields, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_kmqnwo6cu5, 1800); } foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { if ($vwpalm4is_y1k42cwg && $vwpalm4is_hs69ar['PayStatus'] == 1) { $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!amountdue'] = 0; $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!amountpaid'] = $vwpalm4is_hs69ar['TotalPaid']; } if ($unpaid && $vwpalm4is_hs69ar['InvoiceTotal'] > $vwpalm4is_hs69ar['TotalPaid']) { $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!payplan'] = $this->wpalm4is_z3t7azgpine( (int) $vwpalm4is_hs69ar['Id']); $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!payplanitems'] = $this->wpalm4is_n0a2v6( (int) $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!payplan']['Id']); foreach ($vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!payplanitems'] as $payplanitem) { if (isset($payplanitem['AmtDue']) && $payplanitem['AmtDue'] > 0) { $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!amountdue'] = $payplanitem['AmtDue']; $vwpalm4is_digu92l_w[$vwpalm4is_hs69ar['Id']]['!amountpaid'] = $payplanitem['AmtPaid']; break; } else { } } } } return $vwpalm4is_digu92l_w; } function wpalm4is_sg31v_($vwpalm4is_i0gyf4vtpism = 0) { $vwpalm4is_i0gyf4vtpism = (int) $vwpalm4is_i0gyf4vtpism; if ($vwpalm4is_i0gyf4vtpism < 1) { return array(); } $vwpalm4is_fqzgw57 = array( 'JobId' => $vwpalm4is_i0gyf4vtpism ); $vwpalm4is__mnral5zjy = 'Invoice'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_digu92l_w = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, 1, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); $vwpalm4is_uza4iu = array(); if (is_array($vwpalm4is_digu92l_w) && isset($vwpalm4is_digu92l_w[0]) ) { $vwpalm4is_uza4iu = (is_array($vwpalm4is_digu92l_w) && isset($vwpalm4is_digu92l_w[0]) ) ? $vwpalm4is_digu92l_w[0] : array(); $vwpalm4is_ql0mb4js6 = "Memberium::{$vwpalm4is_dd4j20qwmn_}::Invoice::{$vwpalm4is_uza4iu['Id']}"; set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_uza4iu, 1800); } return $vwpalm4is_uza4iu; } function wpalm4is_z3t7azgpine($vwpalm4is_hrcbwqeazpv = 0) { if ($vwpalm4is_hrcbwqeazpv == 0) { return FALSE; } $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = "Memberium::{$vwpalm4is_dd4j20qwmn_}::PayPlans::{$vwpalm4is_hrcbwqeazpv}"; $vwpalm4is_nip9685 = get_transient($vwpalm4is_ql0mb4js6); if (! empty($vwpalm4is_nip9685) ) { return $vwpalm4is_nip9685; } $vwpalm4is_hrcbwqeazpv = (int) $vwpalm4is_hrcbwqeazpv; $vwpalm4is__mnral5zjy = 'PayPlan'; $vwpalm4is_fqzgw57 = array('InvoiceId' => $vwpalm4is_hrcbwqeazpv); $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy); $vwpalm4is_nip9685 = $this->isdk->dsQuery($vwpalm4is__mnral5zjy, 1, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_nip9685) && count($vwpalm4is_nip9685) > 0) { set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_nip9685[0], 1800); return $vwpalm4is_nip9685[0]; } else { return FALSE; } } function wpalm4is_n0a2v6($vwpalm4is_xp0f1k3hoq4 = 0) { if ($vwpalm4is_xp0f1k3hoq4 == 0) { return FALSE; } $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = 'Memberium::' . $vwpalm4is_dd4j20qwmn_ . '::PayPlanItems::' . $vwpalm4is_xp0f1k3hoq4; $vwpalm4is_bi3ucjz_5k = get_transient($vwpalm4is_ql0mb4js6); if (is_array($vwpalm4is_bi3ucjz_5k) ) {  } $vwpalm4is__mnral5zjy = 'PayPlanItem'; $vwpalm4is_fqzgw57 = array('PayPlanId' => (int) $vwpalm4is_xp0f1k3hoq4); $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy); $vwpalm4is_bi3ucjz_5k = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, 1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'DateDue', 1 ); if (count($vwpalm4is_bi3ucjz_5k) > 0) { set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_bi3ucjz_5k, 1800); return $vwpalm4is_bi3ucjz_5k; } else { return FALSE; } } function wpalm4is_xlbi2waj98rp() { $vwpalm4is_e8ns965uk = 1000; $vwpalm4is__mnral5zjy = 'SubscriptionPlan'; $vwpalm4is_cshmxpk = 0; $vwpalm4is_capec2nktjiu = 'Id'; $vwpalm4is_ndjgnlct7_9 = '%'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_huym27 = 0; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = 'Memberium::' . $vwpalm4is_dd4j20qwmn_ . '::SubscriptionPlans'; $vwpalm4is_fqzgw57 = array( 'Id' => $vwpalm4is_ndjgnlct7_9 ); $vwpalm4is_ypswu09 = array(); do { $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQuery($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); if (is_array($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_ypswu09[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + count($vwpalm4is_kmqnwo6cu5); } } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); unset($vwpalm4is_kmqnwo6cu5, $vwpalm4is_hs69ar); foreach($vwpalm4is_ypswu09 as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_hs69ar) { switch ( (int) $vwpalm4is_hs69ar['Cycle']) { case 6: $vwpalm4is_ypswu09[$vwpalm4is_vzoj7cv_rsly]['FrequencyWord'] = ($vwpalm4is_hs69ar['Frequency'] == 1) ? 'Day' : $vwpalm4is_hs69ar['Frequency'] . ' Days'; break; case 3: $vwpalm4is_ypswu09[$vwpalm4is_vzoj7cv_rsly]['FrequencyWord'] = ($vwpalm4is_hs69ar['Frequency'] == 1) ? 'Week' : $vwpalm4is_hs69ar['Frequency'] . ' Weeks'; break; case 2: $vwpalm4is_ypswu09[$vwpalm4is_vzoj7cv_rsly]['FrequencyWord'] = ($vwpalm4is_hs69ar['Frequency'] == 1) ? 'Month' : $vwpalm4is_hs69ar['Frequency'] . ' Months'; break; case 1: $vwpalm4is_ypswu09[$vwpalm4is_vzoj7cv_rsly]['FrequencyWord'] = ($vwpalm4is_hs69ar['Frequency'] == 1) ? 'Year' : $vwpalm4is_hs69ar['Frequency'] . ' Yearly'; break; } } if (! empty($vwpalm4is_ypswu09) && is_array($vwpalm4is_ypswu09) ) { set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_ypswu09, (3 * HOUR_IN_SECONDS) ); } else { $vwpalm4is_ypswu09 = false; } return $vwpalm4is_ypswu09; } function wpalm4is_rkfrzw() { $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = 'Memberium::' . $vwpalm4is_dd4j20qwmn_ . '::SubscriptionPlans'; $vwpalm4is_zua2jqcw95 = get_transient($vwpalm4is_ql0mb4js6); if (empty($vwpalm4is_zua2jqcw95) ) { $vwpalm4is_zua2jqcw95 = $this->wpalm4is_xlbi2waj98rp(); } return $vwpalm4is_zua2jqcw95; } function wpalm4is_legzk6tfj($vwpalm4is_i0gyf4vtpism = 0) { if ($vwpalm4is_i0gyf4vtpism == 0) { return FALSE; } $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_i0gyf4vtpism = (int) $vwpalm4is_i0gyf4vtpism; $vwpalm4is_ql0mb4js6 = "Memberium::{$vwpalm4is_dd4j20qwmn_}::OrderItems::{$vwpalm4is_i0gyf4vtpism}"; $vwpalm4is_xliy4nof8thu = get_transient($vwpalm4is_ql0mb4js6); if (! empty($vwpalm4is_xliy4nof8thu) ) { return $vwpalm4is_xliy4nof8thu; } unset($vwpalm4is_xliy4nof8thu); $vwpalm4is__mnral5zjy = 'OrderItem'; $vwpalm4is_fqzgw57 = array('OrderId' => $vwpalm4is_i0gyf4vtpism); $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy); $vwpalm4is_xliy4nof8thu = $this->isdk->dsQuery($vwpalm4is__mnral5zjy, 1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); if (! empty($vwpalm4is_xliy4nof8thu) ) { if (is_array($vwpalm4is_xliy4nof8thu) ) { set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_xliy4nof8thu, 1800); return $vwpalm4is_xliy4nof8thu; } } return FALSE; } function wpalm4is_eze0o74d1p($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_sl129h46 = false) { if ($vwpalm4is_s13i75n4ph == 0) { $vwpalm4is_s13i75n4ph = $this->wpalm4is_yglaxnp9hw(); } $vwpalm4is_ql0mb4js6 = 'memberium_subscriptions::' . $vwpalm4is_s13i75n4ph; $vwpalm4is_f_cfqo = get_transient($vwpalm4is_ql0mb4js6); if ($vwpalm4is_f_cfqo === false || $vwpalm4is_sl129h46) { $vwpalm4is_fqzgw57 = array( 'ContactId' => $vwpalm4is_s13i75n4ph ); $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('RecurringOrder'); $vwpalm4is_pz1hfpuq68 = 'Id'; $vwpalm4is_di3ju_46pnyb = false; $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQueryOrderBy('RecurringOrder', 1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_pz1hfpuq68, $vwpalm4is_di3ju_46pnyb); if (is_array($vwpalm4is_kmqnwo6cu5) && ! empty($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_f_cfqo[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; } } set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_f_cfqo, HOUR_IN_SECONDS / 12); unset($vwpalm4is_kmqnwo6cu5, $vwpalm4is_hs69ar, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_fqzgw57); } if (is_array($vwpalm4is_f_cfqo) ) { foreach($vwpalm4is_f_cfqo as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { if (! empty($vwpalm4is_x1folrs['EndDate']) && $vwpalm4is_x1folrs['Status'] == 'Active' && $vwpalm4is_x1folrs['EndDate'] < date('Ymd') ) { $vwpalm4is_x1folrs['Status'] = 'Inactive'; } if ($vwpalm4is_x1folrs['Status'] <> 'Active') { $vwpalm4is_x1folrs['NextBillDate'] = ''; } $vwpalm4is_f_cfqo[$vwpalm4is_ndxvp20] = $vwpalm4is_x1folrs; } } return $vwpalm4is_f_cfqo; } function wpalm4is_xsd2r8u56($vwpalm4is_s13i75n4ph = 0) { global $wpdb; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_INVOICES; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT MAX(`jobid`) FROM `{$vwpalm4is_q35jf97eg4}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' AND `contactid` = {$vwpalm4is_s13i75n4ph};"; return (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); } function wpalm4is_h7g5fzu4() { global $wpdb; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_INVOICES; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT MAX(`jobid`) FROM `{$vwpalm4is_q35jf97eg4}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}';"; return (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); } function wpalm4is__gr431e9a8x() { global $wpdb; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_INVOICES; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT MAX(`datecreateed`) FROM `{$vwpalm4is_q35jf97eg4}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}';"; return strtotime($wpdb->get_var($vwpalm4is_cevdqnb5lzm) ); } function wpalm4is_equrvgo2($vwpalm4is_hrcbwqeazpv = 0) { global $wpdb; $vwpalm4is_ttuymbl = get_option('memberium_tables_updated', array() ); $vwpalm4is_pc0lq3 = $this->options; $vwpalm4is_vsmw53_cfzn = $this->i2sdk_options; $vwpalm4is_n1xf3or6ag = $this->i2sdk; $vwpalm4is_mseywfvazo1 = $vwpalm4is_n1xf3or6ag->isdk; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_INVOICES; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ttuymbl['invoices'] = isset($vwpalm4is_ttuymbl['invoices']) ? $vwpalm4is_ttuymbl['invoices'] : 0;  $vwpalm4is_cevdqnb5lzm = "SELECT MAX(`lastupdated`) FROM `{$vwpalm4is_q35jf97eg4}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}';"; $vwpalm4is__24nr1v = $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if (! $vwpalm4is__24nr1v) { $vwpalm4is__24nr1v = '1969-01-20T00:00:00'; }  $vwpalm4is__mnral5zjy = 'Invoice'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_huym27 = 0; $vwpalm4is_fqzgw57 = array( 'LastUpdated' => '~>=~ ' . $vwpalm4is__24nr1v, ); $template_row = array( 'CreditStatus' => 0, 'Description' => '', 'InvoiceTotal' => 0, 'InvoiceType' => '', 'JobId' => 0, 'LeadAffiliateId' => 0, 'PayPlanStatus' => 0, 'PayStatus' => 0, 'ProductSold' => '', 'PromoCode' => '', 'RefundStatus' => 0, 'Synced' => 0, 'TotalDue' => 0, 'TotalPaid' => 0, ); do { $vwpalm4is_kmqnwo6cu5 = $vwpalm4is_mseywfvazo1->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'LastUpdated', true); set_time_limit(30); if (is_array($vwpalm4is_kmqnwo6cu5) && count($vwpalm4is_kmqnwo6cu5) > 0) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_hs69ar = array_merge($template_row, $vwpalm4is_hs69ar); $vwpalm4is_hs69ar['LastUpdated'] = (isset($vwpalm4is_hs69ar['LastUpdated']) ) ? $vwpalm4is_hs69ar['LastUpdated'] : $vwpalm4is_hs69ar['DateCreated']; $vwpalm4is_vzoj7cv_rsly = (int) $vwpalm4is_hs69ar['Id']; $wpdb->query("DELETE FROM `{$vwpalm4is_q35jf97eg4}` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' AND `id` = {$vwpalm4is_vzoj7cv_rsly};"); $vwpalm4is_cevdqnb5lzm = "INSERT INTO `{$vwpalm4is_q35jf97eg4}` " . "(`id`, `appname`, `contactid`, `creditstatus`, `datecreated`, `description`, `invoicetotal`, `invoicetype`, `jobid`, `lastupdated`, `leadaffiliateid`, `payplanstatus`, `paystatus`, `productsold`, `promocode`, `refundstatus`, `totaldue`, `totalpaid`) " . "VALUES " . "(%d, %s, %d, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare( $vwpalm4is_cevdqnb5lzm, $vwpalm4is_hs69ar['Id'], $vwpalm4is_dd4j20qwmn_, $vwpalm4is_hs69ar['ContactId'], $vwpalm4is_hs69ar['CreditStatus'], date('Y-m-d h:i:s', strtotime($vwpalm4is_hs69ar['DateCreated']) ), $vwpalm4is_hs69ar['Description'], $vwpalm4is_hs69ar['InvoiceTotal'], $vwpalm4is_hs69ar['InvoiceType'], $vwpalm4is_hs69ar['JobId'], date('Y-m-d h:i:s', strtotime($vwpalm4is_hs69ar['LastUpdated']) ), $vwpalm4is_hs69ar['LeadAffiliateId'], $vwpalm4is_hs69ar['PayPlanStatus'], $vwpalm4is_hs69ar['PayStatus'], ',' . $vwpalm4is_hs69ar['ProductSold'] . ',', isset($vwpalm4is_hs69ar['PromoCode']) ? $vwpalm4is_hs69ar['PromoCode'] : '', $vwpalm4is_hs69ar['RefundStatus'], $vwpalm4is_hs69ar['Synced'], $vwpalm4is_hs69ar['TotalDue'], $vwpalm4is_hs69ar['TotalPaid'] ); $wpdb->query($vwpalm4is_cevdqnb5lzm); } } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + count($vwpalm4is_kmqnwo6cu5); if ($vwpalm4is_huym27 > 100) { break; } set_time_limit(30); } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); $vwpalm4is_ttuymbl['invoices'] = time(); update_option('memberium_tables_updated', $vwpalm4is_ttuymbl, false); return $vwpalm4is_huym27; } function wpalm4is_kojyvb($vwpalm4is_s13i75n4ph = false) { global $wpdb; if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = $this->wpalm4is_yglaxnp9hw(); } $vwpalm4is_ql0mb4js6 = "memberium_jobs::{$vwpalm4is_s13i75n4ph}"; $vwpalm4is_lgjwcqr8 = get_transient($vwpalm4is_ql0mb4js6); $vwpalm4is_lgjwcqr8 = false; if ($vwpalm4is_lgjwcqr8 === false) { $vwpalm4is_pc0lq3 = $this->options; $vwpalm4is_vsmw53_cfzn = $this->i2sdk_options; $vwpalm4is_n1xf3or6ag = $this->i2sdk; $vwpalm4is_mseywfvazo1 = $vwpalm4is_n1xf3or6ag->isdk; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_JOBS; $vwpalm4is__mnral5zjy = 'Job'; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7($vwpalm4is__mnral5zjy, false); $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_huym27 = 0; $vwpalm4is_lgjwcqr8 = array(); $vwpalm4is_fqzgw57 = array( 'ContactId' => (int) $vwpalm4is_s13i75n4ph, ); do { set_time_limit(30); $vwpalm4is_kmqnwo6cu5 = $vwpalm4is_mseywfvazo1->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', true); if (is_array($vwpalm4is_kmqnwo6cu5) ) { foreach($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_lgjwcqr8[$vwpalm4is_hs69ar['Id']] = $vwpalm4is_hs69ar; } } $vwpalm4is_cshmxpk++; } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); $vwpalm4is_huym27 = count($vwpalm4is_lgjwcqr8); if ($vwpalm4is_huym27) { set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_lgjwcqr8, HOUR_IN_SECONDS); } else { set_transient($vwpalm4is_ql0mb4js6, $vwpalm4is_lgjwcqr8, 300); } } $vwpalm4is_huym27 = count($vwpalm4is_lgjwcqr8); return $vwpalm4is_lgjwcqr8; } function wpalm4is_yr195f_83zy() { $vwpalm4is_e8ns965uk = 999; $vwpalm4is__mnral5zjy = 'RecurringOrder'; $vwpalm4is_cshmxpk = 0; $vwpalm4is_capec2nktjiu = 'Id'; $vwpalm4is_ndjgnlct7_9 = '%'; $vwpalm4is_huym27 = 0; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ypswu09 = array(); $vwpalm4is_mq3gv6sdxeu = array( 'Id', 'Status', 'ContactId', 'EndDate', 'ReasonStopped', ); $vwpalm4is_fqzgw57 = array( 'Status' => 'Active', 'EndDate' => '~<=~' . date('Y-m-d'), ); do { $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQuery($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); if (! empty($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_hs69ar['EndDate'] = (isset($vwpalm4is_hs69ar['EndDate']) ) ? $vwpalm4is_hs69ar['EndDate'] : ''; $vwpalm4is_hs69ar['ReasonStopped'] = (isset($vwpalm4is_hs69ar['ReasonStopped']) ) ? trim($vwpalm4is_hs69ar['ReasonStopped']) : ''; if ($vwpalm4is_hs69ar['EndDate'] > '' && $vwpalm4is_hs69ar['EndDate'] < date('Ymd\T00:00:00') ) { $vwpalm4is_mz5qdso = array(); if ($vwpalm4is_hs69ar['ReasonStopped'] == '') { $vwpalm4is_mz5qdso['ReasonStopped'] = "End Date Passed.\nAutoEnded by Memberium"; } $vwpalm4is_mz5qdso['EndDate'] = date('Ymd\Th:i:s'); $vwpalm4is_mz5qdso['Status'] = 'Inactive'; $this->isdk->dsUpdate('RecurringOrder', (int) $vwpalm4is_hs69ar['Id'], $vwpalm4is_mz5qdso); } } } $vwpalm4is_cshmxpk++; } while (count($vwpalm4is_kmqnwo6cu5) == $vwpalm4is_e8ns965uk); unset($vwpalm4is_kmqnwo6cu5, $vwpalm4is_hs69ar); return $vwpalm4is_ypswu09; }  function wpalm4is_harlv2pw($vwpalm4is_szexg1su6) { $vwpalm4is_z1wxnf9y3zoa = strtolower(substr($vwpalm4is_szexg1su6['bypass_commissions'], 0, 1) ); $vwpalm4is_z1wxnf9y3zoa = ($vwpalm4is_z1wxnf9y3zoa == 'y' || $vwpalm4is_z1wxnf9y3zoa == 1) ? TRUE : FALSE; $vwpalm4is_z1wxnf9y3zoa = (bool) $vwpalm4is_szexg1su6['bypass_commissions']; $vwpalm4is_yf05acvqj = strtolower(substr($vwpalm4is_szexg1su6['delete_failed'], 0, 1) ); $vwpalm4is_yf05acvqj = ($vwpalm4is_yf05acvqj == 'y' || $vwpalm4is_yf05acvqj == 1) ? TRUE : FALSE; $vwpalm4is_cfasv0rnjce = (int) $vwpalm4is_szexg1su6['product_type']; $vwpalm4is_cfasv0rnjce = ($vwpalm4is_szexg1su6['product_type'] > 0 && $vwpalm4is_szexg1su6['product_type'] < 15) ? $vwpalm4is_szexg1su6['product_type'] : 4; $vwpalm4is_txpnyb = (bool) $vwpalm4is_szexg1su6['autorun']; $vwpalm4is_nae5gwn = (int) $vwpalm4is_szexg1su6['creditcard_id']; $vwpalm4is_yf05acvqj = (bool) $vwpalm4is_szexg1su6['delete_failed']; $vwpalm4is_cfasv0rnjce = (int) $vwpalm4is_szexg1su6['item_type']; $vwpalm4is_gyefdl_kq13 = (int) $vwpalm4is_szexg1su6['lead_affiliate_id']; $vwpalm4is_dsx26d0h = (int) $vwpalm4is_szexg1su6['merchant_id']; $vwpalm4is_flb8_x3u = (int) $vwpalm4is_szexg1su6['product_id']; $vwpalm4is_j0hgpnr = trim($vwpalm4is_szexg1su6['product_description']); $vwpalm4is_yqdeuxyjml = (float) $vwpalm4is_szexg1su6['product_price']; $vwpalm4is_cu_04yvx7 = (int) $vwpalm4is_szexg1su6['quantity']; $vwpalm4is_v6lpqgtwoi90 = (int) $vwpalm4is_szexg1su6['sales_affiliate_id']; $vwpalm4is_crlimv6ncz4 = (int) $vwpalm4is_szexg1su6['has_payment_plan']; $vwpalm4is_olg728j4 = $vwpalm4is_szexg1su6['order_date']; $vwpalm4is_hlndbxem1 = (bool) $vwpalm4is_szexg1su6['taxable']; $vwpalm4is_kl9w3cuo0hrb = trim($vwpalm4is_szexg1su6['success_action']); $vwpalm4is_st4xf15 = trim($vwpalm4is_szexg1su6['success_goals']); $vwpalm4is_bx5l4tj = trim($vwpalm4is_szexg1su6['success_tags']); $vwpalm4is_l0t6j1hqy = trim($vwpalm4is_szexg1su6['fail_action']); $vwpalm4is_cy2arv5 = trim($vwpalm4is_szexg1su6['fail_goals']); $vwpalm4is_pjsu1fdgwxvh = trim($vwpalm4is_szexg1su6['fail_tags']); if ($vwpalm4is_crlimv6ncz4) { $vwpalm4is_cut1ef = (bool) $vwpalm4is_szexg1su6['payplan_autocharge']; $vwpalm4is_b0t4s9 = (int) $vwpalm4is_szexg1su6['payplan_max_retries']; $vwpalm4is_pu3s8_ = (int) $vwpalm4is_szexg1su6['payplan_retry_days']; $vwpalm4is_kgjbdf9i = (float) $vwpalm4is_szexg1su6['payplan_initial_amount']; $vwpalm4is_rca4snk3 = (int) $vwpalm4is_szexg1su6['payplan_payment_count']; $vwpalm4is_y6uc8z3dgvm4 = (int) $vwpalm4is_szexg1su6['payplan_days_between']; }  $vwpalm4is_olg728j4 = date('Y-m-d\TH:i:s'); $vwpalm4is_hrcbwqeazpv = $this->isdk->blankOrder($vwpalm4is_s13i75n4ph, $vwpalm4is_j0hgpnr, $vwpalm4is_olg728j4, $vwpalm4is_gyefdl_kq13, $vwpalm4is_v6lpqgtwoi90); $this->isdk->addOrderItem($vwpalm4is_hrcbwqeazpv, $vwpalm4is_flb8_x3u, $vwpalm4is_cfasv0rnjce, $vwpalm4is_yqdeuxyjml, $vwpalm4is_cu_04yvx7, $product_name, $vwpalm4is_j0hgpnr); if ($vwpalm4is_crlimv6ncz4) { $vwpalm4is_hxvrpbfjc = $app->infuDate("10-11-2008"); $vwpalm4is_euejwbzkts = $app->infuDate("10-25-2008"); $vwpalm4is_ukra4p = $app->payPlan($vwpalm4is_hrcbwqeazpv, $vwpalm4is_cut1ef, $vwpalm4is_nae5gwn, $vwpalm4is_dsx26d0h, $vwpalm4is_pu3s8_, $vwpalm4is_b0t4s9, $vwpalm4is_kgjbdf9i, $payplan_initial_date, $payplan_startdate, $vwpalm4is_rca4snk3, $vwpalm4is_y6uc8z3dgvm4); } if ($vwpalm4is_hlndbxem1) { $ret = $this->isdk->recalculateTax($vwpalm4is_hrcbwqeazpv); } $vwpalm4is_ukra4p = $this->isdk->chargeInvoice($vwpalm4is_hrcbwqeazpv, 'Memberium API Order', $vwpalm4is_nae5gwn, $vwpalm4is_dsx26d0h, FALSE); if (in_array(strtolower($vwpalm4is_ukra4p['Code']), array('approved', 'skipped') ) ) {  $vwpalm4is_ukra4p = $vwpalm4is_hrcbwqeazpv; if ($success_action > '') { $this->wpalm4is_soe2avpm($vwpalm4is_kl9w3cuo0hrb, $vwpalm4is_s13i75n4ph); } if ($success_goals > '') { $this->wpalm4is_jljv9kr($vwpalm4is_st4xf15, $vwpalm4is_s13i75n4ph); } if ($success_tags > '') { $this->wpalm4is_yp5awiqcv($vwpalm4is_bx5l4tj, $vwpalm4is_s13i75n4ph); } } else { if ($vwpalm4is_yf05acvqj && $vwpalm4is_hrcbwqeazpv > 0) { $this->isdk->deleteInvoice($vwpalm4is_hrcbwqeazpv); }  if ($vwpalm4is_l0t6j1hqy > '') { $this->wpalm4is_soe2avpm($fail_action, $vwpalm4is_s13i75n4ph); } if ($vwpalm4is_cy2arv5 > '') { $this->wpalm4is_jljv9kr($fail_goals, $vwpalm4is_s13i75n4ph); } if ($vwpalm4is_pjsu1fdgwxvh > '') { $this->wpalm4is_yp5awiqcv($fail_tags, $vwpalm4is_s13i75n4ph); } $vwpalm4is_ukra4p = false; } $this->wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph); } function wpalm4is_jrkc9y($vwpalm4is_i0gyf4vtpism = false) { if (empty($vwpalm4is_i0gyf4vtpism) ) { return false; }  $vwpalm4is_i0gyf4vtpism = (int) $vwpalm4is_i0gyf4vtpism; $vwpalm4is_fqzgw57 = array('OriginatingOrderId' => $vwpalm4is_i0gyf4vtpism); $vwpalm4is_iomhdlzi73g5 = array('Id'); $vwpalm4is_f_cfqo = $this->isdk->dsQuery('RecurringOrder', 1000, 0, $vwpalm4is_fqzgw57, $vwpalm4is_iomhdlzi73g5);  if (is_array($vwpalm4is_f_cfqo) ) { foreach($vwpalm4is_f_cfqo as $vwpalm4is_rgln0x3j) { if (! empty($vwpalm4is_rgln0x3j['Id']) ) { $vwpalm4is_ukra4p = $app->dsDelete('RecurringOrder', (int) $vwpalm4is_rgln0x3j['Id']); } } } } function wpalm4is_gh8q5_pyjmr1($vwpalm4is_ne17fdv8uw4) { $vwpalm4is_d8zcdwxjh1 = false; $vwpalm4is_fawi64knts = (int) $vwpalm4is_ne17fdv8uw4['affiliate_id']; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_ne17fdv8uw4['contact_id']; $vwpalm4is_nae5gwn = (int) $vwpalm4is_ne17fdv8uw4['creditcard_id']; $vwpalm4is_zg78rq = (boolean) $vwpalm4is_ne17fdv8uw4['delete_failures']; $vwpalm4is_dsx26d0h = (int) $vwpalm4is_ne17fdv8uw4['merchant_id']; $vwpalm4is_s74ine = (int) $vwpalm4is_ne17fdv8uw4['plan_id']; $vwpalm4is_uy34ebn = (double) $vwpalm4is_ne17fdv8uw4['price']; $vwpalm4is_cu_04yvx7 = (int) $vwpalm4is_ne17fdv8uw4['quantity']; $vwpalm4is_hlndbxem1 = (boolean) $vwpalm4is_ne17fdv8uw4['taxable']; $vwpalm4is_i7y2uo = (int) $vwpalm4is_ne17fdv8uw4['trial_days']; if ($vwpalm4is_s13i75n4ph < 1 || $vwpalm4is_s74ine < 1 || $vwpalm4is_cu_04yvx7 < 1 || $vwpalm4is_dsx26d0h < 1 || $vwpalm4is_nae5gwn < 1 || $vwpalm4is_uy34ebn < 0 || $vwpalm4is_t73oklcap < 0 || $vwpalm4is_az4dprva < 0) { $vwpalm4is_cnivz3qbu = false; } else { $vwpalm4is_cnivz3qbu = true; } if ($vwpalm4is_cnivz3qbu) { $vwpalm4is_mngvwkbux = (int) $this->isdk->addRecurringAdv($vwpalm4is_s13i75n4ph, $vwpalm4is_s74ine, $vwpalm4is_cu_04yvx7, $vwpalm4is_uy34ebn, $vwpalm4is_hlndbxem1, $vwpalm4is_dsx26d0h, $vwpalm4is_nae5gwn, $vwpalm4is_fawi64knts, $vwpalm4is_i7y2uo); if ($vwpalm4is_mngvwkbux > 0) { if ($vwpalm4is_i7y2uo == 0) { $vwpalm4is_hrcbwqeazpv = $this->isdk->recurringInvoice($vwpalm4is_mngvwkbux); $vwpalm4is_ukra4p = $this->isdk->chargeInvoice($vwpalm4is_hrcbwqeazpv, 'Memberium Subscription Payment', $vwpalm4is_nae5gwn, $vwpalm4is_dsx26d0h, false); if (in_array(strtolower($vwpalm4is_ukra4p['Code']), array('approved', 'skipped') ) ) { $vwpalm4is_d8zcdwxjh1 = true; } else { if ($vwpalm4is_zg78rq) { $this->isdk->deleteSubscription($vwpalm4is_mngvwkbux); } } } else { $vwpalm4is_d8zcdwxjh1 = true; } } } else { } if (! $vwpalm4is_d8zcdwxjh1) { return false; } else { return $vwpalm4is_mngvwkbux; } }     function wpalm4is_gezn98d1($vwpalm4is_r8ujkv62fomn = '', $vwpalm4is_tcon6xrp = false, $vwpalm4is_voqcm7fsy = false) { if (! $this->license_status) { return; } if (! is_array($vwpalm4is_r8ujkv62fomn) ) { $vwpalm4is_r8ujkv62fomn = explode(',', trim($vwpalm4is_r8ujkv62fomn) ); } $vwpalm4is_r8ujkv62fomn = array_filter(array_map('strtolower', $vwpalm4is_r8ujkv62fomn) ); if (empty($vwpalm4is_r8ujkv62fomn) ) { return; } if (! $vwpalm4is_tcon6xrp) { $vwpalm4is_tcon6xrp = get_current_user_id(); } if ($vwpalm4is_tcon6xrp < 1) { return; } $vwpalm4is_jdt_xpzjwo = get_user_meta($vwpalm4is_tcon6xrp, 'memberium_tokens', true); if (! $vwpalm4is_jdt_xpzjwo) { $vwpalm4is_jdt_xpzjwo = array(); } $vwpalm4is_jdt_xpzjwo = array_filter(array_map('strtolower', $vwpalm4is_jdt_xpzjwo) ); foreach ($vwpalm4is_r8ujkv62fomn as $vwpalm4is_lh95w80) { if (substr($vwpalm4is_lh95w80, 0, 1) === '-') { $vwpalm4is_lh95w80 = substr($vwpalm4is_lh95w80, 1); $vwpalm4is_x3e6m_hobj = array_search($vwpalm4is_lh95w80, $vwpalm4is_jdt_xpzjwo); unset($vwpalm4is_jdt_xpzjwo[$vwpalm4is_x3e6m_hobj]); do_action('memb_remove_token', $vwpalm4is_tcon6xrp, $vwpalm4is_lh95w80); } else { $vwpalm4is_jdt_xpzjwo[] = $vwpalm4is_lh95w80; do_action('memb_add_token', $vwpalm4is_tcon6xrp, $vwpalm4is_lh95w80); } } $vwpalm4is_jdt_xpzjwo = array_unique($vwpalm4is_jdt_xpzjwo); update_user_meta($vwpalm4is_tcon6xrp, 'memberium_tokens', $vwpalm4is_jdt_xpzjwo); } function wpalm4is_l_7zjnu($vwpalm4is_r8ujkv62fomn, $vwpalm4is_tcon6xrp = false) { if (current_user_can('manage_options') ) { return true; }  if (! $this->license_status) { return false; } if (! $vwpalm4is_tcon6xrp) { $vwpalm4is_tcon6xrp = get_current_user_id(); } if ($vwpalm4is_tcon6xrp < 1) { return; } $vwpalm4is_r8ujkv62fomn = array_filter(array_map('strtolower', explode(',', trim($vwpalm4is_r8ujkv62fomn) ) ) ); $vwpalm4is_jdt_xpzjwo = get_user_meta($vwpalm4is_tcon6xrp, 'memberium_tokens', true); if (! $vwpalm4is_jdt_xpzjwo) { $vwpalm4is_jdt_xpzjwo = array(); } $vwpalm4is_jdt_xpzjwo = array_filter(array_map('strtolower', $vwpalm4is_jdt_xpzjwo) ); if (count(array_intersect($vwpalm4is_r8ujkv62fomn, $vwpalm4is_jdt_xpzjwo) ) ) { return true; } return false; }    function wpalm4is_v9l438b($vwpalm4is_nxl_qf, $vwpalm4is_lqyrlwj5km6a = 0, $vwpalm4is_k_jdoq4w = '') { $vwpalm4is_nxl_qf = trim($vwpalm4is_nxl_qf); if ($vwpalm4is_nxl_qf == '') { return FALSE; } $vwpalm4is_j2a65bnie = array( 'GroupDescription' => $vwpalm4is_k_jdoq4w, 'GroupCategoryId' => $vwpalm4is_lqyrlwj5km6a, 'GroupName' => $vwpalm4is_nxl_qf ); $vwpalm4is_umca1b6 = $this->isdk->dsAdd('ContactGroup', $vwpalm4is_j2a65bnie); if ($vwpalm4is_umca1b6 > 0) {  global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = 'INSERT INTO `' . MEMBERIUM_DB_TAGS . '` (`id`, `appname`, `name`, `category`) VALUES (%d, %s, %s, %s);'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_umca1b6, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_nxl_qf, $vwpalm4is_lqyrlwj5km6a); $wpdb->query($vwpalm4is_cevdqnb5lzm); return $vwpalm4is_umca1b6; } return FALSE; } function wpalm4is_r0xujgspdvi($vwpalm4is_wrg4x2_wq = false) { global $wpdb;  $vwpalm4is_cevdqnb5lzm = 'SELECT `name`, `id` FROM `' . MEMBERIUM_DB_TAGS . '` WHERE `appname` = %s ORDER BY `name`;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname') ); $vwpalm4is_gf2m1t7v8nbz = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_N); $vwpalm4is_mqe2adg = array(); if (is_array($vwpalm4is_gf2m1t7v8nbz) ) { foreach($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { $vwpalm4is_mqe2adg[] = trim($vwpalm4is_agvwtn[0]) . ' (' . $vwpalm4is_agvwtn[1] . ')'; if ($vwpalm4is_wrg4x2_wq) { $vwpalm4is_mqe2adg[] = '-' . trim($vwpalm4is_agvwtn[0]) . ' (' . $vwpalm4is_agvwtn[1] . ')'; } } } return $vwpalm4is_mqe2adg; } function wpalm4is_dho3j_z($vwpalm4is_nxl_qf) { $vwpalm4is_nxl_qf = trim($vwpalm4is_nxl_qf); if ( (int) $vwpalm4is_nxl_qf > 0) { return $vwpalm4is_nxl_qf; } if ($vwpalm4is_nxl_qf == '') { return false; } global $wpdb;  $vwpalm4is_cevdqnb5lzm = 'SELECT `id` FROM `' . MEMBERIUM_DB_TAGS . '` WHERE `id` > 0 AND `appname` = %s AND `name` = %s ORDER BY `id` LIMIT 1;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'), $vwpalm4is_nxl_qf); $vwpalm4is_umca1b6 = (int) $wpdb->get_var($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_umca1b6 > 0) { return $vwpalm4is_umca1b6; } else { return false; } }  public function wpalm4is_gl7pqgzdyx($vwpalm4is__f83lodeqp45, $vwpalm4is_tu8riks3dxn){ $vwpalm4is_itc61n3zpfd7 = $this->options; $vwpalm4is_la4pzw = isset($vwpalm4is_itc61n3zpfd7['memberships']) && is_array($vwpalm4is_itc61n3zpfd7['memberships']) ? $vwpalm4is_itc61n3zpfd7['memberships'] : array(); return $vwpalm4is_la4pzw; }  public function wpalm4is_mngf89($vwpalm4is__f83lodeqp45, $vwpalm4is_tu8riks3dxn){ $vwpalm4is_lj4srzwt5yx1 = array(); $vwpalm4is_gf2m1t7v8nbz = wpalm4is_l9n25d::wpalm4is_d35w2jzaf(true, true); $vwpalm4is_gf2m1t7v8nbz = (isset($vwpalm4is_gf2m1t7v8nbz['hn']) ) ? $vwpalm4is_gf2m1t7v8nbz['hn'] : false; if ($vwpalm4is_gf2m1t7v8nbz){ foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_agvwtn) { $vwpalm4is_lj4srzwt5yx1[$vwpalm4is_vzoj7cv_rsly] = $vwpalm4is_agvwtn . ' (' . str_replace('-', '', $vwpalm4is_vzoj7cv_rsly) . ')'; } } return $vwpalm4is_lj4srzwt5yx1; }  static function wpalm4is_d35w2jzaf($vwpalm4is_f2cl4u10w = false, $vwpalm4is_wy_p41 = false) { global $wpdb; static $vwpalm4is_eksyf5; $vwpalm4is_o70_tv = (int) $vwpalm4is_f2cl4u10w; $vwpalm4is_itc61n3zpfd7 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings'); if (! isset($vwpalm4is_eksyf5[$vwpalm4is_o70_tv]) ) {  $vwpalm4is_mohu8ty3 = ''; if ($vwpalm4is_f2cl4u10w == true && $vwpalm4is_itc61n3zpfd7['ignore_tag_categories'] > '') { $vwpalm4is_mohu8ty3 = ' AND category NOT IN (' . $vwpalm4is_itc61n3zpfd7['ignore_tag_categories'] . ') '; } $vwpalm4is_xokp0is = array(); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_TAGS; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT id, name FROM {$vwpalm4is_q35jf97eg4} WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' {$vwpalm4is_mohu8ty3} ORDER BY category, name "; $vwpalm4is_gf2m1t7v8nbz = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { $vwpalm4is_xokp0is['mc'][$vwpalm4is_agvwtn['id']] = $vwpalm4is_agvwtn['name']; $vwpalm4is_xokp0is['lc'][$vwpalm4is_agvwtn['id']] = strtolower($vwpalm4is_agvwtn['name']); } $vwpalm4is_ukra4p = $vwpalm4is_xokp0is; $vwpalm4is_eksyf5[$vwpalm4is_o70_tv] = $vwpalm4is_ukra4p; } else { $vwpalm4is_ukra4p = $vwpalm4is_eksyf5[$vwpalm4is_o70_tv]; }  if ($vwpalm4is_wy_p41) { if (! empty($vwpalm4is_ukra4p['mc']) && is_array($vwpalm4is_ukra4p['mc']) ){ $vwpalm4is_ukra4p['hn'] = array(); $vwpalm4is_mjl9id6p = __('Does Not Have', 'memberium'); foreach ($vwpalm4is_ukra4p['mc'] as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_agvwtn) { $vwpalm4is_ukra4p['hn'][$vwpalm4is_vzoj7cv_rsly] = $vwpalm4is_agvwtn; $vwpalm4is_ukra4p['hn'][ '-' . $vwpalm4is_vzoj7cv_rsly] = $vwpalm4is_mjl9id6p . ' ' . $vwpalm4is_agvwtn; } } } return $vwpalm4is_ukra4p; }  function wpalm4is_kwkb3c1($vwpalm4is_gf2m1t7v8nbz) { global $wpdb;  if (is_array($vwpalm4is_gf2m1t7v8nbz) ) { $vwpalm4is_gf2m1t7v8nbz = implode(',', $vwpalm4is_gf2m1t7v8nbz); } $vwpalm4is_gf2m1t7v8nbz = trim($vwpalm4is_gf2m1t7v8nbz, ','); if (trim($vwpalm4is_gf2m1t7v8nbz) == '') { return; } $vwpalm4is_cevdqnb5lzm = "SELECT `name` FROM `". MEMBERIUM_DB_TAGS . "` WHERE `id` in ({$vwpalm4is_gf2m1t7v8nbz}) ORDER BY `name` ASC;"; $vwpalm4is_kmqnwo6cu5 = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_ic4udy[] = $vwpalm4is_hs69ar['name']; } if (count($vwpalm4is_ic4udy) > 0) { $vwpalm4is_ah356etf8 = implode(', ', $vwpalm4is_ic4udy); } return $vwpalm4is_ah356etf8; } function wpalm4is_kzi_5oj($vwpalm4is_yr8kinx) { if (! is_array($vwpalm4is_yr8kinx) ) { $vwpalm4is_gf2m1t7v8nbz = preg_replace(array('/, */', '/ *,/'), ',', trim($vwpalm4is_yr8kinx) ); $vwpalm4is_gf2m1t7v8nbz = explode(',', $vwpalm4is_gf2m1t7v8nbz); } else { if (is_array($vwpalm4is_yr8kinx) ) { $vwpalm4is_gf2m1t7v8nbz = $vwpalm4is_yr8kinx; } else { return FALSE; } } global $wpdb; static $vwpalm4is_ic4udy = array(); if (count($vwpalm4is_ic4udy) == 0) { $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_cevdqnb5lzm = "SELECT name, id FROM `" . MEMBERIUM_DB_TAGS . "` WHERE `appname` = '{$vwpalm4is_dd4j20qwmn_}' "; $vwpalm4is_ayld7b = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); foreach ($vwpalm4is_ayld7b as $vwpalm4is_agvwtn) { $vwpalm4is_f_zgyt = strtolower($vwpalm4is_agvwtn['name']); $vwpalm4is_ic4udy[$vwpalm4is_f_zgyt] = $vwpalm4is_agvwtn['id']; } } $vwpalm4is_t8k1v5n = array(); foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { if (is_numeric($vwpalm4is_agvwtn) ) { $vwpalm4is_t8k1v5n[] = $vwpalm4is_agvwtn; } else { if (substr($vwpalm4is_agvwtn, 0, 1) == '-') { $vwpalm4is_f_zgyt = strtolower(substr($vwpalm4is_agvwtn, 1) ); $vwpalm4is_zml72n91_6 = '-'; } else { $vwpalm4is_f_zgyt = strtolower($vwpalm4is_agvwtn); $vwpalm4is_zml72n91_6 = ''; } if (isset($vwpalm4is_ic4udy[$vwpalm4is_f_zgyt]) ) { $vwpalm4is_t8k1v5n[] = intval($vwpalm4is_zml72n91_6 . $vwpalm4is_ic4udy[$vwpalm4is_f_zgyt]); } } } return $vwpalm4is_t8k1v5n; } function wpalm4is_sh53_jivqsm() { $vwpalm4is_ttuymbl = get_option('memberium_tables_updated', array() ); $vwpalm4is_ttuymbl['tagcategories'] = isset($vwpalm4is_ttuymbl['tagcategories']) ? $vwpalm4is_ttuymbl['tagcategories'] : 0; global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ls4zde = ''; $vwpalm4is_e8ns965uk = 999; $vwpalm4is_cshmxpk = 0; $vwpalm4is_fqzgw57 = array('CategoryName' => '%'); $vwpalm4is_mq3gv6sdxeu = array('Id', 'CategoryName'); $vwpalm4is_huym27 = 0; $vwpalm4is__mnral5zjy = 'ContactGroupCategory'; $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_CONTACTGROUPCATEGORIES; $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQueryOrderBy($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', TRUE); if (is_array($vwpalm4is_kmqnwo6cu5) && ! empty($vwpalm4is_kmqnwo6cu5) ) { $vwpalm4is_az0w4le = array(); if (is_array($vwpalm4is_kmqnwo6cu5) && ! empty($vwpalm4is_kmqnwo6cu5) ) { foreach ($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_az0w4le[] = $wpdb->prepare("(%d, %s, %s)", intval($vwpalm4is_hs69ar['Id']), $vwpalm4is_dd4j20qwmn_, $vwpalm4is_hs69ar['CategoryName']); $vwpalm4is_ls4zde .= $vwpalm4is_hs69ar['Id'] . ','; } } $vwpalm4is_cevdqnb5lzm = "INSERT INTO {$vwpalm4is_q35jf97eg4} (id, appname, name) VALUES " . implode(', ', $vwpalm4is_az0w4le) . " ON DUPLICATE KEY UPDATE id=VALUES(id), appname=VALUES(appname), name=VALUES(name);"; $wpdb->query($vwpalm4is_cevdqnb5lzm); if (! empty($vwpalm4is_ls4zde) ) { $vwpalm4is_ls4zde = trim($vwpalm4is_ls4zde, ','); $vwpalm4is_cevdqnb5lzm = "DELETE FROM {$vwpalm4is_q35jf97eg4} WHERE `appname` = %s AND `id` NOT IN ({$vwpalm4is_ls4zde}) "; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_); $wpdb->query($vwpalm4is_cevdqnb5lzm); } set_transient('memberium_tagcategories_updated', time() ); } $vwpalm4is_ttuymbl['tagcategories'] = time(); update_option('memberium_tables_updated', $vwpalm4is_ttuymbl, false); return $vwpalm4is_huym27; }  function wpalm4is_bzdtyhv($vwpalm4is_s13i75n4ph, $vwpalm4is_gf2m1t7v8nbz) { global $wpdb; $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if (is_int($vwpalm4is_gf2m1t7v8nbz) || is_string($vwpalm4is_gf2m1t7v8nbz) ) { $vwpalm4is_gf2m1t7v8nbz = explode(',', $vwpalm4is_gf2m1t7v8nbz); }  foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { if ( (int) $vwpalm4is_agvwtn > 0) { $this->i2sdk->isdk->grpAssign($vwpalm4is_s13i75n4ph, (int) $vwpalm4is_agvwtn); $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); } else { $this->i2sdk->isdk->grpRemove($vwpalm4is_s13i75n4ph, (int) abs($vwpalm4is_agvwtn) ); $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); } } if (isset($_SESSION['memb_user']['Id']) && $_SESSION['memb_user']['Id'] == $vwpalm4is_s13i75n4ph) { $vwpalm4is_pav_wp7 = explode(',', $_SESSION['memb_user']['Groups']); foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { if ($vwpalm4is_agvwtn > 0) { $vwpalm4is_pav_wp7[] = $vwpalm4is_agvwtn; } else { $vwpalm4is_agvwtn = (int) abs($vwpalm4is_agvwtn); unset($vwpalm4is_pav_wp7[$vwpalm4is_agvwtn]); } } $_SESSION['memb_user']['Groups'] = implode(',', $vwpalm4is_pav_wp7); $wpdb->query("REPLACE INTO `" . MEMBERIUM_DB_CONTACTS ."` SET `value`='' WHERE `id` = {$vwpalm4is_s13i75n4ph} AND `appname` = `{$this->i2sdk_options['app_name']}` "); $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); $this->disable_login_redirect = TRUE; if (wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() == $vwpalm4is_s13i75n4ph) { $_SESSION = $this->wpalm4is_pvab9fqcm(); } else { $this->wpalm4is_pvab9fqcm(); } } }    function wpalm4is_c0kzjaiw5($vwpalm4is_vzoj7cv_rsly = false, $vwpalm4is_kkes85 = false) { $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = "Memberium_{$vwpalm4is_dd4j20qwmn_}_Product"; $vwpalm4is_ssxdjp0 = get_transient($vwpalm4is_ql0mb4js6); if (empty($vwpalm4is_ssxdjp0) || ! is_array($vwpalm4is_ssxdjp0) ) { wpalm4is_bd5uye4ng3l::wpalm4is_mr2msy(); $vwpalm4is_ssxdjp0 = get_transient($vwpalm4is_ql0mb4js6); } else { } if ($vwpalm4is_kkes85 && $vwpalm4is_vzoj7cv_rsly > 0 && isset($vwpalm4is_ssxdjp0[$vwpalm4is_vzoj7cv_rsly]) && is_array($vwpalm4is_ssxdjp0[$vwpalm4is_vzoj7cv_rsly]) ) { $vwpalm4is_ssxdjp0 = wpalm4is_l9n25d::wpalm4is_nkul8fh94x($vwpalm4is_ssxdjp0); } if ($vwpalm4is_vzoj7cv_rsly) { $vwpalm4is_ssxdjp0 = isset($vwpalm4is_ssxdjp0[$vwpalm4is_vzoj7cv_rsly]) ? $vwpalm4is_ssxdjp0[$vwpalm4is_vzoj7cv_rsly] : array(); } return $vwpalm4is_ssxdjp0; }    function wpalm4is_n1sm49p($vwpalm4is_kp0su9inlxe) { $vwpalm4is_kp0su9inlxe = (int) $vwpalm4is_kp0su9inlxe; $vwpalm4is_hc0jd5pxltf = 'memberium::email_template::' . $vwpalm4is_kp0su9inlxe;  $vwpalm4is_fxavjf2 = get_transient($vwpalm4is_hc0jd5pxltf); if ($vwpalm4is_fxavjf2 === false) { $vwpalm4is_fxavjf2 = $this->isdk->getEmailTemplate($vwpalm4is_kp0su9inlxe); if (is_array($vwpalm4is_fxavjf2) ) { set_transient($vwpalm4is_hc0jd5pxltf, $vwpalm4is_fxavjf2, DAY_IN_SECONDS); } else { $vwpalm4is_fxavjf2 = false; } } return $vwpalm4is_fxavjf2; } function wpalm4is_z75qpbk($vwpalm4is_fxavjf2) { }      function wpalm4is_wsfcy_ehx6o() { } function wpalm4is_fcp_yma3z($vwpalm4is_s13i75n4ph, $vwpalm4is_kkes85 = false) { $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_ql0mb4js6 = 'Memberium::Filebox::' . $vwpalm4is_dd4j20qwmn_ . '::' . $vwpalm4is_s13i75n4ph; $vwpalm4is_d1dytlxo5p = get_transient($vwpalm4is_ql0mb4js6); if (empty($vwpalm4is_d1dytlxo5p) || ! is_array($vwpalm4is_d1dytlxo5p) ) { $vwpalm4is_d1dytlxo5p = wpalm4is_bd5uye4ng3l::wpalm4is_qy_q8b2d($vwpalm4is_s13i75n4ph); } if ($vwpalm4is_kkes85) { $vwpalm4is_d1dytlxo5p = wpalm4is_l9n25d::wpalm4is_nkul8fh94x($vwpalm4is_d1dytlxo5p); } return $vwpalm4is_d1dytlxo5p; }    function wpalm4is_xi9g51n7h($vwpalm4is_s13i75n4ph, $vwpalm4is_gf2m1t7v8nbz = '', $vwpalm4is_l6ih20yjwm = '', $vwpalm4is_jbzye8o4w = '', $vwpalm4is_dd4j20qwmn_ = false, $vwpalm4is__1lyj3uf7rx = false, $vwpalm4is_voqcm7fsy = false) { if (! empty($vwpalm4is_jbzye8o4w) ) { $this->wpalm4is_jljv9kr($vwpalm4is_jbzye8o4w, $vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_); } if (! empty($vwpalm4is_l6ih20yjwm) ) { $this->wpalm4is_soe2avpm($vwpalm4is_l6ih20yjwm, $vwpalm4is_s13i75n4ph); } if (! empty($vwpalm4is_gf2m1t7v8nbz) ) { $this->wpalm4is_yp5awiqcv($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_s13i75n4ph, $vwpalm4is__1lyj3uf7rx, $vwpalm4is_voqcm7fsy); } } function wpalm4is__wqrxo35m_($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_o7jwt1ip) { $vwpalm4is_vx_n8e7hdrbo = array( 'actionsets' => '', 'api_goals' => '', 'tags' => '', 'full_update' => false, 'debug' => false, 'appname' => false, ); $vwpalm4is_o7jwt1ip = wp_parse_args($vwpalm4is_o7jwt1ip, $vwpalm4is_vx_n8e7hdrbo); do_action('memberium/do_actions_before', $vwpalm4is_s13i75n4ph, $vwpalm4is_o7jwt1ip); if ($vwpalm4is_s13i75n4ph) { if (! empty($vwpalm4is_o7jwt1ip['tags']) ) { $this->wpalm4is_yp5awiqcv($vwpalm4is_o7jwt1ip['tags'], $vwpalm4is_s13i75n4ph, $vwpalm4is__1lyj3uf7rx, $vwpalm4is_voqcm7fsy); } if (! empty($vwpalm4is_o7jwt1ip['actionsets']) ) { $this->wpalm4is_soe2avpm($vwpalm4is_o7jwt1ip['actionsets'], $vwpalm4is_s13i75n4ph); } if (! empty($vwpalm4is_o7jwt1ip['api_goals']) ) { $this->wpalm4is_jljv9kr($vwpalm4is_o7jwt1ip['api_goals'], $vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_); } } do_action('memberium/do_actions_after', $vwpalm4is_s13i75n4ph, $vwpalm4is_o7jwt1ip); } function wpalm4is_nko9d6hy8c() { global $wpdb;  $vwpalm4is_cevdqnb5lzm = 'SELECT `id`, `name` FROM `' . MEMBERIUM_DB_ACTIONSETS . '` WHERE `appname` = %s ORDER BY `name`;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname') ); $vwpalm4is_l6ih20yjwm = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); $vwpalm4is_umo2qxl = array(); foreach($vwpalm4is_l6ih20yjwm as &$vwpalm4is_wcq6ae1lm) { $vwpalm4is_umo2qxl[$vwpalm4is_wcq6ae1lm['id']] = $vwpalm4is_wcq6ae1lm['name']; unset($vwpalm4is_wcq6ae1lm); } return $vwpalm4is_umo2qxl; } function wpalm4is_bg2lti4() { $vwpalm4is_ttuymbl = get_option('memberium_tables_updated', array() ); $vwpalm4is_ttuymbl['actionsets'] = isset($vwpalm4is_ttuymbl['actionsets']) ? $vwpalm4is_ttuymbl['actionsets'] : 0; global $wpdb; $vwpalm4is__mnral5zjy = 'ActionSequence'; $vwpalm4is_e8ns965uk = 999; $vwpalm4is_cshmxpk = 0; $vwpalm4is_capec2nktjiu = 'Id'; $vwpalm4is_ndjgnlct7_9 = '%'; $vwpalm4is_fqzgw57 = array('Id' => '%'); $vwpalm4is_mq3gv6sdxeu = array('Id', 'TemplateName', 'VisibleToTheseUsers'); $vwpalm4is_q35jf97eg4 = MEMBERIUM_DB_ACTIONSETS; $vwpalm4is_huym27 = 0; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname');  do { $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQuery($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu, 'Id', true); $vwpalm4is_gzxd7vckgpw = count($vwpalm4is_kmqnwo6cu5); if (is_array($vwpalm4is_kmqnwo6cu5) ) { $vwpalm4is_vfu5erno8 = (int) $vwpalm4is_kmqnwo6cu5[0]['Id']; $vwpalm4is_nj_s1b3 = (int) $vwpalm4is_kmqnwo6cu5[(count($vwpalm4is_kmqnwo6cu5) - 1)]['Id']; $vwpalm4is_az0w4le = array(); $vwpalm4is_obr60wde = array(); foreach ($vwpalm4is_kmqnwo6cu5 as $k => $vwpalm4is_hs69ar) { $vwpalm4is_hs69ar['VisibleToTheseUsers'] = empty($vwpalm4is_hs69ar['VisibleToTheseUsers']) ? '' : $vwpalm4is_hs69ar['VisibleToTheseUsers']; if ( ($vwpalm4is_hs69ar['VisibleToTheseUsers'] == '-1') || empty($vwpalm4is_hs69ar['TemplateName']) ) { unset($vwpalm4is_kmqnwo6cu5[$k]); } else {  foreach ($vwpalm4is_mq3gv6sdxeu as $vwpalm4is_x3e6m_hobj) { if (empty($vwpalm4is_hs69ar[$vwpalm4is_x3e6m_hobj]) ) $vwpalm4is_hs69ar[$vwpalm4is_x3e6m_hobj] = ''; } if (empty($vwpalm4is_hs69ar['TemplateName']) ) { $vwpalm4is_hs69ar['TemplateName'] = 'Unnamed Action Set #' . $vwpalm4is_hs69ar['Id']; } $vwpalm4is_az0w4le[] = $wpdb->prepare("(%d, %s, %s)", intval($vwpalm4is_hs69ar['Id']), $vwpalm4is_dd4j20qwmn_, $vwpalm4is_hs69ar['TemplateName']); $vwpalm4is_obr60wde[] = $vwpalm4is_hs69ar['Id']; } } $vwpalm4is_cevdqnb5lzm = "INSERT INTO {$vwpalm4is_q35jf97eg4} (id, appname, name) VALUES " . implode(', ', $vwpalm4is_az0w4le) . " ON DUPLICATE KEY UPDATE id=VALUES(id), appname=VALUES(appname), name=VALUES(name);"; $wpdb->query($vwpalm4is_cevdqnb5lzm); if ($vwpalm4is_vfu5erno8 && $vwpalm4is_nj_s1b3 && is_array($vwpalm4is_obr60wde) && count($vwpalm4is_obr60wde) ) { $vwpalm4is_cevdqnb5lzm = "DELETE FROM {$vwpalm4is_q35jf97eg4} WHERE `appname` = %s AND `id` > %d AND `id` < %d AND `id` NOT IN (" . implode(',', $vwpalm4is_obr60wde) . ");"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_vfu5erno8, $vwpalm4is_nj_s1b3); $wpdb->query($vwpalm4is_cevdqnb5lzm); } } $vwpalm4is_cshmxpk++; $vwpalm4is_huym27 = $vwpalm4is_huym27 + $vwpalm4is_gzxd7vckgpw; usleep(500000); } while ($vwpalm4is_gzxd7vckgpw == $vwpalm4is_e8ns965uk); $vwpalm4is_cevdqnb5lzm = "DELETE FROM {$vwpalm4is_q35jf97eg4} WHERE `appname` = %s AND `id` > %d"; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_nj_s1b3); $wpdb->query($vwpalm4is_cevdqnb5lzm); set_transient('memberium_actionsets_updated', time() ); $vwpalm4is_ttuymbl['actionsets'] = time(); update_option('memberium_tables_updated', $vwpalm4is_ttuymbl, false); return $vwpalm4is_huym27; } function wpalm4is_jljv9kr($vwpalm4is_jbzye8o4w = '', $vwpalm4is_s13i75n4ph = false, $vwpalm4is_dd4j20qwmn_ = false) { if (empty($vwpalm4is_jbzye8o4w) ) { return; } if (! $this->license_status) { return; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! $vwpalm4is_dd4j20qwmn_) { $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); } if (! is_array($vwpalm4is_jbzye8o4w) ) { $vwpalm4is_jbzye8o4w = array_filter(explode(',', $vwpalm4is_jbzye8o4w) ); } $this->wpalm4is_bd51prj_n9(); $vwpalm4is_hhs1be7kxi9 = false; foreach ($vwpalm4is_jbzye8o4w as $vwpalm4is_tqfcieh) { if ($vwpalm4is_tqfcieh > '') { $vwpalm4is_ukra4p = $this->isdk->achieveGoal($vwpalm4is_dd4j20qwmn_, $vwpalm4is_tqfcieh, $vwpalm4is_s13i75n4ph); $vwpalm4is_hhs1be7kxi9 = (boolean) ($vwpalm4is_ukra4p[0]['success'] == 1); } } if ($vwpalm4is_hhs1be7kxi9) { $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); } } function wpalm4is_c9o8pvt7($vwpalm4is_i4_rfd9, $vwpalm4is_s13i75n4ph = false) { if (! $this->license_status) { return; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! is_array($vwpalm4is_i4_rfd9) ) { $vwpalm4is_i4_rfd9 = array_filter(explode(',', $vwpalm4is_i4_rfd9) ); } foreach ($vwpalm4is_i4_rfd9 as $fus_id) { if ($fus_id > 0) { $this->isdk->campAssign($vwpalm4is_s13i75n4ph, $fus_id); } } } function wpalm4is_lp1qy9ctf($fus_ids, $vwpalm4is_s13i75n4ph = false) { if (! $this->license_status) { return; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! is_array($vwpalm4is_i4_rfd9) ) { $vwpalm4is_i4_rfd9 = array_filter(explode(',', $vwpalm4is_i4_rfd9) ); } foreach ($vwpalm4is_i4_rfd9 as $vwpalm4is__8mwphk) { if ($vwpalm4is__8mwphk > 0) { $this->isdk->campPause($vwpalm4is_s13i75n4ph, $vwpalm4is__8mwphk); } } } function wpalm4is_soe2avpm($vwpalm4is_l6ih20yjwm, $vwpalm4is_s13i75n4ph = false) { if (empty($vwpalm4is_l6ih20yjwm) ) { return; } if (! $this->license_status) { return; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! is_array($vwpalm4is_l6ih20yjwm) ) { $vwpalm4is_l6ih20yjwm = array_filter(explode(',', $vwpalm4is_l6ih20yjwm) ); }   $this->wpalm4is_bd51prj_n9(); $vwpalm4is_hhs1be7kxi9 = false; foreach ($vwpalm4is_l6ih20yjwm as $vwpalm4is_nlh58m) { $vwpalm4is_nlh58m = (int) $vwpalm4is_nlh58m; if ($vwpalm4is_nlh58m > 0) { $vwpalm4is_ss713erkxf0w = $this->isdk->runAS($vwpalm4is_s13i75n4ph, $vwpalm4is_nlh58m); if (is_array($vwpalm4is_ss713erkxf0w) ) { foreach ($vwpalm4is_ss713erkxf0w as $vwpalm4is_ukra4p) { if (strtolower($vwpalm4is_ukra4p['Message']) <> 'nothing to do') { $vwpalm4is_hhs1be7kxi9 = true; } } unset($vwpalm4is_ukra4p); } } }  if ($vwpalm4is_hhs1be7kxi9) { $this->wpalm4is_kfhs9u7mp0o4($this->wpalm4is_yjzkfc_npqw() ); $this->wpalm4is_d6jdz2($this->wpalm4is_yjzkfc_npqw() ); if (wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() == $vwpalm4is_s13i75n4ph) { $_SESSION = $this->wpalm4is_pvab9fqcm(); } else { $this->wpalm4is_pvab9fqcm(); } } return $vwpalm4is_ss713erkxf0w; } function wpalm4is_qxbfrzt0o($vwpalm4is_i4_rfd9, $vwpalm4is_s13i75n4ph = false) { if (! $this->license_status) { return; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_s13i75n4ph; if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! is_array($vwpalm4is_i4_rfd9) ) { $vwpalm4is_i4_rfd9 = array_filter(explode(',', $vwpalm4is_i4_rfd9) ); } foreach ($vwpalm4is_i4_rfd9 as $vwpalm4is__8mwphk) { if ($vwpalm4is__8mwphk > 0) { $this->isdk->campRemove($vwpalm4is_s13i75n4ph, $vwpalm4is__8mwphk); } } } function wpalm4is_yp5awiqcv($vwpalm4is_gf2m1t7v8nbz = '', $vwpalm4is_s13i75n4ph = false, $vwpalm4is__1lyj3uf7rx = false, $vwpalm4is_voqcm7fsy = false) { if (empty($vwpalm4is_gf2m1t7v8nbz) ) { return; } if (! $this->license_status) { return; } if (! $vwpalm4is_s13i75n4ph) { $vwpalm4is_s13i75n4ph = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); } if ($vwpalm4is_s13i75n4ph < 1) { return; } if (! is_array($vwpalm4is_gf2m1t7v8nbz) ) { $vwpalm4is_gf2m1t7v8nbz = explode(',', $vwpalm4is_gf2m1t7v8nbz); } $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_gf2m1t7v8nbz = array_unique($this->wpalm4is_kzi_5oj($vwpalm4is_gf2m1t7v8nbz) ); $vwpalm4is_hhs1be7kxi9 = false; $vwpalm4is_zdbjm039 = array(); $vwpalm4is_x4n781w3pmu6 = ($vwpalm4is_s13i75n4ph == wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3() ); global $wpdb; $this->wpalm4is_bd51prj_n9();  if ($vwpalm4is_x4n781w3pmu6 && (wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups') > '') ) { $vwpalm4is_zdbjm039 = array_flip(array_filter(explode(',', wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr('groups') ) ) ); } else { $vwpalm4is_jbucldi1t7q = wpalm4is_bd5uye4ng3l::wpalm4is_cad0k_3hp7m($vwpalm4is_s13i75n4ph, true); $vwpalm4is_zdbjm039 = array_flip(array_filter(explode(',', $vwpalm4is_jbucldi1t7q['groups']) ) ); } foreach ($vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_agvwtn) { $vwpalm4is_agvwtn = (int) $vwpalm4is_agvwtn; if ($vwpalm4is_agvwtn < 0) { $vwpalm4is_umca1b6 = abs($vwpalm4is_agvwtn); $vwpalm4is_ukra4p = $this->isdk->grpRemove($vwpalm4is_s13i75n4ph, $vwpalm4is_umca1b6); if ($vwpalm4is_ukra4p) { $vwpalm4is_hhs1be7kxi9 = true; unset($vwpalm4is_zdbjm039[$vwpalm4is_umca1b6]); } if ($this->options['settings']['sync_tag_details'] == 1) { $vwpalm4is_cevdqnb5lzm = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `contactid` = %d AND `tagid` = %d AND `appname` = %s ;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_s13i75n4ph, abs($vwpalm4is_agvwtn), $vwpalm4is_dd4j20qwmn_); $wpdb->query($vwpalm4is_cevdqnb5lzm); }; do_action('memb_remove_tag', $vwpalm4is_s13i75n4ph, abs($vwpalm4is_agvwtn) ); } elseif ($vwpalm4is_agvwtn > 0) { $vwpalm4is_ukra4p = $this->isdk->grpAssign($vwpalm4is_s13i75n4ph, $vwpalm4is_agvwtn); if ($vwpalm4is_ukra4p) { $vwpalm4is_zdbjm039[ $vwpalm4is_agvwtn ] = ! empty($vwpalm4is_zdbjm039) ? max($vwpalm4is_zdbjm039) + 1 : 1; $vwpalm4is_hhs1be7kxi9 = true; } if ($this->options['settings']['sync_tag_details'] == 1) { $vwpalm4is_cevdqnb5lzm = 'INSERT IGNORE INTO `' . MEMBERIUM_DB_CONTACTTAGS . '` (`appname`, `contactid`, `tagid`) VALUES (%s, %d, %d);'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_s13i75n4ph, abs($vwpalm4is_agvwtn) ); $wpdb->query($vwpalm4is_cevdqnb5lzm); }; do_action('memb_add_tag', $vwpalm4is_s13i75n4ph, $vwpalm4is_agvwtn); } } $vwpalm4is_zdbjm039 = array_flip($vwpalm4is_zdbjm039); sort($vwpalm4is_zdbjm039); $vwpalm4is_zdbjm039 = implode(',', $vwpalm4is_zdbjm039);  $vwpalm4is_cevdqnb5lzm = 'UPDATE `' . MEMBERIUM_DB_CONTACTS . '` SET `value` = %s WHERE `id` = %d AND `appname` = %s AND `fieldname` = "Groups";'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_zdbjm039, $vwpalm4is_s13i75n4ph, $vwpalm4is_dd4j20qwmn_); $wpdb->query($vwpalm4is_cevdqnb5lzm); $this->wpalm4is_d6jdz2($vwpalm4is_s13i75n4ph); if ($vwpalm4is_x4n781w3pmu6) { $_SESSION = $this->wpalm4is_pvab9fqcm(); } else { $this->wpalm4is_pvab9fqcm(); }  }    function wpalm4is_jkrw_hjsu() { $vwpalm4is_lgjwcqr8 = $this->wpalm4is_jl8g0hx4twyf(); foreach ($vwpalm4is_lgjwcqr8 as $vwpalm4is_y4f763r0l) { $vwpalm4is_s13i75n4ph = 0; if (! empty($vwpalm4is_y4f763r0l['data']['contact_id']) ) { $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_y4f763r0l['data']['contact_id']; } else { $vwpalm4is_vzoj7cv_rsly = (int) $vwpalm4is_y4f763r0l['data']['recurringorder_id']; if ($vwpalm4is_vzoj7cv_rsly > 0) { $vwpalm4is_iomhdlzi73g5 = array('ContactId'); $vwpalm4is_hs69ar = $this->isdk->dsLoad('RecurringOrder', $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_iomhdlzi73g5); if (is_array($vwpalm4is_hs69ar) ) { $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_hs69ar['ContactId']; } } } if ($vwpalm4is_s13i75n4ph > 0) { if ($vwpalm4is_y4f763r0l['actiontype'] == 'achievegoal') { $vwpalm4is_tqfcieh = $vwpalm4is_y4f763r0l['data']['end_goal']; $this->isdk->achievegoal($vwpalm4is_y4f763r0l['appname'], $vwpalm4is_tqfcieh, $vwpalm4is_s13i75n4ph); $this->wpalm4is_te9uj36d1($vwpalm4is_y4f763r0l); } elseif ($vwpalm4is_y4f763r0l['actiontype'] == 'actionset') { $vwpalm4is_nlh58m = (int) $vwpalm4is_y4f763r0l['data']['end_action']; $this->isdk->runAs($vwpalm4is_s13i75n4ph, $vwpalm4is_nlh58m); $this->wpalm4is_te9uj36d1($vwpalm4is_y4f763r0l); } elseif ($vwpalm4is_y4f763r0l['actiontype'] == 'settags') { } elseif ($vwpalm4is_y4f763r0l['actiontype'] == 'sendemail') { } } } } function wpalm4is_io2vwf($vwpalm4is_lciwtpxz6, $vwpalm4is_sfyjla6h, $vwpalm4is_n0wrho_2u) { global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_lciwtpxz6 = strtolower(trim($vwpalm4is_lciwtpxz6) ); $vwpalm4is_rh4w1zudfq9 = strtotime($vwpalm4is_sfyjla6h); $vwpalm4is_cevdqnb5lzm = 'INSERT INTO `' . MEMBERIUM_DB_QUEUE . '` (`pidlock`, `appname`, `actiontype`, `scheduled`, `data`) VALUES (-1, %s, %s, %s, %s);'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_dd4j20qwmn_, $vwpalm4is_lciwtpxz6, $vwpalm4is_sfyjla6h, json_encode($vwpalm4is_n0wrho_2u) ); $wpdb->query($vwpalm4is_cevdqnb5lzm); $vwpalm4is_vzoj7cv_rsly = $wpdb->insert_id; return $vwpalm4is_vzoj7cv_rsly; } function wpalm4is_jl8g0hx4twyf() { global $wpdb; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname');  $vwpalm4is_tiorp0m = $_SERVER['REMOTE_PORT']; $vwpalm4is_cevdqnb5lzm = 'UPDATE `' . MEMBERIUM_DB_QUEUE . '` SET `pidlock` = %d WHERE `appname`= %s AND `scheduled` <= NOW() AND `pidlock` < 1 ;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_tiorp0m, $vwpalm4is_dd4j20qwmn_); $wpdb->query($vwpalm4is_cevdqnb5lzm); $vwpalm4is_cevdqnb5lzm = 'SELECT * FROM `' . MEMBERIUM_DB_QUEUE . '` WHERE `pidlock` = %d AND `appname`= %s ;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_tiorp0m, $vwpalm4is_dd4j20qwmn_); $vwpalm4is_gogru832 = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); foreach ($vwpalm4is_gogru832 as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_n0wrho_2u = json_decode($vwpalm4is_kh9vqi_6znd['data'], true); if ($vwpalm4is_n0wrho_2u) { $vwpalm4is_gogru832[$vwpalm4is_x3e6m_hobj]['data'] = $vwpalm4is_n0wrho_2u; } } return $vwpalm4is_gogru832; } function wpalm4is_te9uj36d1($vwpalm4is_y4f763r0l) { $vwpalm4is_vzoj7cv_rsly = (int) $vwpalm4is_y4f763r0l['id']; if ($vwpalm4is_vzoj7cv_rsly) { global $wpdb; $vwpalm4is_cevdqnb5lzm = 'DELETE FROM `' . MEMBERIUM_DB_QUEUE . '` WHERE `id` = %d and `appname` = %s;'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $vwpalm4is_y4f763r0l['id'], $vwpalm4is_y4f763r0l['appname']); $wpdb->query($vwpalm4is_cevdqnb5lzm); } }    function wpalm4is___kzs8($vwpalm4is_gtyqfor0c8ib, $vwpalm4is_kh9vqi_6znd = 1) { $vwpalm4is_gtyqfor0c8ib = trim($vwpalm4is_gtyqfor0c8ib); if (empty($vwpalm4is_gtyqfor0c8ib) ) { return false; } global $wpdb; $vwpalm4is_cevdqnb5lzm = ''; return false; }    function wpalm4is_pdjyza5() { $vwpalm4is_o7jwt1ip = unserialize(base64_decode($_POST['payload']) ); $vwpalm4is_s13i75n4ph = (int) $vwpalm4is_o7jwt1ip['contact_id']; $vwpalm4is_gf2m1t7v8nbz = $vwpalm4is_o7jwt1ip['tag_id']; $vwpalm4is_jbzye8o4w = $vwpalm4is_o7jwt1ip['goals']; $vwpalm4is_l6ih20yjwm = $vwpalm4is_o7jwt1ip['action_id']; $vwpalm4is_o5_we2b = '';  if ($vwpalm4is_gf2m1t7v8nbz > '') { $this->wpalm4is_bzdtyhv($vwpalm4is_s13i75n4ph, $vwpalm4is_gf2m1t7v8nbz); } if ($vwpalm4is_l6ih20yjwm > '') { $this->wpalm4is_soe2avpm($vwpalm4is_s13i75n4ph, $vwpalm4is_l6ih20yjwm); } if ($vwpalm4is_jbzye8o4w > '') { $this->wpalm4is_jljv9kr($vwpalm4is_jbzye8o4w, $vwpalm4is_s13i75n4ph); } $this->wpalm4is_kfhs9u7mp0o4($vwpalm4is_s13i75n4ph); die(); }    function wpalm4is_h9m3s7jl($vwpalm4is_x3e6m_hobj, $vwpalm4is_n0wrho_2u, $vwpalm4is_irlzgevujx = 64) { if (strlen($vwpalm4is_x3e6m_hobj) > $vwpalm4is_irlzgevujx) { $vwpalm4is_x3e6m_hobj = pack('H*', sha1($vwpalm4is_x3e6m_hobj) ); } $vwpalm4is_x3e6m_hobj = str_pad($vwpalm4is_x3e6m_hobj, $vwpalm4is_irlzgevujx, chr(0x00) ); $vwpalm4is_ozb2xpt46k = str_repeat(chr(0x36), $vwpalm4is_irlzgevujx); $vwpalm4is_bc5fy60vg = str_repeat(chr(0x5c), $vwpalm4is_irlzgevujx); $vwpalm4is_x3vbyeqan1ro = pack('H*', sha1( ($vwpalm4is_x3e6m_hobj ^ $vwpalm4is_bc5fy60vg) . pack('H*', sha1( ($vwpalm4is_x3e6m_hobj ^ $vwpalm4is_ozb2xpt46k) . $vwpalm4is_n0wrho_2u) ) ) ); return base64_encode($vwpalm4is_x3vbyeqan1ro); } function wpalm4is_oaqci0op5 ($vwpalm4is_fvad1po, $precision = 2) { $vwpalm4is_pptsn7ag8 = array('B', 'KB', 'MB', 'GB', 'TB'); $vwpalm4is_fvad1po = max($vwpalm4is_fvad1po, 0); $vwpalm4is_bd2a9jtsfmwh = floor( ($vwpalm4is_fvad1po ? log($vwpalm4is_fvad1po) : 0) / log(1024) ); $vwpalm4is_bd2a9jtsfmwh = min($vwpalm4is_bd2a9jtsfmwh, count($vwpalm4is_pptsn7ag8) - 1);   $vwpalm4is_fvad1po /= (1 << (10 * $vwpalm4is_bd2a9jtsfmwh) ); return round($vwpalm4is_fvad1po, $precision) . ' ' . $vwpalm4is_pptsn7ag8[$vwpalm4is_bd2a9jtsfmwh]; } static function wpalm4is_ky32mbitc1u($vwpalm4is_gtyqfor0c8ib = '') { $vwpalm4is_gtyqfor0c8ib = strtolower(trim($vwpalm4is_gtyqfor0c8ib) ); $vwpalm4is_ylzogxqvs7d = false; $vwpalm4is_h5hmp47voj = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('remote_files'); if ($vwpalm4is_gtyqfor0c8ib) { if (array_key_exists($vwpalm4is_gtyqfor0c8ib, $vwpalm4is_h5hmp47voj) ) { $vwpalm4is_ylzogxqvs7d = $vwpalm4is_h5hmp47voj[$vwpalm4is_gtyqfor0c8ib]; $vwpalm4is_vx_n8e7hdrbo = array( 'region' => 'us-east-1', ); $vwpalm4is_ylzogxqvs7d = wp_parse_args($vwpalm4is_ylzogxqvs7d, $vwpalm4is_vx_n8e7hdrbo); } } return $vwpalm4is_ylzogxqvs7d; } function wpalm4is_dck8q0zb4vy($vwpalm4is_e24l_us, $vwpalm4is_xazs35e, $vwpalm4is_u403cxy, $vwpalm4is_hy56eq, $vwpalm4is_qp_hmarlg5, $vwpalm4is_h715p_v, $vwpalm4is_aqd12i9hkv8 = 30) { $vwpalm4is_omgj78t = time() + (int) $vwpalm4is_aqd12i9hkv8; $vwpalm4is_h715p_v = str_replace('%2F', '/', rawurlencode($vwpalm4is_h715p_v = ltrim($vwpalm4is_h715p_v, '/') ) ); $vwpalm4is_w16m08 = '/'. $vwpalm4is_qp_hmarlg5 .'/'. $vwpalm4is_h715p_v; $vwpalm4is_f5guki3 = implode("\n", $pieces = array('GET', null, null, $vwpalm4is_omgj78t, $vwpalm4is_w16m08) ); $vwpalm4is_o5_we2b = $this->wpalm4is_h9m3s7jl($vwpalm4is_xazs35e, $vwpalm4is_f5guki3);  $url = sprintf('%s://%s.%s/%s', $vwpalm4is_u403cxy, $vwpalm4is_qp_hmarlg5, $vwpalm4is_hy56eq, $vwpalm4is_h715p_v); $qs = http_build_query($pieces = array('AWSAccessKeyId' => $vwpalm4is_e24l_us, 'Expires' => $vwpalm4is_omgj78t, 'Signature' => $vwpalm4is_o5_we2b,) ); return $url . '?' . $qs; }  function wpalm4is_gs67w3zcol($vwpalm4is_e24l_us, $vwpalm4is_xazs35e, $vwpalm4is_qp_hmarlg5, $vwpalm4is_mglqin, $vwpalm4is_omgj78t = 0, $vwpalm4is_xgp1u0 = 'us-east-1', $vwpalm4is_u1k7fdxt = array() ) { $vwpalm4is_jz8gyx = str_replace('%2F', '/', rawurlencode($vwpalm4is_mglqin) ); $vwpalm4is_yy1h2ktesl0o = array(); foreach ($vwpalm4is_u1k7fdxt as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_yy1h2ktesl0o[strtolower($vwpalm4is_x3e6m_hobj)] = $vwpalm4is_kh9vqi_6znd; } if (! array_key_exists('host', $vwpalm4is_yy1h2ktesl0o) ) { $vwpalm4is_yy1h2ktesl0o['host'] = ($vwpalm4is_xgp1u0 == 'us-east-1') ? "{$vwpalm4is_qp_hmarlg5}.s3.amazonaws.com" : "{$vwpalm4is_qp_hmarlg5}.s3-{$vwpalm4is_xgp1u0}.amazonaws.com"; } ksort($vwpalm4is_yy1h2ktesl0o); $vwpalm4is_jzf7_4kplg = ''; foreach ($vwpalm4is_yy1h2ktesl0o as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_jzf7_4kplg .= $vwpalm4is_x3e6m_hobj . ':' . trim($vwpalm4is_kh9vqi_6znd) . "\n"; } $vwpalm4is_qnvf8e4 = implode(';', array_keys($vwpalm4is_yy1h2ktesl0o) ); $vwpalm4is_rh4w1zudfq9 = time(); $vwpalm4is_m7g5_yu = gmdate('Ymd', $vwpalm4is_rh4w1zudfq9); $vwpalm4is__hkcogj = $vwpalm4is_m7g5_yu . 'T000000Z'; $vwpalm4is__hkcogj = $vwpalm4is_m7g5_yu . 'T' . gmdate('His', $vwpalm4is_rh4w1zudfq9) . 'Z'; $vwpalm4is_gohtbe37 = 'AWS4-HMAC-SHA256'; $vwpalm4is_f5gq3ckz = "$vwpalm4is_m7g5_yu/$vwpalm4is_xgp1u0/s3/aws4_request"; $vwpalm4is_zrc73hgqup9 = array( 'X-Amz-Algorithm' => $vwpalm4is_gohtbe37, 'X-Amz-Credential' => $vwpalm4is_e24l_us . '/' . $vwpalm4is_f5gq3ckz, 'X-Amz-Date' => $vwpalm4is__hkcogj, 'X-Amz-SignedHeaders' => $vwpalm4is_qnvf8e4 ); if ($vwpalm4is_omgj78t > 0) { $vwpalm4is_zrc73hgqup9['X-Amz-Expires'] = $vwpalm4is_omgj78t; } ksort($vwpalm4is_zrc73hgqup9); $vwpalm4is_agl_o2 = array(); foreach ($vwpalm4is_zrc73hgqup9 as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd) { $vwpalm4is_agl_o2[] = rawurlencode($vwpalm4is_x3e6m_hobj) . '=' . rawurlencode($vwpalm4is_kh9vqi_6znd); } $vwpalm4is_tgzkrl = implode('&', $vwpalm4is_agl_o2); $vwpalm4is_ln9t83sk = "GET\n$vwpalm4is_jz8gyx\n$vwpalm4is_tgzkrl\n$vwpalm4is_jzf7_4kplg\n$vwpalm4is_qnvf8e4\nUNSIGNED-PAYLOAD"; $vwpalm4is_ywc_nq14sog = "$vwpalm4is_gohtbe37\n$vwpalm4is__hkcogj\n$vwpalm4is_f5gq3ckz\n" . hash('sha256', $vwpalm4is_ln9t83sk, false); $vwpalm4is__jn4ouev3 = hash_hmac('sha256', 'aws4_request', hash_hmac('sha256', 's3', hash_hmac('sha256', $vwpalm4is_xgp1u0, hash_hmac('sha256', $vwpalm4is_m7g5_yu, 'AWS4' . $vwpalm4is_xazs35e, true), true), true), true); $vwpalm4is_o5_we2b = hash_hmac('sha256', $vwpalm4is_ywc_nq14sog, $vwpalm4is__jn4ouev3); $vwpalm4is_sf9tqcp3 = 'https://' . $vwpalm4is_yy1h2ktesl0o['host'] . $vwpalm4is_jz8gyx . '?' . $vwpalm4is_tgzkrl . '&X-Amz-Signature=' . $vwpalm4is_o5_we2b; return $vwpalm4is_sf9tqcp3; } function wpalm4is_g8x7vls() { if (! function_exists('badgeos_get_achievements') ) { return array(); } $vwpalm4is_g87myl0d = array( 'posts_per_page' => -1, 'orderby' => 'title', 'order' => 'ASC', ); $vwpalm4is_y9tvm2 = badgeos_get_achievements($vwpalm4is_g87myl0d); $vwpalm4is_nwiomj_54 = array(); foreach($vwpalm4is_y9tvm2 as $vwpalm4is_tt4l0h) { $vwpalm4is_nwiomj_54[$vwpalm4is_tt4l0h->ID] = $vwpalm4is_tt4l0h->post_title; } return $vwpalm4is_nwiomj_54; }    function wpalm4is_jhkp0jol69r($vwpalm4is_ukynbjo, $vwpalm4is_o8m4ja) { static $seen = array(); if (! empty($seen[$vwpalm4is_o8m4ja][$vwpalm4is_ukynbjo])) { return; } if ($vwpalm4is_ukynbjo == 50) { $vwpalm4is_iomhdlzi73g5 = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('Contact'); $vwpalm4is_x9a_k5y4bc = array(  $this->options['settings']['password_field'] ); foreach($vwpalm4is_iomhdlzi73g5 as $vwpalm4is_x3e6m_hobj => $vwpalm4is_a0g4be2) { if (in_array($vwpalm4is_a0g4be2, $vwpalm4is_x9a_k5y4bc) ) { unset($vwpalm4is_iomhdlzi73g5[$vwpalm4is_x3e6m_hobj]); } } unset($vwpalm4is_x3e6m_hobj, $vwpalm4is_x9a_k5y4bc); ?>
			<!-- li class="default_value_setting admin_label_setting field_setting" -->
			<li class="admin_label_setting field_setting">
			<label for="field_admin_label" class="section_label">
			Memberium Sync
			<?php ?>

			</label>
			<select id="memberiumfieldsync" onchange="SetFieldProperty('memberiumfieldsync', this.value);" >
			<option value="">(None)</option>
			<?php
 if (is_array($vwpalm4is_iomhdlzi73g5) ) { foreach($vwpalm4is_iomhdlzi73g5 as $vwpalm4is_cbkmin3z) { echo '<option value="', $vwpalm4is_cbkmin3z, '">' . $vwpalm4is_cbkmin3z . '</option>'; } } ?>
			</select>
			</li>
			<?php
 } $seen[$vwpalm4is_o8m4ja][$vwpalm4is_ukynbjo] = 1; } function wpalm4is_i2npl96d8rb() { ?>
		<script type='text/javascript'>
		//adding setting to fields of type "text"
		fieldSettings.text += ", .memberiumfieldsync";

		//binding to the load field settings event to initialize the checkbox
		jQuery(document).bind("gform_load_field_settings", function(event, field, form){
			jQuery("#memberiumfieldsync").val(field["memberiumfieldsync"]);
		});
		</script>
		<?php
 }  function wpalm4is_m3jp6wlc($vwpalm4is_ne17fdv8uw4, $vwpalm4is_y850aiwf_tqu) { $vwpalm4is_gf2m1t7v8nbz = wpalm4is_l9n25d::wpalm4is_d35w2jzaf(); $vwpalm4is_kh9vqi_6znd = rgar($vwpalm4is_y850aiwf_tqu, 'memberiumformtag'); $vwpalm4is_whlc9k0m = '<option value="">(None)</option>'; foreach($vwpalm4is_gf2m1t7v8nbz['mc'] as $k => $v) { $vwpalm4is_whlc9k0m .= '<option value="' . $k . '" ' . ($vwpalm4is_kh9vqi_6znd== $k ? ' selected=selected ' : '') . '>' . $v . '</option>'; } unset($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_kh9vqi_6znd); $vwpalm4is_ne17fdv8uw4['Form Options']['memberiumformtag'] = '
		<tr>
		<th><label for="memberiumformtag">Memberium Form Tag</label></th>
		<td><select name="memberiumformtag">' . $vwpalm4is_whlc9k0m . '</select></td>
		</tr>'; return $vwpalm4is_ne17fdv8uw4; } function wpalm4is_k4i0gr9do7($vwpalm4is_y850aiwf_tqu) { $vwpalm4is_y850aiwf_tqu['memberiumformtag'] = rgpost('memberiumformtag'); return $vwpalm4is_y850aiwf_tqu; }  function wpalm4is_x2fxhd04($entry, $action) { }    function wpalm4is_nicjnq() {  } function wpalm4is_em27i1d() { $vwpalm4is__mnral5zjy = 'SavedFilter'; $vwpalm4is_kfqhwa = array(); $vwpalm4is_e8ns965uk = 1000; $vwpalm4is_cshmxpk = 0; $vwpalm4is_mq3gv6sdxeu = wpalm4is_bd5uye4ng3l::wpalm4is_qpf_6x7('SavedFilter'); $vwpalm4is_fqzgw57 = array( 'ReportStoredName' => 'AffiliateActivitySummary', ); do { $vwpalm4is_kmqnwo6cu5 = $this->isdk->dsQuery($vwpalm4is__mnral5zjy, $vwpalm4is_e8ns965uk, $vwpalm4is_cshmxpk, $vwpalm4is_fqzgw57, $vwpalm4is_mq3gv6sdxeu); foreach($vwpalm4is_kmqnwo6cu5 as $vwpalm4is_hs69ar) { $vwpalm4is_kfqhwa[$vwpalm4is_hs69ar['Id']] = array( 'UserId' => (int) $vwpalm4is_hs69ar['UserId'], 'FilterName' => $vwpalm4is_hs69ar['FilterName'], ); } $vwpalm4is_cshmxpk++; } while (count($vwpalm4is_kmqnwo6cu5) >= $vwpalm4is_e8ns965uk); unset($vwpalm4is_kmqnwo6cu5, $vwpalm4is_hs69ar, $vwpalm4is_cshmxpk, $vwpalm4is_e8ns965uk, $vwpalm4is__mnral5zjy, $vwpalm4is_mq3gv6sdxeu, $vwpalm4is_fqzgw57); if (count($vwpalm4is_kfqhwa) == 1) { } return $vwpalm4is_kfqhwa; } function wpalm4is_r3r75z1bfu0($vwpalm4is_s13i75n4ph = 0, $vwpalm4is_vg4wlrco = 'first') { } function wpalm4is_pfjn0pa($vwpalm4is_s13i75n4ph, $vwpalm4is_a0g4be2) { if (! $vwpalm4is_s13i75n4ph || empty($vwpalm4is_a0g4be2) ) { return; } $vwpalm4is_a0g4be2 = strtolower($vwpalm4is_a0g4be2); $session_contact_id = wpalm4is_xamhc3q6o::wpalm4is_sxkjpbr0vhs3(); $vwpalm4is_ukra4p = ''; if ($vwpalm4is_s13i75n4ph == $session_contact_id) { $vwpalm4is_ukra4p = wpalm4is_xamhc3q6o::wpalm4is_lxnykv81pr($vwpalm4is_a0g4be2); } else { $vwpalm4is_tcon6xrp = wpalm4is_bd5uye4ng3l::wpalm4is_v6egzl2n7($vwpalm4is_s13i75n4ph); $vwpalm4is_hp41oja = $this->wpalm4is_pvab9fqcm($vwpalm4is_tcon6xrp); $vwpalm4is_ukra4p = isset($vwpalm4is_hp41oja['memb_db_fields'][$vwpalm4is_a0g4be2]) ? $vwpalm4is_hp41oja['memb_db_fields'][$vwpalm4is_a0g4be2] : ''; } return $vwpalm4is_ukra4p; } function __construct() { static $vwpalm4is_k_pgscd = false; if ($vwpalm4is_k_pgscd) { return; } $vwpalm4is_k_pgscd = true; global $i2sdk, $wpdb; $vwpalm4is_itc61n3zpfd7 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy(); $this->license_status = wpalm4is_rvrqgfe5ns_::wpalm4is_c8me3ltrxcn4(); $this->options = $vwpalm4is_itc61n3zpfd7; $this->servername = preg_replace('/^www\./', '', strtolower(parse_url(get_bloginfo('url'), PHP_URL_HOST) ) ); $this->i2sdk = $i2sdk; $this->isdk = $this->i2sdk->isdk; if (is_object($this->i2sdk) ) { $this->isdk = $this->i2sdk->isdk; } $this->wpalm4is_ryufqtvobae9(); $this->wpalm4is_kevoksqp3cn();  $this->license_key_name = wpalm4is_rvrqgfe5ns_::wpalm4is_v5e8h1(); wpalm4is_rvrqgfe5ns_::wpalm4is_c8me3ltrxcn4(); $this->wpalm4is_qka65vyfn();  if (is_object($i2sdk) ) { $this->isdk = $this->i2sdk->isdk; $this->i2sdk_options = get_option('i2sdk'); } if (isset($_COOKIE['login_error']) ) { $this->login_error = esc_html(__($_COOKIE['login_error']) ); setcookie ('login_error', '', (time() - 86400) ); } $this->dirty_contacts = array(); } function wpalm4is_qka65vyfn() { add_filter('cron_schedules', array($this, 'wpalm4is_sygjmvhabs'), 1); add_filter('updater_plugins_api_result', array('wpalm4is_tg9p67iu', 'wpalm4is_kfwoymnb'), 10, 3); add_filter('updater_plugins_api', array('wpalm4is_tg9p67iu', 'wpalm4is_o3t6ekj'), 10, 3); add_filter('updater_pre_set_site_transient_update_plugins', array('wpalm4is_tg9p67iu', 'wpalm4is__40ox1ci'), 10, 1); add_filter('wp_privacy_personal_data_erasers', array('wpalm4is_n_z7ot8q4p', 'wpalm4is_bmh8j1_ce73'), 11); add_filter('wp_privacy_personal_data_exporters', array('wpalm4is_n_z7ot8q4p', 'wpalm4is_kvdmwen1'), 10);   add_action('after_password_reset', array($this, 'wpalm4is_z04ztxvabhyc'), 10, 2); add_action('i2sdk_custom_fields_sync', array($this, 'wpalm4is_tf82krq9hby'), 10, 2); add_action('init', array('wpalm4is_klrwaq', 'wpalm4is_ognkr1'), 1); add_action('init', array($this, 'wpalm4is__xjgiby2lw67') ); add_action('memberium_license_check', array('wpalm4is_rvrqgfe5ns_', 'wpalm4is_nhzlbyp') ); add_action('memberium_maintenance', array('wpalm4is_b_anv4u', 'wpalm4is_lx73ec_') ); add_action('memberium_maintenance', array('wpalm4is_b_anv4u', 'wpalm4is_j052ueozqm8') ); add_action('memberium_maintenance', array('wpalm4is_b_anv4u', 'wpalm4is__ij8ngl') ); add_action('memberium_maintenance12', array('wpalm4is_i8g2fh', 'wpalm4is_tba4qcr126') ); add_action('memberium_maintenance12', array('wpalm4is_b_anv4u', 'wpalm4is_n0icyq_kdjpf') ); add_action('memberium_scanmakepass', array('wpalm4is_b_anv4u', 'wpalm4is_r4h60r') ); add_action('plugins_loaded', 'wpalm4is_eqef5akmd20', 1, 0); add_action('plugins_loaded', 'wpalm4is_ukxv7a12c83u', 2, 0); add_action('plugins_loaded', array($this, 'wpalm4is_iqg8vf6rykd'), 1); add_action('set_current_user', array($this, 'wpalm4is_c_fm67s'), 1); add_action('shutdown', array($this, 'wpalm4is_q70ncqp'), 100, 0); add_action('user_register', array($this, 'wpalm4is_p3oqv1a'), 10); add_action('woocommerce_customer_reset_password', array($this, 'after_password_reset'), 10, 1); add_action('wp_ajax_memb_ajax_actions', array($this, 'wpalm4is_pdjyza5'), 99); add_action('wp_ajax_nopriv_memb_ajax_actions', array($this, 'wpalm4is_pdjyza5'), 99);  if (wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'attachment_pages', 0) ) { add_filter('attachment_link', function($link) { return; }); add_filter('rewrite_rules_array', function($vwpalm4is_mik8j5q) { foreach ($vwpalm4is_mik8j5q as $vwpalm4is_odeckxj => $vwpalm4is_fqzgw57) { if (strpos($vwpalm4is_odeckxj, 'attachment') || strpos($vwpalm4is_fqzgw57, 'attachment') ) { unset($vwpalm4is_mik8j5q[ $vwpalm4is_odeckxj ]); } } return $vwpalm4is_mik8j5q; }); }  if (wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'multi_language', 0) ) { add_filter('gettext', array('wpalm4is_lr1jic82xtbf', 'wpalm4is_e9m6wf7zoc'), PHP_INT_MAX, 3); add_filter('gettext_with_context', array('wpalm4is_lr1jic82xtbf', 'wpalm4is_q0qe64hawfso'), PHP_INT_MAX, 4); }  add_filter('login_url', array($this, 'wpalm4is_o9ntmc'), 999999, 3);  add_filter('bbp_get_topic_subscribers', array($this, 'wpalm4is_mq3c0xpjilw') );  add_filter('wp_nav_menu_args', array($this, 'wpalm4is_ei3drvf5xohp') ); if (wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'dynamic_menus') ) { add_action('init', array($this, 'wpalm4is_qjxamosw'), 99); } if (wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'sync_meta_updates') ) { add_action('updated_user_metadata', array($this, 'wpalm4is_zuo2vkgr'), 10, 4); add_filter('update_user_metadata', array($this, 'wpalm4is_fir1sj75xgfb'), 10, 5); add_action('update_user_meta', array($this, 'wpalm4is_l3hivgo2'), 10, 5); }      if (wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings', 'wplogin_redirect_to') ) { add_filter('login_redirect', array($this, 'wpalm4is_v5hqlf'), 1000000, 3); }  add_filter('wpal/blocks/access_levels', array($this, 'wpalm4is_gl7pqgzdyx'), 10, 2); add_filter('wpal/blocks/get_key_map', array($this, 'wpalm4is_mngf89'), 10, 2); } function wpalm4is_kevoksqp3cn() { if ( (defined('DOING_AJAX') && DOING_AJAX) || (! is_admin() ) ) { $this->wpalm4is_qt45jry(); $this->wpalm4is_nt_n3bkfoag(); } if (is_admin() ) { $this->wpalm4is_z2nabfukzdg(); } } private $doing_http_post = false; private $contact_id = 0; protected $contact_cache_refreshed = 0; protected $admin_class = false; protected $debugfile; protected $dirty_contacts = array(); protected $i2sdk; protected $i2sdk_options; protected $license_status = false; protected $options; protected $sso_mode = 0; protected $trial_mode = 0; protected $version; public $license_key_name = ''; public $doing_user_update = false; public $login_error = ''; public $isdk = NULL; public $servername = ''; public $user_count = 0; public $frontend_class = false; public $shortcodes = false;  const MEMBERIUM = true; const MEMBERIUM_INSTALLED = 1; const DELIMITER = '|'; const DEBUGLOG = '/tmp/debuglog.txt'; const DB_DATAFORMFIELDS = 'i2sdk_dataformfields'; const PLUGIN_UPDATE_URL = 'https://licenseserver.webpowerandlight.com/memberium-is/current-version.php'; }
