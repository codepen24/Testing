<?php
if (!defined('ABSPATH' ) ) { die(); } if (! current_user_can('manage_options' ) ) { wp_die(__('You do not have sufficient permissions to access this page.' ) ); } global $i2sdk, $wpdb; memberium_app()->wpalm4is_xw91e_2pl('view_options' ); $_GET['tab'] = isset($_GET['tab'] ) ? $_GET['tab'] : 'login'; $vwpalm4is_vsmw53_cfzn = stripslashes_deep(get_option('i2sdk' ) ); $vwpalm4is_lisv1b = get_option('memberium_pages', array() ); $vwpalm4is_ne17fdv8uw4 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings'); $vwpalm4is_rhysmv6 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('infusionsoft'); if ($_SERVER['REQUEST_METHOD'] == 'POST' ) { if (! wp_verify_nonce($_POST['memberium_options_nonce'], MEMBERIUM_LIB ) ) { wp_die('nonce error' ); return; } if (isset($_POST['pages'] ) && is_array($_POST['pages'] ) ) { foreach($_POST['pages'] as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd ) { $vwpalm4is_lisv1b[$vwpalm4is_x3e6m_hobj] = $vwpalm4is_kh9vqi_6znd; } update_option('memberium_pages', $vwpalm4is_lisv1b, true ); } $vwpalm4is_w1katprd = get_option('memberium_extensions', array() ); if (isset($_POST['extensions'] ) ) { foreach($_POST['extensions'] as $vwpalm4is_x3e6m_hobj => $vwpalm4is_kh9vqi_6znd ) { $vwpalm4is_w1katprd[$vwpalm4is_x3e6m_hobj] = $vwpalm4is_kh9vqi_6znd; } } update_option('memberium_extensions', $vwpalm4is_w1katprd, true );  $vwpalm4is_obr60wde = array( 'allow_autologin', 'allow_local_logins', 'allow_wpadmin', 'attachment_pages', 'autogenerate_excerpts', 'autoupdate', 'beta_update_check', 'cache_bust', 'cache_flush', 'disable_displayname_update', 'disable_lost_password', 'disable_password_reset', 'dynamic_menus', 'extended_reg_fields', 'httppost_log', 'known_logins_only', 'local_auth_only', 'login_log', 'microcache_compat_session', 'multi_language', 'page_inheritance', 'force_learndash_inheritance', 'plaintext_db', 'preview_mode', 'protect_feeds', 'require_membership', 'show_advanced_options', 'show_post_columns', 'simultaneous_logins', 'site_lock_enabled', 'sync_affiliate', 'sync_ecommerce', 'sync_tag_details', 'sync_meta_updates', 'sync_new_wp_users', 'telemetry', 'two_pass_shortcode_filter', ); foreach($vwpalm4is_obr60wde as $vwpalm4is_x3e6m_hobj ) { $vwpalm4is_ne17fdv8uw4[$vwpalm4is_x3e6m_hobj] = isset($_POST[$vwpalm4is_x3e6m_hobj] ) ? (int) (bool) trim($_POST[$vwpalm4is_x3e6m_hobj] ) : $vwpalm4is_ne17fdv8uw4[$vwpalm4is_x3e6m_hobj]; }  $vwpalm4is_obr60wde = array( 'allow_wpadmin_dashboard', 'allow_wpadmin_role', 'allow_wpadmin_titlebar', 'default_page_redirect', 'default_prohibited_action', 'default_reglink_tag', 'displayname_format', 'facebook_app_id', 'global_excerpt', 'last_login_field', 'password_field', 'registration_url', 'spiffy_subdomain', 'username_field', ); foreach($vwpalm4is_obr60wde as $vwpalm4is_x3e6m_hobj ) { $vwpalm4is_ne17fdv8uw4[$vwpalm4is_x3e6m_hobj] = isset($_POST[$vwpalm4is_x3e6m_hobj] ) ? stripslashes(trim($_POST[$vwpalm4is_x3e6m_hobj] ) ) : $vwpalm4is_ne17fdv8uw4[$vwpalm4is_x3e6m_hobj]; }  $vwpalm4is_obr60wde = array( 'autologout_time', 'excerpt_length', 'first_login_page', 'login_actionset', 'login_tag', 'login_url', 'logout_actionset', 'logout_tag', 'max_contact_age', 'maximum_login_ips', 'maximum_login_timeframe', 'min_password_length', 'new_user_registration_tag', 'password_reset_tag', 'password_strength', 'session_timeout', 'site_ban_tag',  ); foreach($vwpalm4is_obr60wde as $vwpalm4is_x3e6m_hobj ) { $vwpalm4is_ne17fdv8uw4[$vwpalm4is_x3e6m_hobj] = isset($_POST[$vwpalm4is_x3e6m_hobj] ) ? (int) trim($_POST[$vwpalm4is_x3e6m_hobj] ) : $vwpalm4is_ne17fdv8uw4[$vwpalm4is_x3e6m_hobj]; } if (isset($_POST['autologin_authkeys'] ) ) { $vwpalm4is_h1b6kez = explode(',', $_POST['autologin_authkeys'] ); $vwpalm4is_cg0uvlb2 = explode(',', $i2sdk->getConfigurationOption('http_post_key' ) ); $vwpalm4is_zout12vlf = false; foreach ($vwpalm4is_h1b6kez as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_x3e6m_hobj ) { $vwpalm4is_x3e6m_hobj = trim($vwpalm4is_x3e6m_hobj ); foreach ($vwpalm4is_cg0uvlb2 as $vwpalm4is_qy5i1ngkxq ) { if (strtolower(trim($vwpalm4is_qy5i1ngkxq ) == strtolower(trim($vwpalm4is_x3e6m_hobj ) ) ) ) { $vwpalm4is_zout12vlf = true; unset($vwpalm4is_h1b6kez[$vwpalm4is_vzoj7cv_rsly] ); } } } $vwpalm4is_ne17fdv8uw4['autologin_authkeys'] = trim(implode(',', $vwpalm4is_h1b6kez ), ',' ); } wpalm4is_xb7t0i6pzn::wpalm4is_jr16aisj($vwpalm4is_rhysmv6, 'infusionsoft' ); wpalm4is_xb7t0i6pzn::wpalm4is_jr16aisj($vwpalm4is_ne17fdv8uw4, 'settings' ); if (isset($_POST['page_load'] ) ) { if ($_POST['page_load'] == 'Load All Templates' ) { $vwpalm4is_w7xmt0 = $this->wpalm4is_qpwy6rlcu(); foreach($vwpalm4is_w7xmt0 as $template_id => $template ) { $this->wpalm4is_x8tx1rgoe(0, $template_id ); } } elseif ($_POST['page_load'] == 'Load Single Template' ) { $this->wpalm4is_x8tx1rgoe($_POST['target_post_id'], ($_POST['template_id'] - 1 ) ); } elseif ($_POST['page_load'] == 'Install Email Templates' ) { $vwpalm4is_q6yqxkrw = $this->wpalm4is_bshzbjlxp9(); } } if (isset($_POST['new_password_field'] ) ) { $_POST['new_password_field'] = trim($_POST['new_password_field'] ); $this->wpalm4is_l1p49gmzq2da($_POST['new_password_field'] ); } if (isset($_GET['tab'] ) ) { if ($_GET['tab'] == 'general' ) { $vwpalm4is__zd4r50ct_gw = explode(',', $vwpalm4is_rhysmv6['ignore_contact_fields'] ); $vwpalm4is__zd4r50ct_gw = array_flip($vwpalm4is__zd4r50ct_gw ); unset($vwpalm4is__zd4r50ct_gw[$vwpalm4is_ne17fdv8uw4['password_field']] ); unset($vwpalm4is__zd4r50ct_gw[$vwpalm4is_ne17fdv8uw4['username_field']] ); $vwpalm4is__zd4r50ct_gw = array_flip($vwpalm4is__zd4r50ct_gw ); $vwpalm4is_rhysmv6['ignore_contact_fields'] = implode(',', $vwpalm4is__zd4r50ct_gw ); wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('General Options Updated' ); } elseif ($_GET['tab'] == 'extensions' ) { wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('Updates Options Updated' ); } elseif ($_GET['tab'] == 'http-post' ) { $_POST['autologin_authkeys'] = trim(implode(',', $vwpalm4is_h1b6kez ), ',' ); wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('Options Updated' ); if ($vwpalm4is_zout12vlf ) { wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('You cannot re-use I2SDK Keys as Autologin Keys for security reasons' . wpalm4is_yf0g75hqk184::wpalm4is_nu0flh4y2(363 ) ); } else { $vwpalm4is_ne17fdv8uw4['autologin_authkeys'] = $_POST['autologin_authkeys']; } unset($vwpalm4is_x3e6m_hobj, $vwpalm4is_qy5i1ngkxq, $vwpalm4is_zout12vlf, $vwpalm4is_cg0uvlb2, $vwpalm4is_h1b6kez ); wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('HTTP POST Options Updated' ); } } global $wp_rewrite; $wp_rewrite->flush_rules(); } $vwpalm4is_ejengfdyi = wpalm4is_dwrme417cz::wpalm4is_st6_7rm4za0g();   $vwpalm4is_gf2m1t7v8nbz = wpalm4is_l9n25d::wpalm4is_d35w2jzaf(TRUE ); $vwpalm4is_gf2m1t7v8nbz = $vwpalm4is_gf2m1t7v8nbz['mc']; $vwpalm4is_pos1lk = array(); $vwpalm4is_pos1lk[] = array('id' => 0, 'text' => '(None)' ); foreach ( (array) $vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_agvwtn ) { $vwpalm4is_pos1lk[] = array('id' => $vwpalm4is_vzoj7cv_rsly, 'text' => $vwpalm4is_agvwtn . ' (' . $vwpalm4is_vzoj7cv_rsly . ')' ); } $vwpalm4is_pos1lk = json_encode($vwpalm4is_pos1lk ); unset($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_agvwtn ); $vwpalm4is_cevdqnb5lzm = 'SELECT `id`, `name` FROM ' . MEMBERIUM_DB_ACTIONSETS . ' WHERE `appname` = %s AND `name` > "" ORDER BY `name` ASC'; $vwpalm4is_cevdqnb5lzm = $wpdb->prepare($vwpalm4is_cevdqnb5lzm, $this->appname ); $vwpalm4is_l6ih20yjwm = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A ); $json_actionsets = array(); $json_actionsets[] = array('id' => 0, 'text' => '(No Action)' ); foreach ($vwpalm4is_l6ih20yjwm as $vwpalm4is_vzoj7cv_rsly => $row ) { $json_actionsets[] = array('id' => $row['id'], 'text' => $row['name'] . ' (' . $row['id'] . ')' ); } $json_actionsets = json_encode($json_actionsets ); unset($vwpalm4is_l6ih20yjwm, $vwpalm4is_vzoj7cv_rsly, $row, $vwpalm4is_cevdqnb5lzm ); echo '<script>'; echo 'var pagelist      = ', $vwpalm4is_ejengfdyi, ';'; echo 'var actionsetlist = ', $json_actionsets, ';'; echo 'var taglist       = ', $vwpalm4is_pos1lk, ';'; echo '</script>'; unset($vwpalm4is_pos1lk, $vwpalm4is_ejengfdyi, $json_actionsets );
