<?php
 if (!defined('ABSPATH' ) ) { die(); } if (!current_user_can('manage_options' ) ) { wp_die(__('You do not have sufficient permissions to access this page.' ) ); }  global $wpdb, $i2sdk; $vwpalm4is_vsmw53_cfzn = get_option('i2sdk' ); if ($_SERVER['REQUEST_METHOD'] == 'POST' ) { if (isset($_POST['delete'] ) ) { foreach ($_POST['delete'] as $vwpalm4is_pxc9q0_ah => $vwpalm4is_p3kdx08if ) { if ($vwpalm4is_p3kdx08if == 'on' ) { unset($this->settings['remote_files'][$vwpalm4is_pxc9q0_ah] ); wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('Remote Storage Profile Deleted', 'error' ); } } } if (isset($_POST['add-profile'] ) && trim($_POST['profile_name'] ) > '' ) { $vwpalm4is_pxc9q0_ah = strtolower(trim($_POST['profile_name'] ) ); $vwpalm4is_sb8o2z_03 = array(); $vwpalm4is_sb8o2z_03['name'] = trim($_POST['profile_name'] ); $vwpalm4is_sb8o2z_03['type'] = 's3'; $vwpalm4is_sb8o2z_03['access_key'] = trim($_POST['s3_access_key'] ); $vwpalm4is_sb8o2z_03['expiration'] = ( (int)$_POST['expiration'] > 0 ) ? (int)$_POST['expiration'] : 300; $vwpalm4is_sb8o2z_03['secret_key'] = trim($_POST['s3_secret_key'] ); $vwpalm4is_sb8o2z_03['host'] = (trim($_POST['default_host'] ) > '' ) ? trim($_POST['default_host'] ) : 's3.amazonaws.com'; $vwpalm4is_sb8o2z_03['bucket'] = trim($_POST['default_bucket'] ); $vwpalm4is_sb8o2z_03['region'] = isset($_POST['region']) ? trim($_POST['region'] ) : 'us-east-1'; $this->settings['remote_files'][$vwpalm4is_pxc9q0_ah] = $vwpalm4is_sb8o2z_03; } update_option('memberium', $this->settings ); } $vwpalm4is_ubmio9wh16r2 = !empty($this->settings['remote_files'] ) ? $this->settings['remote_files'] : array(); $vwpalm4is_t5ym1_zxl6 = count($vwpalm4is_ubmio9wh16r2 ); wpalm4is_yf0g75hqk184::wpalm4is_lu3h0vq(); echo '<h1>Memberium Remote Files</h1>'; echo '<h3>Current Remote Storage Profiles', wpalm4is_yf0g75hqk184::wpalm4is_nu0flh4y2(2578 ), '</h3>'; echo '<div class="wrap">'; echo '<hr />'; echo '<form method="POST" action="" autocomplete="off">'; echo '<table class="widefat" style="white-space:nowrap;">'; echo '<tr>'; echo '<th nowrap="nowrap">Profile Name</th>'; echo '<th nowrap="nowrap">Default Host</th>'; echo '<th nowrap="nowrap">Default Bucket</th>'; echo '<th nowrap="nowrap">Region</th>'; echo '<th nowrap="nowrap">S3 Access Key</th>'; echo '<th nowrap="nowrap">S3 Secret Key</th>'; echo '<th nowrap="nowrap">Expiration</th>'; echo '<th>Delete?</th>'; echo '</tr>'; if ($vwpalm4is_t5ym1_zxl6 == 0 ) { echo '<tr><td colspan="99">You have no remote storage defined.</td></tr>'; } else { foreach ($vwpalm4is_ubmio9wh16r2 as $vwpalm4is_nw45zap => $vwpalm4is_ylzogxqvs7d ) { if ($vwpalm4is_ylzogxqvs7d['type'] == 's3' ) { echo '<tr>'; echo '<td><i class="fab fa-aws"></i> ', $vwpalm4is_ylzogxqvs7d['name'], '</td>'; echo '<td>', $vwpalm4is_ylzogxqvs7d['host'], '</td>'; echo '<td>', $vwpalm4is_ylzogxqvs7d['bucket'], '</td>'; echo '<td>', isset($vwpalm4is_ylzogxqvs7d['region']) ? $vwpalm4is_ylzogxqvs7d['region'] : 'Default', '</td>'; echo '<td>', $vwpalm4is_ylzogxqvs7d['access_key'], '</td>'; echo '<td>', substr($vwpalm4is_ylzogxqvs7d['secret_key'], 0, 8 ), '********</td>'; echo '<td>', (int)$vwpalm4is_ylzogxqvs7d['expiration'], '</td>'; echo '<td>'; echo '<input type="checkbox" name="delete[' . $vwpalm4is_nw45zap . ']">'; echo '</td>'; echo '</tr>'; } } } echo '</table>'; echo '&nbsp;<br />'; if ($vwpalm4is_t5ym1_zxl6 > 0 ) { echo '<input type="submit" name="delete-profiles" value="Delete Profiles" class="button-secondary" />'; } echo '</form>'; echo '</div>'; echo '<h3>Add New S3 Profile</h3>'; echo '<div style="width:800px;">'; echo '<form method="POST" action="">'; echo '<table class="widefat">'; echo '<input type="hidden" name="type" value="s3">'; echo '<tr>'; echo '<th nowrap="nowrap">Profile Name</th>'; echo '<th nowrap="nowrap">Profile Type</th>'; echo '<th nowrap="nowrap">Default Host</th>'; echo '<th nowrap="nowrap">Default Bucket</th>'; echo '<th nowrap="nowrap">Region</th>'; echo '<th nowrap="nowrap">Access Key</th>'; echo '<th nowrap="nowrap">S3 Secret Key</th>'; echo '<th nowrap="nowrap">Expiration</th>'; echo '</tr>'; echo '<tr>'; echo '<td><input name="profile_name" type="text" size="10" autocomplete="off"/></td>'; echo '<td><select name="profile_type"><option value="s3">Amazon S3</option></select></td>'; echo '<td><input name="default_host" type="text" size="20" placeholder="s3.amazonaws.com" autocomplete="off"/></td>'; echo '<td><input name="default_bucket" type="text" size="20" autocomplete="off"/></td>'; $vwpalm4is_qknt5yz = wpalm4is_aznwrha4::wpalm4is_lb25fxh(); echo '<td><select name="region"/>'; foreach($vwpalm4is_qknt5yz as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { echo "<option value='{$vwpalm4is_x1folrs}' ".($vwpalm4is_x1folrs == 'us-east-1' ? ' selected ' : '') . ">{$vwpalm4is_ndxvp20}</option>"; } echo '</select></td>'; echo '<td><input name="s3_access_key" type="text" size="20" autocomplete="off"/></td>'; echo '<td><input name="s3_secret_key" type="text" size="20" autocomplete="off"/></td>'; echo '<td><input name="expiration" type="text" size="4" autocomplete="off"/></td>'; echo '</tr>'; echo '</table>'; echo '&nbsp;<br />'; echo '<input type="submit" name="add-profile" value="Add Remote Profile" class="button-primary" />'; echo '<hr />'; echo '</form>'; echo '</div>';
