<?php
if (!defined('ABSPATH' ) ) { die(); } if (! current_user_can('manage_options' ) ) { wp_die(__('You do not have sufficient permissions to access this page.' ) ); } global $i2sdk, $wpdb; $vwpalm4is_rq2yiwt1_lz = 'memberium_sync_api'; $vwpalm4is_dd4j20qwmn_ = wpalm4is_xb7t0i6pzn::wpalm4is_mz346l5qyv('appname'); $vwpalm4is_vsmw53_cfzn = get_option('i2sdk' ); $this->settings = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy(); memberium_app()->wpalm4is_sh53_jivqsm(); $i2sdk->syncCustomFields(); $_GET['tab'] = isset($_GET['tab'] ) ? $_GET['tab'] : 'operations'; if ($_SERVER['REQUEST_METHOD'] == 'POST' ) {  if (! wp_verify_nonce($_POST[$vwpalm4is_rq2yiwt1_lz], MEMBERIUM_LIB ) ) { wp_die('nonce error' ); return; } if ($_POST['formtype'] == 'operations' ) { $vwpalm4is_iomhdlzi73g5 = array( 'makepass_scan_size', 'makepass_scan_tag', 'makepass_success_tag', 'makepass_success_actionset', ); foreach($vwpalm4is_iomhdlzi73g5 as $vwpalm4is_cbkmin3z ) { $this->settings['settings'][$vwpalm4is_cbkmin3z] = isset($_POST[$vwpalm4is_cbkmin3z] ) ? (int) $_POST[$vwpalm4is_cbkmin3z] : $this->settings['settings'][$vwpalm4is_cbkmin3z]; } } elseif ($_POST['formtype'] == 'categories' ) { $_POST['is4wp_ignore_tag_categories'] = empty($_POST['is4wp_ignore_tag_categories'] ) ? array() : $_POST['is4wp_ignore_tag_categories']; $vwpalm4is_zbjd89 = array(); $vwpalm4is_t3c1u47en = wpalm4is_bd5uye4ng3l::wpalm4is_akjaz4(); foreach($vwpalm4is_t3c1u47en as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs ) { if (! in_array($vwpalm4is_x1folrs['id'], $_POST['is4wp_ignore_tag_categories'] ) ) { $vwpalm4is_zbjd89[] = $vwpalm4is_x1folrs['id']; } } $vwpalm4is_zbjd89 = implode(',', $vwpalm4is_zbjd89 ); if (! empty($vwpalm4is_zbjd89 ) ) { $vwpalm4is__mnral5zjy = MEMBERIUM_DB_TAGS; $vwpalm4is_cevdqnb5lzm = "DELETE FROM `{$vwpalm4is__mnral5zjy}` WHERE category in ({$vwpalm4is_zbjd89} ) AND `appname` = '{$vwpalm4is_dd4j20qwmn_}'"; $wpdb->query($vwpalm4is_cevdqnb5lzm ); } $this->settings['settings']['ignore_tag_categories'] = $vwpalm4is_zbjd89; memberium_app()->wpalm4is_sh53_jivqsm(); wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('Tag Categories Ignore List Updated.' ); } elseif ($_POST['formtype'] == 'contactfields' ) { if (empty($_POST['is4wp_ignore_contact_fields'] ) ) { $_POST['is4wp_ignore_contact_fields'] = array(); } $this->settings['settings']['ignore_contact_fields'] = (is_array($_POST['is4wp_ignore_contact_fields'] ) ) ? implode(',', $_POST['is4wp_ignore_contact_fields'] ) : ''; if ($this->settings['settings']['ignore_contact_fields'] > '' ) { $vwpalm4is_cevdqnb5lzm = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE fieldname in (\'' . $this->settings['settings']['ignore_contact_fields'] . '\') AND `appname` = "' . $this->appname . '" '; $wpdb->query($vwpalm4is_cevdqnb5lzm ); } $i2sdk->syncCustomFields(); wpalm4is_yf0g75hqk184::wpalm4is_in62ibjlx('Contact Fields Ignore List Updated.' ); } elseif ($_POST['formtype'] == 'buddypress' ) { $vwpalm4is_p46ux0wh9mz8 = get_option('memberium_xprofile_map', array() ); update_option('memberium_xprofile_map', $_POST['fieldmap'] ); } wpalm4is_xb7t0i6pzn::wpalm4is_cwq8yi3t9g4($this->settings ); } wpalm4is_yf0g75hqk184::wpalm4is_lu3h0vq(); $vwpalm4is_ux_y3jt1 = array( 'operations' => '<i class="fa fa-plug"></i> Operations', 'categories' => '<i class="fa fa-tags"></i> Tag Categories', 'contactfields' => '<i class="fa fa-user"></i> Contact Fields', ); if (function_exists('bp_is_active' ) && bp_is_active('xprofile' ) ) { $vwpalm4is_ux_y3jt1['buddypress'] = '<i class="fa fa-user-plus"></i> BuddyPress Fields'; } $vwpalm4is_q7qg9evksmf0 = empty($_GET['tab'] ) ? 'categories' : strtolower($_GET['tab'] ); echo '<div class="wrap">'; echo '<h1>', _('Sync Options' ), '</h1>'; echo '<h3 class="nav-tab-wrapper">'; foreach ($vwpalm4is_ux_y3jt1 as $vwpalm4is_xd_mu53v0kb => $vwpalm4is_gtyqfor0c8ib ) { $class = ($vwpalm4is_xd_mu53v0kb == $vwpalm4is_q7qg9evksmf0 ) ? ' nav-tab-active' : ''; if ($vwpalm4is_xd_mu53v0kb == $vwpalm4is_q7qg9evksmf0 ) { echo "<span class='nav-tab{$class}'>{$vwpalm4is_gtyqfor0c8ib}</span>"; } else { echo "<a class='nav-tab{$class}' href='?page={$_GET['page']}&tab={$vwpalm4is_xd_mu53v0kb}'>{$vwpalm4is_gtyqfor0c8ib}</a>"; } } echo '</h3>'; echo '<div class="tabcontent" style="margin-top:10px;">'; echo '<div class="wrap">'; echo '<form method="POST" action="">'; echo '<input type="hidden" name="formtype" value="', $_GET['tab'], '">'; wp_nonce_field(MEMBERIUM_LIB, $vwpalm4is_rq2yiwt1_lz ); $vwpalm4is_ne17fdv8uw4 = $this->settings['settings']; if ($vwpalm4is_q7qg9evksmf0 == 'operations' ) { include_once(MEMBERIUM_SCREEN_DIR . 'sync-operations-show.php' ); } elseif ($vwpalm4is_q7qg9evksmf0 == 'categories' ) { include_once(MEMBERIUM_SCREEN_DIR . 'sync-categories-show.php' ); } elseif ($vwpalm4is_q7qg9evksmf0 == 'contactfields' ) { include_once(MEMBERIUM_SCREEN_DIR . 'sync-contactfields-show.php' ); } elseif ($vwpalm4is_q7qg9evksmf0 == 'buddypress' ) { include_once(MEMBERIUM_SCREEN_DIR . 'sync-buddypress-show.php' ); } else { memberium_app()->wpalm4is_xw91e_2pl('easter_egg' ); echo wp_oembed_get('https://www.youtube.com/watch?v=zgvXtexdgAM', array('autoplay' => '1' ) ); echo '<p>Klaatu Barada N... Necktie... Neckturn... Nickel...</p><p>It\'s an "N" word, it\'s definitely an "N" word!</p><p>Klaatu... Barada... N...</p>'; } echo '</form>'; echo '</div>'; echo '</div>'; echo '</div>'; if (! empty($vwpalm4is_wsq0l_whom4 ) ) {  $vwpalm4is_ql1r3cx9zya[] = array('id' => 0, 'text' => '(Don\'t Sync)' ); foreach ( (array) $vwpalm4is_wsq0l_whom4 as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_a0g4be2 ) { $vwpalm4is_ql1r3cx9zya[] = array('id' => $vwpalm4is_vzoj7cv_rsly, 'text' => $vwpalm4is_a0g4be2 ); } $vwpalm4is_ql1r3cx9zya = json_encode($vwpalm4is_ql1r3cx9zya ); unset($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_agvwtn ); echo '<script>'; echo 'var requiredtaglist      = ', $vwpalm4is_ql1r3cx9zya, ';'; echo '</script>'; unset($vwpalm4is_ql1r3cx9zya ); } $vwpalm4is_gf2m1t7v8nbz = wpalm4is_l9n25d::wpalm4is_d35w2jzaf(true ); $vwpalm4is_gf2m1t7v8nbz = $vwpalm4is_gf2m1t7v8nbz['mc']; $vwpalm4is_pos1lk = array(); $vwpalm4is_pos1lk[] = array('id' => 0, 'text' => '(None)' ); foreach ( (array) $vwpalm4is_gf2m1t7v8nbz as $vwpalm4is_vzoj7cv_rsly => $vwpalm4is_agvwtn ) { $vwpalm4is_pos1lk[] = array('id' => $vwpalm4is_vzoj7cv_rsly, 'text' => $vwpalm4is_agvwtn . ' (' . $vwpalm4is_vzoj7cv_rsly . ')' ); } $vwpalm4is_pos1lk = json_encode($vwpalm4is_pos1lk ); unset($vwpalm4is_gf2m1t7v8nbz, $vwpalm4is_vzoj7cv_rsly, $vwpalm4is_agvwtn ); $vwpalm4is_kpql0yokc7 = wpalm4is_bd5uye4ng3l::wpalm4is_nko9d6hy8c(array('none' => true, 'format' => 'json' ) ); echo '<script>'; echo 'var actionsetlist = ', $vwpalm4is_kpql0yokc7, ";\n"; echo 'var taglist = ', $vwpalm4is_pos1lk, ";\n"; echo '</script>'; unset($vwpalm4is_pos1lk );
