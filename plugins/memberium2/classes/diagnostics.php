<?php
/**
 * Copyright (c) 2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (!defined('ABSPATH') ) { header('Location: /'); die(); } final class wpalm4is_w1qlth04zdc6 { static function wpalm4is_f0cdp_6xj() { self::wpalm4is_s16ajw(); self::wpalm4is_mjzvu1(); self::wpalm4is_kluwx358d2n(); self::wpalm4is_x2mnsh0pz(); self::wpalm4is_runrdf3vi(); self::wpalm4is_nl0_26w974gu(); self::wpalm4is_f2_nui3(); self::wpalm4is_hbpcz854xoa(); self::wpalm4is_pnwxgrk(); self::wpalm4is_gec1jl985q(); self::wpalm4is__8940agby1h(); self::wpalm4is_thvsb5u(); self::wpalm4is_t830mriu4l_(); self::wpalm4is_l01tzs58p(); self::wpalm4is_lzxq26ua(); self::wpalm4is_fgpki04q(); self::wpalm4is_j47_zn09(); } static function wpalm4is_runrdf3vi() { global $wpdb; $vwpalm4is_l2wues_ = get_option('memberium_tables', array() ); $vwpalm4is_tp4kj93ghye = array(); if (is_array($vwpalm4is_l2wues_)) { foreach($vwpalm4is_l2wues_ as $vwpalm4is_uyqdzc1) { $vwpalm4is_cevdqnb5lzm = "SELECT 1 FROM `{$vwpalm4is_uyqdzc1}` LIMIT 1;"; $wpdb->get_var($vwpalm4is_cevdqnb5lzm); $vwpalm4is_p3kdx08if = $wpdb->last_error; if ($vwpalm4is_p3kdx08if) { $vwpalm4is_tp4kj93ghye[] = "Table '{$vwpalm4is_uyqdzc1}' : <span style='font-weight:bold;color:red;'>{$vwpalm4is_p3kdx08if}</span><br />"; } } } echo '<h3>Missing Database Tables</h3>'; echo '<div class="indented">'; if (! empty($vwpalm4is_tp4kj93ghye)) { foreach($vwpalm4is_tp4kj93ghye as $vwpalm4is_lweqtshzn) { echo $vwpalm4is_lweqtshzn, '<br>'; } } else { echo '<p>None</p>'; } echo '</div>'; } static function wpalm4is_thvsb5u() { echo '<h3>wp-admin php.ini</h3>'; if (file_exists(get_home_path() . '/wp-admin/php.ini') ) { echo '<textarea readonly=readonly cols="100" rows="10">', file_get_contents(get_home_path() . '/wp-admin/php.ini'), '</textarea>'; } else { echo '<p>Not Found</p>'; } } static function wpalm4is_lzxq26ua() { $vwpalm4is_bgaibwsc6 = get_defined_constants(true); if (isset($vwpalm4is_bgaibwsc6['user']) ) { ksort($vwpalm4is_bgaibwsc6['user']); echo '<h3>Constants</h3>'; echo '<table>'; foreach($vwpalm4is_bgaibwsc6['user'] as $k => $v) { echo '<tr><td>', $k, '</td><td>', $v, '</td></tr>'; } echo '</table>'; } } static function wpalm4is_d7b3mzfenop() { $vwpalm4is__nagx5_6 = '<strong style="color:red;">Unknown</strong>'; if (is_file('/proc/cpuinfo') ) { $vwpalm4is_kbkrjw_ = file('/proc/cpuinfo'); foreach($vwpalm4is_kbkrjw_ as $vwpalm4is_vwmsk_yxp) { if (substr($vwpalm4is_vwmsk_yxp, 0, 9) == 'cpu cores') { $vwpalm4is__nagx5_6 = intval($vwpalm4is__nagx5_6) + (int) substr($vwpalm4is_vwmsk_yxp, strpos($vwpalm4is_vwmsk_yxp, ':') + 1); } } } return $vwpalm4is__nagx5_6; } static function wpalm4is_l01tzs58p() { echo '<h3>Cron Jobs</h3>'; echo '<div class="indented">'; $vwpalm4is_tvnmo97 = array(); $vwpalm4is_qs6lbv3o = get_option('cron', array() ); if (count($vwpalm4is_qs6lbv3o) ) { foreach ($vwpalm4is_qs6lbv3o as $vwpalm4is__9rsbjp4yx0a => $vwpalm4is_lgjwcqr8) { if (is_array($vwpalm4is_lgjwcqr8) ) { foreach ($vwpalm4is_lgjwcqr8 as $jobname => $details) { if (stripos($jobname, 'memberium') === 0) { $vwpalm4is_tvnmo97[$jobname] = $vwpalm4is__9rsbjp4yx0a; } } } } } echo '<strong style="margin-left:20px;display:inline-block;width:250px;">Cron Job Name</strong><strong>Next Run Time</strong><br>'; if (! empty($vwpalm4is_tvnmo97) ) { foreach ($vwpalm4is_tvnmo97 as $vwpalm4is_gtyqfor0c8ib => $vwpalm4is_yq9zlicjw) { echo '<span style="margin-left:20px;display:inline-block;width:250px;">', $vwpalm4is_gtyqfor0c8ib, '</span>', date("Y-m-d h:i:s", $vwpalm4is_yq9zlicjw), '<br>'; } } echo '</div>'; } static function wpalm4is_nl0_26w974gu() { echo '<h3>CURL Library Support</h3>'; echo '<div class="indented">'; if (function_exists('curl_version') ) { $vwpalm4is_yfwyenq10oc = curl_version(); echo '<strong>Version</strong>: ', $vwpalm4is_yfwyenq10oc['version'], '<br />'; echo '<strong>Version Number</strong>: ', $vwpalm4is_yfwyenq10oc['version_number'], '<br />'; echo '<strong>SSL Version</strong>: ', $vwpalm4is_yfwyenq10oc['ssl_version'], '<br />'; echo '<strong>LibZ Version</strong>: ', $vwpalm4is_yfwyenq10oc['libz_version'], '<br />'; echo '<strong>Age</strong>: ', $vwpalm4is_yfwyenq10oc['age'], '<br />'; } else { echo '<p style="color:red;font-weight:bold;">CURL Library Support Missing</p>'; } echo '</div>'; } static function wpalm4is_x2mnsh0pz() { global $wpdb; echo '<h3>MySQL Configuration</h3>'; echo '<div class="indented">'; echo '<h3>Database Storage Engines:</h3>'; $vwpalm4is_cevdqnb5lzm = 'SHOW STORAGE ENGINES;'; $vwpalm4is_ss713erkxf0w = $wpdb->get_results($vwpalm4is_cevdqnb5lzm, ARRAY_A); echo '<table>'; echo '<tr>'; echo '<td>Engine Name</td>'; echo '<td>Support</td>'; echo '<td>Comments / Description</td>'; echo '</tr>'; foreach($vwpalm4is_ss713erkxf0w as $vwpalm4is_ukra4p) { echo '<tr>'; echo '<td>',$vwpalm4is_ukra4p['Engine'],'</td>'; echo '<td>',$vwpalm4is_ukra4p['Support'],'</td>'; echo '<td>',$vwpalm4is_ukra4p['Comment'],'</td>'; echo '</tr>'; } echo '</table>'; echo '<h3>Cache Configuration</h3>'; $vwpalm4is_cevdqnb5lzm = "show variables like 'have_query_cache';"; $vwpalm4is_ukra4p = $wpdb->get_results($vwpalm4is_cevdqnb5lzm); echo '<strong>', $vwpalm4is_ukra4p[0]->Variable_name, '</strong> = ', $vwpalm4is_ukra4p[0]->Value, '<br>'; $vwpalm4is_cevdqnb5lzm = "show variables like '%query%';"; $vwpalm4is_ss713erkxf0w = $wpdb->get_results($vwpalm4is_cevdqnb5lzm); foreach($vwpalm4is_ss713erkxf0w as $vwpalm4is_ukra4p) { echo '<strong>', $vwpalm4is_ukra4p->Variable_name, '</strong> = ', $vwpalm4is_ukra4p->Value, '<br>'; } echo '</div>'; } static function wpalm4is_fgpki04q() { echo '<h3>Debug Log:</h3>'; if (file_exists(MEMBERIUM_DEBUGLOG) ) { $vwpalm4is_ww1x6r = (0 - min(filesize(MEMBERIUM_DEBUGLOG), MB_IN_BYTES) ); echo '<form method="post" action=""><input type="submit" name="delete-debug" value="Delete Debug Log"></form>'; echo '<textarea readonly=readonly cols="100" rows="20">', file_get_contents(MEMBERIUM_DEBUGLOG, null, null, $vwpalm4is_ww1x6r), '</textarea>'; } else { echo '<p style="color:red;font-weight:bold;">No debug log found.</p>'; } } static function wpalm4is_j47_zn09() { $vwpalm4is_rzqste = ini_get('error_log'); if (! empty($vwpalm4is_rzqste) && file_exists($vwpalm4is_rzqste) ) { $vwpalm4is_tsoiq_ = (int) filesize($vwpalm4is_rzqste); $vwpalm4is_dv_hl953mu4x = MB_IN_BYTES; $vwpalm4is_ww1x6r = ($vwpalm4is_tsoiq_ > $vwpalm4is_dv_hl953mu4x) ? $vwpalm4is_tsoiq_ - $vwpalm4is_dv_hl953mu4x : $vwpalm4is_tsoiq_; echo '<h3>PHP Error Log:</h3>'; echo '<textarea readonly=readonly cols="100" rows="20">', file_get_contents($vwpalm4is_rzqste, null, null, $vwpalm4is_ww1x6r), '</textarea>'; } } static function wpalm4is_pnwxgrk() { echo '<h3>.htaccess</h3>'; if (file_exists(get_home_path() . '.htaccess') ) { echo '<textarea readonly=readonly cols="100" rows="10">', file_get_contents(get_home_path() . '.htaccess'), '</textarea>'; } } static function wpalm4is_qpks4ja() { global $wpdb; $vwpalm4is_a8f_4d7xv0yw = get_option(wpalm4is_rvrqgfe5ns_::wpalm4is_ud7n4c() ); $vwpalm4is_a6ajr1x_kh = wpalm4is_rvrqgfe5ns_::wpalm4is_m1ufj92cv45($vwpalm4is_a8f_4d7xv0yw); echo '<h3>License Status</h3>'; echo '<p class="indented">'; echo '<label>Valid</label>'; echo '<span>', ( (boolean) $vwpalm4is_a6ajr1x_kh['valid'] ? '<strong style="color:green;">Yes</strong>' : '<strong style="color:red;">No</strong>'), '</span><br />'; echo '<label>Active</label>'; echo '<span>', ( (boolean) $vwpalm4is_a6ajr1x_kh['active'] ? '<strong style="color:green;">Yes</strong>' : '<strong style="color:red;">No</strong>'), '</span><br />'; if ( (boolean) $vwpalm4is_a6ajr1x_kh['trial_mode']) { echo '<label>Trial Mode</label>'; echo '<span><strong style="color:red;">TRIAL LICENSE MODE</strong></span><br />'; } echo '<label>Next Check</label>'; echo '<span>', date('F jS, Y @ h:i:s', $vwpalm4is_a6ajr1x_kh['next_check']), '</span><br />'; echo '<label>Renewal Date</label>'; echo '<span>', date('F jS, Y @ h:i:s', $vwpalm4is_a6ajr1x_kh['renewal_date']), '</span><br />'; echo '</p>'; echo '<hr />'; echo '<h3>License Detail</h3>'; echo '<textarea cols="100" rows="10">'; foreach ($vwpalm4is_a6ajr1x_kh as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { echo ucwords(str_replace('_', ' ', $vwpalm4is_ndxvp20) ), ':  ', $vwpalm4is_x1folrs, "\n"; } echo '</textarea>'; } static function wpalm4is__8940agby1h() { echo '<h3>Main php.ini</h3>'; if (file_exists(get_home_path() . 'php.ini') ) { echo '<textarea readonly=readonly cols="100" rows="10">', file_get_contents(get_home_path() . 'php.ini'), '</textarea>'; } else { echo '<p>Not Found</p>'; } } static function wpalm4is_k4y5uwr_1bn() { $vwpalm4is_la4pzw = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('memberships'); echo '<h3>Memberships</h3>'; echo '<textarea cols="100" rows="20">', json_encode($vwpalm4is_la4pzw, JSON_PRETTY_PRINT), '</textarea>'; } static function wpalm4is_f2_nui3() { echo '<h3>Network</h3>'; echo '<div class="indented">'; $vwpalm4is_ifcsd5 = array( 'licenseserver.webpowerandlight.com', ); echo '<h3>License Servers</h3>'; echo '<div class="indented">'; $vwpalm4is_rc_36l = false; foreach ($vwpalm4is_ifcsd5 as $vwpalm4is_hy56eq) { $vwpalm4is_ho1zfj8 = gethostbyname($vwpalm4is_hy56eq); if ($vwpalm4is_hy56eq == $vwpalm4is_ho1zfj8) { $vwpalm4is_ho1zfj8 ='<span style="color:red;">Failed To Resolve</span>'; $vwpalm4is_rc_36l = true; } else { $vwpalm4is_ho1zfj8 ='<span style="color:green;">' . $vwpalm4is_ho1zfj8 . '</span>'; } echo '<p>', $vwpalm4is_hy56eq, ' resolves to <strong>', $vwpalm4is_ho1zfj8, '</strong></p>'; } if ($vwpalm4is_rc_36l) { echo '<p style="color:red;">One or more hostnames failed to resolve due to DNS issues.</p>'; } $vwpalm4is_h4ky7q3hdg0 = array( 'https://licenseserver.webpowerandlight.com/getlicense.php', 'https://licenseserver.webpowerandlight.com/memberium-is/current-version.php', ); $vwpalm4is_rc_36l = false; foreach ($vwpalm4is_h4ky7q3hdg0 as $vwpalm4is_sf9tqcp3) { $vwpalm4is_ukra4p = wp_remote_get($vwpalm4is_sf9tqcp3); if (is_array($vwpalm4is_ukra4p) ) { } else { echo '<p>', $vwpalm4is_ukra4p->errors['http_request_failed'][0], '</p>'; $vwpalm4is_rc_36l = true; } } if (! $vwpalm4is_rc_36l) { echo '<p><strong style="color:green;">Connection Successful</strong></p>'; } echo '</div>'; } static function wpalm4is_gec1jl985q() { $vwpalm4is_jh87yrzntd_5 = ini_get_all(); if (! empty($vwpalm4is_jh87yrzntd_5) ) { ksort($vwpalm4is_jh87yrzntd_5); echo '<h3>PHP .ini Settings</h3>'; echo '<table>'; foreach($vwpalm4is_jh87yrzntd_5 as $vwpalm4is_ndxvp20 => $vwpalm4is_x1folrs) { if (! empty($vwpalm4is_x1folrs['local_value']) || ! empty($vwpalm4is_x1folrs['global_value']) ) { echo '<tr><td>', $vwpalm4is_ndxvp20, '</td><td>', isset($vwpalm4is_x1folrs['local_value']) ? $vwpalm4is_x1folrs['local_value'] : $vwpalm4is_x1folrs['global_value'], '</td></tr>'; } } echo '</table>'; } } static function wpalm4is_mjzvu1() { echo '<h3>PHP Modules Loaded</h3>'; echo '<div class="indented">'; echo '<div style="width:600px;">', implode(', ', get_loaded_extensions() ), '</div>'; echo '</div>'; } static function wpalm4is_um0u42y_pv() { $vwpalm4is_ne17fdv8uw4 = wpalm4is_xb7t0i6pzn::wpalm4is_s0xuab5fq6hy('settings'); echo '<h3>Settings</h3>'; echo '<textarea cols="100" rows="20">', json_encode($vwpalm4is_ne17fdv8uw4, JSON_PRETTY_PRINT), '</textarea>'; } static function wpalm4is_kluwx358d2n() { echo '<h3>System Load</h3>'; echo '<div class="indented">'; if (function_exists('sys_getloadavg') ) { $vwpalm4is_cxwepad = sys_getloadavg(); echo '<strong>Last Minute</strong>:  ', $vwpalm4is_cxwepad[0], '<br>'; echo '<strong>Last 5 Minutes</strong>:  ', $vwpalm4is_cxwepad[1], '<br>'; echo '<strong>Last 15 Minutes</strong>:  ', $vwpalm4is_cxwepad[2], '<br>'; } else { echo '<p style="font-weight:bold;color:red;">Operating System missing Load Average Reports.</p>'; } echo '</div>'; echo '<p></p>'; } static function wpalm4is_s16ajw() { $vwpalm4is__nagx5_6 = self::wpalm4is_d7b3mzfenop(); $vwpalm4is_r7_l3rik = php_uname('m'); $vwpalm4is_i3hgti6 = $GLOBALS['wpdb']->db_version(); $vwpalm4is_trdmk76buzg2 = php_uname('n'); $vwpalm4is_fuzhfm_89ok = function_exists('ioncube_loader_version') ? ioncube_loader_version() : '<strong style="color:red;">None</strong>'; $vwpalm4is_xvxn0yz6jgt = php_uname('s'); $vwpalm4is_pc87b4kxrnt_ = php_uname('v'); $vwpalm4is_geuwf7o3bgi = phpversion(); $vwpalm4is_fp25a6i = php_sapi_name(); $vwpalm4is_g1rau5s = isset($_SERVER['SERVER_SOFTWARE']) ? $_SERVER['SERVER_SOFTWARE'] : '<strong style="color:red;">Unknown</strong>'; $vwpalm4is_n_bsw6d3x = get_current_user(); $vwpalm4is_uhpt9byq = get_bloginfo('version'); echo '<h3>System Info</h3>'; echo '<div class="indented">'; echo "<strong>Hostname</strong>:  {$vwpalm4is_trdmk76buzg2}<br>"; echo "<strong>CPU Type</strong>:  {$vwpalm4is_r7_l3rik}<br>"; echo "<strong>CPU Cores</strong>:  {$vwpalm4is__nagx5_6}<br>"; echo "<strong>Operating System</strong>:  {$vwpalm4is_xvxn0yz6jgt}<br>"; echo "<strong>Web Server Type</strong>:  {$vwpalm4is_g1rau5s}<br>"; echo "<strong>Username</strong>:  {$vwpalm4is_n_bsw6d3x}<br>"; echo "<strong>SAPI</strong>:  {$vwpalm4is_fp25a6i}<br>"; echo "<strong>PHP Version</strong>:  {$vwpalm4is_geuwf7o3bgi}<br>"; echo "<strong>IonCube Version</strong>:  {$vwpalm4is_fuzhfm_89ok}<br>"; echo "<strong>WordPress Version</strong>:  {$vwpalm4is_uhpt9byq}<br>"; echo "<strong>Database Version</strong>:  {$vwpalm4is_i3hgti6}<br>"; echo '<p></p>'; echo '<strong>Home Path</strong>:  ', get_home_path(), '<br>'; echo '<strong>Install Point</strong>: ', dirname(MEMBERIUM_HOME), '<br>'; echo '<p></p>'; echo '<strong>Remote Address</strong>:  ', $_SERVER['REMOTE_ADDR'], '<br>'; if (isset($_SERVER['HTTP_X_SUCURI_CLIENTIP']) ) { echo '<strong>Sucuri Client IP</strong>:  ', $_SERVER['HTTP_X_SUCURI_CLIENTIP'], '<br>'; } if (isset($_SERVER['HTTP_X_REAL_IP']) ) { echo '<strong>Real IP</strong>:  ', $_SERVER['HTTP_X_REAL_IP'], '<br>'; } if (isset($_SERVER['HTTP_X_FORWARDED_FOR']) ) { echo '<strong>Forwarded For</strong>:  ', $_SERVER['HTTP_X_FORWARDED_FOR'], '<br>'; } echo '<p></p>'; echo '</div>'; } static function wpalm4is_hbpcz854xoa() { echo '<h3>TLS Support</h3>'; echo '<div class="indented">'; echo '<h3>CURL SSL TLS 1.2 Test</h3>'; $vwpalm4is_nfmce1 = curl_init('https://tlstest.paypal.com/'); curl_setopt($vwpalm4is_nfmce1, CURLOPT_RETURNTRANSFER, true); $vwpalm4is_ukra4p = curl_exec($vwpalm4is_nfmce1);  echo '<strong>PayPal Test</strong><br />'; echo $vwpalm4is_ukra4p, '<br /><br />'; $vwpalm4is_nfmce1 = curl_init('https://www.howsmyssl.com/a/check'); curl_setopt($vwpalm4is_nfmce1, CURLOPT_RETURNTRANSFER, true); $vwpalm4is_ukra4p = curl_exec($vwpalm4is_nfmce1);  $vwpalm4is_ukra4p = json_decode($vwpalm4is_ukra4p); if (is_object($vwpalm4is_ukra4p) ) { echo '<strong>SSL Protocol Test</strong><br />'; echo '<strong>TLS Version</strong>: ', $vwpalm4is_ukra4p->tls_version, '<br />'; echo '<strong>TLS Compression</strong>: ', $vwpalm4is_ukra4p->tls_compression_supported ? 'Yes' : 'No', '<br />'; if (is_array($vwpalm4is_ukra4p->given_cipher_suites) ) { echo '<strong>Cipher Suites</strong>: ', implode(', ', $vwpalm4is_ukra4p->given_cipher_suites), '<br>'; } } else { echo '<p style="color:red;font-weight:bold;">SSL Protocol Test Failed</p>'; } echo '</div>'; echo '</div>'; } static function wpalm4is_t830mriu4l_() { echo '<h3>wp-config.php:</h3>'; if (file_exists(get_home_path() . 'wp-config.php') ) { echo '<textarea readonly=readonly cols="100" rows="10">', file_get_contents(get_home_path() . 'wp-config.php'), '</textarea>'; } } }
